/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
/*! JointJS v3.4.0 (2021-07-13) - JavaScript diagramming library


This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
if(function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n=[],i=Object.getPrototypeOf,r=n.slice,o=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},a=n.push,s=n.indexOf,l={},u=l.toString,c=l.hasOwnProperty,h=c.toString,f=h.call(Object),g={},d=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},p=function(t){return null!=t&&t===t.window},m=t.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function I(t,e,n){var i,r,o=(n=n||m).createElement("script");if(o.text=t,e)for(i in v)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function A(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[u.call(t)]||"object":typeof t}var y="3.6.0",C=function(t,e){return new C.fn.init(t,e)};function b(t){var e=!!t&&"length"in t&&t.length,n=A(t);return!d(t)&&!p(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}C.fn=C.prototype={jquery:y,constructor:C,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return C.each(this,t)},map:function(t){return this.pushStack(C.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(C.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},C.extend=C.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||d(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&a!==i&&(u&&i&&(C.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[e],o=r&&!Array.isArray(n)?[]:r||C.isPlainObject(n)?n:{},r=!1,a[e]=C.extend(u,o,i)):void 0!==i&&(a[e]=i));return a},C.extend({expando:"jQuery"+(y+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==u.call(t)||(e=i(t))&&("function"!=typeof(n=c.call(e,"constructor")&&e.constructor)||h.call(n)!==f))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){I(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(b(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(b(Object(t))?C.merge(n,"string"==typeof t?[t]:t):a.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:s.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,a=0,s=[];if(b(t))for(i=t.length;a<i;a++)null!=(r=e(t[a],a,n))&&s.push(r);else for(a in t)null!=(r=e(t[a],a,n))&&s.push(r);return o(s)},guid:1,support:g}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=n[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){l["[object "+e+"]"]=e.toLowerCase()});var w=function(t){var e,n,i,r,o,a,s,l,u,c,h,f,g,d,p,m,v,I,A,y="sizzle"+1*new Date,C=t.document,b=0,w=0,x=lt(),N=lt(),M=lt(),S=lt(),k=function(t,e){return t===e&&(h=!0),0},T={}.hasOwnProperty,D=[],j=D.pop,z=D.push,L=D.push,P=D.slice,E=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Z="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",G="\\["+Z+"*("+B+")(?:"+Z+"*([*^$|!~]?=)"+Z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+Z+"*\\]",R=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",_=new RegExp(Z+"+","g"),W=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g"),Y=new RegExp("^"+Z+"*,"+Z+"*"),U=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),F=new RegExp(Z+"|>"),X=new RegExp(R),V=new RegExp("^"+B+"$"),H={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,q=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){f()},at=yt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{L.apply(D=P.call(C.childNodes),C.childNodes),D[C.childNodes.length].nodeType}catch(e){L={apply:D.length?function(t,e){z.apply(t,P.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function st(t,e,i,r){var o,s,u,c,h,d,v,I=e&&e.ownerDocument,C=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==C&&9!==C&&11!==C)return i;if(!r&&(f(e),e=e||g,p)){if(11!==C&&(h=$.exec(t)))if(o=h[1]){if(9===C){if(!(u=e.getElementById(o)))return i;if(u.id===o)return i.push(u),i}else if(I&&(u=I.getElementById(o))&&A(e,u)&&u.id===o)return i.push(u),i}else{if(h[2])return L.apply(i,e.getElementsByTagName(t)),i;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return L.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!S[t+" "]&&(!m||!m.test(t))&&(1!==C||"object"!==e.nodeName.toLowerCase())){if(v=t,I=e,1===C&&(F.test(t)||U.test(t))){for((I=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(it,rt):e.setAttribute("id",c=y)),s=(d=a(t)).length;s--;)d[s]=(c?"#"+c:":scope")+" "+At(d[s]);v=d.join(",")}try{return L.apply(i,I.querySelectorAll(v)),i}catch(e){S(t,!0)}finally{c===y&&e.removeAttribute("id")}}}return l(t.replace(W,"$1"),e,i,r)}function lt(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ut(t){return t[y]=!0,t}function ct(t){var e=g.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ft(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function gt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function pt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ut(function(e){return e=+e,ut(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!J.test(e||n&&n.nodeName||"HTML")},f=st.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:C;return a!=g&&9===a.nodeType&&a.documentElement&&(d=(g=a).documentElement,p=!o(g),C!=g&&(r=g.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ot,!1):r.attachEvent&&r.attachEvent("onunload",ot)),n.scope=ct(function(t){return d.appendChild(t).appendChild(g.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),n.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ct(function(t){return t.appendChild(g.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=q.test(g.getElementsByClassName),n.getById=ct(function(t){return d.appendChild(t).id=y,!g.getElementsByName||!g.getElementsByName(y).length}),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&p){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&p){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&p)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=q.test(g.querySelectorAll))&&(ct(function(t){var e;d.appendChild(t).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+Z+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+Z+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+y+"-]").length||m.push("~="),(e=g.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+Z+"*name"+Z+"*="+Z+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+y+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=g.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+Z+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=q.test(I=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ct(function(t){n.disconnectedMatch=I.call(t,"*"),I.call(t,"[s!='']:x"),v.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=q.test(d.compareDocumentPosition),A=e||q.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},k=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==g||t.ownerDocument==C&&A(C,t)?-1:e==g||e.ownerDocument==C&&A(C,e)?1:c?E(c,t)-E(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t==g?-1:e==g?1:r?-1:o?1:c?E(c,t)-E(c,e):0;if(r===o)return ft(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ft(a[i],s[i]):a[i]==C?-1:s[i]==C?1:0}),g},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&p&&!S[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=I.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){S(e,!0)}return 0<st(e,g,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!=g&&f(t),A(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=g&&f(t);var r=i.attrHandle[e.toLowerCase()],o=r&&T.call(i.attrHandle,e.toLowerCase())?r(t,e,!p):void 0;return void 0!==o?o:n.attributes||!p?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(it,rt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,i=[],r=0,o=0;if(h=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(k),h){for(;e=t[o++];)e===t[o]&&(r=i.push(o));for(;r--;)t.splice(i[r],1)}return c=null,t},r=st.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=st.selectors={cacheLength:50,createPseudo:ut,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return H.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&X.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+Z+")"+t+"("+Z+"|$)"))&&x(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=st.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&-1<r.indexOf(n):"$="===e?n&&r.slice(-n.length)===n:"~="===e?-1<(" "+r.replace(_," ")+" ").indexOf(n):"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,f,g,d,p=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),I=!l&&!s,A=!1;if(m){if(o){for(;p;){for(f=e;f=f[p];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=p="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&I){for(A=(g=(u=(c=(h=(f=m)[y]||(f[y]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===b&&u[1])&&u[2],f=g&&m.childNodes[g];f=++g&&f&&f[p]||(A=g=0)||d.pop();)if(1===f.nodeType&&++A&&f===e){c[t]=[b,g,A];break}}else if(I&&(A=g=(u=(c=(h=(f=e)[y]||(f[y]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]||[])[0]===b&&u[1]),!1===A)for(;(f=++g&&f&&f[p]||(A=g=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++A||(I&&((c=(h=f[y]||(f[y]={}))[f.uniqueID]||(h[f.uniqueID]={}))[t]=[b,A]),f!==e)););return(A-=r)===i||A%i==0&&0<=A/i}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[y]?r(e):1<r.length?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,n){for(var i,o=r(t,e),a=o.length;a--;)t[i=E(t,o[a])]=!(n[i]=o[a])}):function(t){return r(t,0,n)}):r}},pseudos:{not:ut(function(t){var e=[],n=[],i=s(t.replace(W,"$1"));return i[y]?ut(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:ut(function(t){return function(e){return 0<st(t,e).length}}),contains:ut(function(t){return t=t.replace(et,nt),function(e){return-1<(e.textContent||r(e)).indexOf(t)}}),lang:ut(function(t){return V.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=p?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===g.activeElement&&(!g.hasFocus||g.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:pt(!1),disabled:pt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt(function(){return[0]}),last:mt(function(t,e){return[e-1]}),eq:mt(function(t,e,n){return[n<0?n+e:n]}),even:mt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:mt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:mt(function(t,e,n){for(var i=n<0?n+e:e<n?e:n;0<=--i;)t.push(i);return t}),gt:mt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=gt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=dt(e);function It(){}function At(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function yt(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=w++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,l){var u,c,h,f=[b,s];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(c=(h=e[y]||(e[y]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((u=c[o])&&u[0]===b&&u[1]===s)return f[2]=u[2];if((c[o]=f)[2]=t(e,n,l))return!0}return!1}}function Ct(t){return 1<t.length?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function bt(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),u&&e.push(s)));return a}function wt(t,e,n,i,r,o){return i&&!i[y]&&(i=wt(i)),r&&!r[y]&&(r=wt(r,o)),ut(function(o,a,s,l){var u,c,h,f=[],g=[],d=a.length,p=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)st(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?p:bt(p,f,t,s,l),v=n?r||(o?t:d||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(u=bt(v,g),i(u,[],s,l),c=u.length;c--;)(h=u[c])&&(v[g[c]]=!(m[g[c]]=h));if(o){if(r||t){if(r){for(u=[],c=v.length;c--;)(h=v[c])&&u.push(m[c]=h);r(null,v=[],u,l)}for(c=v.length;c--;)(h=v[c])&&-1<(u=r?E(o,h):f[c])&&(o[u]=!(a[u]=h))}}else v=bt(v===a?v.splice(d,v.length):v),r?r(null,a,v,l):L.apply(a,v)})}function xt(t){for(var e,n,r,o=t.length,a=i.relative[t[0].type],s=a||i.relative[" "],l=a?1:0,c=yt(function(t){return t===e},s,!0),h=yt(function(t){return-1<E(e,t)},s,!0),f=[function(t,n,i){var r=!a&&(i||n!==u)||((e=n).nodeType?c(t,n,i):h(t,n,i));return e=null,r}];l<o;l++)if(n=i.relative[t[l].type])f=[yt(Ct(f),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[y]){for(r=++l;r<o&&!i.relative[t[r].type];r++);return wt(1<l&&Ct(f),1<l&&At(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(W,"$1"),n,l<r&&xt(t.slice(l,r)),r<o&&xt(t=t.slice(r)),r<o&&At(t))}f.push(n)}return Ct(f)}return It.prototype=i.filters=i.pseudos,i.setFilters=new It,a=st.tokenize=function(t,e){var n,r,o,a,s,l,u,c=N[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=i.preFilter;s;){for(a in n&&!(r=Y.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length)),i.filter)!(r=H[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):N(t,l).slice(0)},s=st.compile=function(t,e){var n,r,o,s,l,c,h=[],d=[],m=M[t+" "];if(!m){for(e||(e=a(t)),n=e.length;n--;)(m=xt(e[n]))[y]?h.push(m):d.push(m);(m=M(t,(r=d,s=0<(o=h).length,l=0<r.length,c=function(t,e,n,a,c){var h,d,m,v=0,I="0",A=t&&[],y=[],C=u,w=t||l&&i.find.TAG("*",c),x=b+=null==C?1:Math.random()||.1,N=w.length;for(c&&(u=e==g||e||c);I!==N&&null!=(h=w[I]);I++){if(l&&h){for(d=0,e||h.ownerDocument==g||(f(h),n=!p);m=r[d++];)if(m(h,e||g,n)){a.push(h);break}c&&(b=x)}s&&((h=!m&&h)&&v--,t&&A.push(h))}if(v+=I,s&&I!==v){for(d=0;m=o[d++];)m(A,y,e,n);if(t){if(0<v)for(;I--;)A[I]||y[I]||(y[I]=j.call(a));y=bt(y)}L.apply(a,y),c&&!t&&0<y.length&&1<v+o.length&&st.uniqueSort(a)}return c&&(b=x,u=C),A},s?ut(c):c))).selector=t}return m},l=st.select=function(t,e,n,r){var o,l,u,c,h,f="function"==typeof t&&t,g=!r&&a(t=f.selector||t);if(n=n||[],1===g.length){if(2<(l=g[0]=g[0].slice(0)).length&&"ID"===(u=l[0]).type&&9===e.nodeType&&p&&i.relative[l[1].type]){if(!(e=(i.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=H.needsContext.test(t)?0:l.length;o--&&(u=l[o],!i.relative[c=u.type]);)if((h=i.find[c])&&(r=h(u.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(o,1),!(t=r.length&&At(l)))return L.apply(n,r),n;break}}return(f||s(t,g))(r,e,!p,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=y.split("").sort(k).join("")===y,n.detectDuplicates=!!h,f(),n.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(g.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ht(O,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),st}(t);C.find=w,C.expr=w.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=w.uniqueSort,C.text=w.getText,C.isXMLDoc=w.isXML,C.contains=w.contains,C.escapeSelector=w.escape;var x=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&C(t).is(n))break;i.push(t)}return i},N=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},M=C.expr.match.needsContext;function S(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(t,e,n){return d(e)?C.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?C.grep(t,function(t){return t===e!==n}):"string"!=typeof e?C.grep(t,function(t){return-1<s.call(e,t)!==n}):C.filter(e,t,n)}C.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?C.find.matchesSelector(i,t)?[i]:[]:C.find.matches(t,C.grep(e,function(t){return 1===t.nodeType}))},C.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(C(t).filter(function(){for(e=0;e<i;e++)if(C.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)C.find(t,r[e],n);return 1<i?C.uniqueSort(n):n},filter:function(t){return this.pushStack(T(this,t||[],!1))},not:function(t){return this.pushStack(T(this,t||[],!0))},is:function(t){return!!T(this,"string"==typeof t&&M.test(t)?C(t):t||[],!1).length}});var D,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||D,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:j.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),k.test(i[1])&&C.isPlainObject(e))for(i in e)d(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=m.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):d(t)?void 0!==n.ready?n.ready(t):t(C):C.makeArray(t,this)}).prototype=C.fn,D=C(m);var z=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function P(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.fn.extend({has:function(t){var e=C(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(C.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&C(t);if(!M.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&C.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?s.call(C(t),this[0]):s.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return x(t,"parentNode")},parentsUntil:function(t,e,n){return x(t,"parentNode",n)},next:function(t){return P(t,"nextSibling")},prev:function(t){return P(t,"previousSibling")},nextAll:function(t){return x(t,"nextSibling")},prevAll:function(t){return x(t,"previousSibling")},nextUntil:function(t,e,n){return x(t,"nextSibling",n)},prevUntil:function(t,e,n){return x(t,"previousSibling",n)},siblings:function(t){return N((t.parentNode||{}).firstChild,t)},children:function(t){return N(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(S(t,"template")&&(t=t.content||t),C.merge([],t.childNodes))}},function(t,e){C.fn[t]=function(n,i){var r=C.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=C.filter(i,r)),1<this.length&&(L[t]||C.uniqueSort(r),z.test(t)&&r.reverse()),this.pushStack(r)}});var E=/[^\x20\t\r\n\f]+/g;function O(t){return t}function Z(t){throw t}function B(t,e,n,i){var r;try{t&&d(r=t.promise)?r.call(t).done(e).fail(n):t&&d(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}C.Callbacks=function(t){var e,n;t="string"==typeof t?(e=t,n={},C.each(e.match(E)||[],function(t,e){n[e]=!0}),n):C.extend({},t);var i,r,o,a,s=[],l=[],u=-1,c=function(){for(a=a||t.once,o=i=!0;l.length;u=-1)for(r=l.shift();++u<s.length;)!1===s[u].apply(r[0],r[1])&&t.stopOnFalse&&(u=s.length,r=!1);t.memory||(r=!1),i=!1,a&&(s=r?[]:"")},h={add:function(){return s&&(r&&!i&&(u=s.length-1,l.push(r)),function e(n){C.each(n,function(n,i){d(i)?t.unique&&h.has(i)||s.push(i):i&&i.length&&"string"!==A(i)&&e(i)})}(arguments),r&&!i&&c()),this},remove:function(){return C.each(arguments,function(t,e){for(var n;-1<(n=C.inArray(e,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(t){return t?-1<C.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=r="",this},disabled:function(){return!s},lock:function(){return a=l=[],r||i||(s=r=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),i||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},C.extend({Deferred:function(e){var n=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return C.Deferred(function(e){C.each(n,function(n,i){var r=d(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&d(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){var o=0;function a(e,n,i,r){return function(){var s=this,l=arguments,u=function(){var t,u;if(!(e<o)){if((t=i.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");u=t&&("object"==typeof t||"function"==typeof t)&&t.then,d(u)?r?u.call(t,a(o,n,O,r),a(o,n,Z,r)):(o++,u.call(t,a(o,n,O,r),a(o,n,Z,r),a(o,n,O,n.notifyWith))):(i!==O&&(s=void 0,l=[t]),(r||n.resolveWith)(s,l))}},c=r?u:function(){try{u()}catch(t){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(t,c.stackTrace),o<=e+1&&(i!==Z&&(s=void 0,l=[t]),n.rejectWith(s,l))}};e?c():(C.Deferred.getStackHook&&(c.stackTrace=C.Deferred.getStackHook()),t.setTimeout(c))}}return C.Deferred(function(t){n[0][3].add(a(0,t,d(r)?r:O,t.notifyWith)),n[1][3].add(a(0,t,d(e)?e:O)),n[2][3].add(a(0,t,d(i)?i:Z))}).promise()},promise:function(t){return null!=t?C.extend(t,r):r}},o={};return C.each(n,function(t,e){var a=e[2],s=e[5];r[e[1]]=a.add,s&&a.add(function(){i=s},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),o=r.call(arguments),a=C.Deferred(),s=function(t){return function(n){i[t]=this,o[t]=1<arguments.length?r.call(arguments):n,--e||a.resolveWith(i,o)}};if(e<=1&&(B(t,a.done(s(n)).resolve,a.reject,!e),"pending"===a.state()||d(o[n]&&o[n].then)))return a.then();for(;n--;)B(o[n],s(n),a.reject);return a.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&G.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},C.readyException=function(e){t.setTimeout(function(){throw e})};var R=C.Deferred();function _(){m.removeEventListener("DOMContentLoaded",_),t.removeEventListener("load",_),C.ready()}C.fn.ready=function(t){return R.then(t).catch(function(t){C.readyException(t)}),this},C.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--C.readyWait:C.isReady)||(C.isReady=!0)!==t&&0<--C.readyWait||R.resolveWith(m,[C])}}),C.ready.then=R.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?t.setTimeout(C.ready):(m.addEventListener("DOMContentLoaded",_),t.addEventListener("load",_));var W=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===A(n))for(s in r=!0,n)W(t,e,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,d(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(C(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},Y=/^-ms-/,U=/-([a-z])/g;function F(t,e){return e.toUpperCase()}function X(t){return t.replace(Y,"ms-").replace(U,F)}var V=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function H(){this.expando=C.expando+H.uid++}H.uid=1,H.prototype={cache:function(t){var e=t[this.expando];return e||(e={},V(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[X(e)]=n;else for(i in e)r[X(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(X):(e=X(e))in i?[e]:e.match(E)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||C.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!C.isEmptyObject(e)}};var J=new H,Q=new H,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/[A-Z]/g;function $(t,e,n){var i,r;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(q,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:K.test(r)?JSON.parse(r):r)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}C.extend({hasData:function(t){return Q.hasData(t)||J.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),C.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=Q.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=X(i.slice(5)),$(o,i,r[i]));J.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Q.set(this,t)}):W(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Q.get(o,t))||void 0!==(n=$(o,t))?n:void 0;this.each(function(){Q.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Q.remove(this,t)})}}),C.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,C.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=C.queue(t,e),i=n.length,r=n.shift(),o=C._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){C.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:C.Callbacks("once memory").add(function(){J.remove(t,[e+"queue",n])})})}}),C.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?C.queue(this[0],t):void 0===e?this:this.each(function(){var n=C.queue(this,t,e);C._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&C.dequeue(this,t)})},dequeue:function(t){return this.each(function(){C.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=C.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=J.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=m.documentElement,rt=function(t){return C.contains(t.ownerDocument,t)},ot={composed:!0};it.getRootNode&&(rt=function(t){return C.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===C.css(t,"display")};function st(t,e,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return C.css(t,e,"")},l=s(),u=n&&n[3]||(C.cssNumber[e]?"":"px"),c=t.nodeType&&(C.cssNumber[e]||"px"!==u&&+l)&&et.exec(C.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)C.style(t,e,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,C.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var lt={};function ut(t,e){for(var n,i,r,o,a,s,l,u=[],c=0,h=t.length;c<h;c++)(i=t[c]).style&&(n=i.style.display,e?("none"===n&&(u[c]=J.get(i,"display")||null,u[c]||(i.style.display="")),""===i.style.display&&at(i)&&(u[c]=(l=a=o=void 0,a=(r=i).ownerDocument,s=r.nodeName,(l=lt[s])||(o=a.body.appendChild(a.createElement(s)),l=C.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),lt[s]=l)))):"none"!==n&&(u[c]="none",J.set(i,"display",n)));for(c=0;c<h;c++)null!=u[c]&&(t[c].style.display=u[c]);return t}C.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?C(this).show():C(this).hide()})}});var ct,ht,ft=/^(?:checkbox|radio)$/i,gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dt=/^$|^module$|\/(?:java|ecma)script/i;ct=m.createDocumentFragment().appendChild(m.createElement("div")),(ht=m.createElement("input")).setAttribute("type","radio"),ht.setAttribute("checked","checked"),ht.setAttribute("name","t"),ct.appendChild(ht),g.checkClone=ct.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ct.cloneNode(!0).lastChild.defaultValue,ct.innerHTML="<option></option>",g.option=!!ct.lastChild;var pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&S(t,e)?C.merge([t],n):n}function vt(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}pt.tbody=pt.tfoot=pt.colgroup=pt.caption=pt.thead,pt.th=pt.td,g.option||(pt.optgroup=pt.option=[1,"<select multiple='multiple'>","</select>"]);var It=/<|&#?\w+;/;function At(t,e,n,i,r){for(var o,a,s,l,u,c,h=e.createDocumentFragment(),f=[],g=0,d=t.length;g<d;g++)if((o=t[g])||0===o)if("object"===A(o))C.merge(f,o.nodeType?[o]:o);else if(It.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(gt.exec(o)||["",""])[1].toLowerCase(),l=pt[s]||pt._default,a.innerHTML=l[1]+C.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;C.merge(f,a.childNodes),(a=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",g=0;o=f[g++];)if(i&&-1<C.inArray(o,i))r&&r.push(o);else if(u=rt(o),a=mt(h.appendChild(o),"script"),u&&vt(a),n)for(c=0;o=a[c++];)dt.test(o.type||"")&&n.push(o);return h}var yt=/^([^.]*)(?:\.(.+)|)/;function Ct(){return!0}function bt(){return!1}function wt(t,e){return t===function(){try{return m.activeElement}catch(t){}}()==("focus"===e)}function xt(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)xt(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=bt;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return C().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),t.each(function(){C.event.add(this,e,r,i,n)})}function Nt(t,e,n){n?(J.set(t,e,!1),C.event.add(t,e,{namespace:!1,handler:function(t){var i,o,a=J.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(C.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=r.call(arguments),J.set(this,e,a),i=n(this,e),this[e](),a!==(o=J.get(this,e))||i?J.set(this,e,!1):o={},a!==o)return t.stopImmediatePropagation(),t.preventDefault(),o&&o.value}else a.length&&(J.set(this,e,{value:C.event.trigger(C.extend(a[0],C.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&C.event.add(t,e,Ct)}C.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,c,h,f,g,d,p,m=J.get(t);if(V(t))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&C.find.matchesSelector(it,r),n.guid||(n.guid=C.guid++),(l=m.events)||(l=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(E)||[""]).length;u--;)g=p=(s=yt.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),g&&(h=C.event.special[g]||{},g=(r?h.delegateType:h.bindType)||g,h=C.event.special[g]||{},c=C.extend({type:g,origType:p,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:d.join(".")},o),(f=l[g])||((f=l[g]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,d,a)||t.addEventListener&&t.addEventListener(g,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),C.event.global[g]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,f,g,d,p,m=J.hasData(t)&&J.get(t);if(m&&(l=m.events)){for(u=(e=(e||"").match(E)||[""]).length;u--;)if(g=p=(s=yt.exec(e[u])||[])[1],d=(s[2]||"").split(".").sort(),g){for(h=C.event.special[g]||{},f=l[g=(i?h.delegateType:h.bindType)||g]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!r&&p!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,d,m.handle)||C.removeEvent(t,g,m.handle),delete l[g])}else for(g in l)C.event.remove(t,g+e[u],n,i,!0);C.isEmptyObject(l)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=new Array(arguments.length),l=C.event.fix(t),u=(J.get(this,"events")||Object.create(null))[l.type]||[],c=C.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=C.event.handlers.call(this,l,u),e=0;(r=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(i=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?-1<C(r,this).index(u):C.find(r,this,null,[u]).length),a[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:d(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[C.expando]?t:new C.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ft.test(e.type)&&e.click&&S(e,"input")&&Nt(e,"click",Ct),!1},trigger:function(t){var e=this||t;return ft.test(e.type)&&e.click&&S(e,"input")&&Nt(e,"click"),!0},_default:function(t){var e=t.target;return ft.test(e.type)&&e.click&&S(e,"input")&&J.get(e,"click")||S(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},C.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ct:bt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:bt,isPropagationStopped:bt,isImmediatePropagationStopped:bt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ct,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ct,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ct,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},function(t,e){C.event.special[t]={setup:function(){return Nt(this,t,wt),!1},trigger:function(){return Nt(this,t),!0},_default:function(){return!0},delegateType:e}}),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){C.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||C.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),C.fn.extend({on:function(t,e,n,i){return xt(this,t,e,n,i)},one:function(t,e,n,i){return xt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,C(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=bt),this.each(function(){C.event.remove(this,t,n,e)})}});var Mt=/<script|<style|<link/i,St=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Tt(t,e){return S(t,"table")&&S(11!==e.nodeType?e:e.firstChild,"tr")&&C(t).children("tbody")[0]||t}function Dt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function jt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function zt(t,e){var n,i,r,o,a,s;if(1===e.nodeType){if(J.hasData(t)&&(s=J.get(t).events))for(r in J.remove(e,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)C.event.add(e,r,s[r][n]);Q.hasData(t)&&(o=Q.access(t),a=C.extend({},o),Q.set(e,a))}}function Lt(t,e,n,i){e=o(e);var r,a,s,l,u,c,h=0,f=t.length,p=f-1,m=e[0],v=d(m);if(v||1<f&&"string"==typeof m&&!g.checkClone&&St.test(m))return t.each(function(r){var o=t.eq(r);v&&(e[0]=m.call(this,r,o.html())),Lt(o,e,n,i)});if(f&&(a=(r=At(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(l=(s=C.map(mt(r,"script"),Dt)).length;h<f;h++)u=r,h!==p&&(u=C.clone(u,!0,!0),l&&C.merge(s,mt(u,"script"))),n.call(t[h],u,h);if(l)for(c=s[s.length-1].ownerDocument,C.map(s,jt),h=0;h<l;h++)u=s[h],dt.test(u.type||"")&&!J.access(u,"globalEval")&&C.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?C._evalUrl&&!u.noModule&&C._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):I(u.textContent.replace(kt,""),u,c))}return t}function Pt(t,e,n){for(var i,r=e?C.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||C.cleanData(mt(i)),i.parentNode&&(n&&rt(i)&&vt(mt(i,"script")),i.parentNode.removeChild(i));return t}C.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,o,a,s,l,u,c=t.cloneNode(!0),h=rt(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(a=mt(c),i=0,r=(o=mt(t)).length;i<r;i++)s=o[i],"input"===(u=(l=a[i]).nodeName.toLowerCase())&&ft.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||mt(t),a=a||mt(c),i=0,r=o.length;i<r;i++)zt(o[i],a[i]);else zt(t,c);return 0<(a=mt(c,"script")).length&&vt(a,!h&&mt(t,"script")),c},cleanData:function(t){for(var e,n,i,r=C.event.special,o=0;void 0!==(n=t[o]);o++)if(V(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)r[i]?C.event.remove(n,i):C.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),C.fn.extend({detach:function(t){return Pt(this,t,!0)},remove:function(t){return Pt(this,t)},text:function(t){return W(this,function(t){return void 0===t?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Lt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Tt(this,t).appendChild(t)})},prepend:function(){return Lt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Tt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(C.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return C.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!pt[(gt.exec(t)||["",""])[1].toLowerCase()]){t=C.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(C.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Lt(this,arguments,function(e){var n=this.parentNode;C.inArray(this,t)<0&&(C.cleanData(mt(this)),n&&n.replaceChild(e,this))},t)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){C.fn[t]=function(t){for(var n,i=[],r=C(t),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),C(r[s])[e](n),a.apply(i,n.get());return this.pushStack(i)}});var Et=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Ot=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Zt=function(t,e,n){var i,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=o[r];return i},Bt=new RegExp(nt.join("|"),"i");function Gt(t,e,n){var i,r,o,a,s=t.style;return(n=n||Ot(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||rt(t)||(a=C.style(t,e)),!g.pixelBoxStyles()&&Et.test(a)&&Bt.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Rt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(u).appendChild(c);var e=t.getComputedStyle(c);i="1%"!==e.top,l=12===n(e.marginLeft),c.style.right="60%",a=36===n(e.right),r=36===n(e.width),c.style.position="absolute",o=12===n(c.offsetWidth/3),it.removeChild(u),c=null}}function n(t){return Math.round(parseFloat(t))}var i,r,o,a,s,l,u=m.createElement("div"),c=m.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,C.extend(g,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,n,i,r;return null==s&&(e=m.createElement("table"),n=m.createElement("tr"),i=m.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",it.appendChild(e).appendChild(n).appendChild(i),r=t.getComputedStyle(n),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,it.removeChild(e)),s}}))}();var _t=["Webkit","Moz","ms"],Wt=m.createElement("div").style,Yt={};function Ut(t){return C.cssProps[t]||Yt[t]||(t in Wt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=_t.length;n--;)if((t=_t[n]+e)in Wt)return t}(t)||t)}var Ft=/^(none|table(?!-c[ea]).+)/,Xt=/^--/,Vt={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Qt(t,e,n,i,r,o){var a="width"===e?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=C.css(t,n+nt[a],!0,r)),i?("content"===n&&(l-=C.css(t,"padding"+nt[a],!0,r)),"margin"!==n&&(l-=C.css(t,"border"+nt[a]+"Width",!0,r))):(l+=C.css(t,"padding"+nt[a],!0,r),"padding"!==n?l+=C.css(t,"border"+nt[a]+"Width",!0,r):s+=C.css(t,"border"+nt[a]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function Kt(t,e,n){var i=Ot(t),r=(!g.boxSizingReliable()||n)&&"border-box"===C.css(t,"boxSizing",!1,i),o=r,a=Gt(t,e,i),s="offset"+e[0].toUpperCase()+e.slice(1);if(Et.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&S(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===C.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===C.css(t,"boxSizing",!1,i),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+Qt(t,e,n||(r?"border":"content"),o,i,a)+"px"}function qt(t,e,n,i,r){return new qt.prototype.init(t,e,n,i,r)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Gt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=X(e),l=Xt.test(e),u=t.style;if(l||(e=Ut(s)),a=C.cssHooks[e]||C.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:u[e];"string"==(o=typeof n)&&(r=et.exec(n))&&r[1]&&(n=st(t,e,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(C.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,o,a,s=X(e);return Xt.test(e)||(e=Ut(s)),(a=C.cssHooks[e]||C.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=Gt(t,e,i)),"normal"===r&&e in Ht&&(r=Ht[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),C.each(["height","width"],function(t,e){C.cssHooks[e]={get:function(t,n,i){if(n)return!Ft.test(C.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Kt(t,e,i):Zt(t,Vt,function(){return Kt(t,e,i)})},set:function(t,n,i){var r,o=Ot(t),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||i)&&"border-box"===C.css(t,"boxSizing",!1,o),l=i?Qt(t,e,i,s,o):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Qt(t,e,"border",!1,o)-.5)),l&&(r=et.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=C.css(t,e)),Jt(0,n,l)}}}),C.cssHooks.marginLeft=Rt(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Gt(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(t,e){C.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+nt[i]+e]=o[i]||o[i-2]||o[0];return r}},"margin"!==t&&(C.cssHooks[t+e].set=Jt)}),C.fn.extend({css:function(t,e){return W(this,function(t,e,n){var i,r,o={},a=0;if(Array.isArray(e)){for(i=Ot(t),r=e.length;a<r;a++)o[e[a]]=C.css(t,e[a],!1,i);return o}return void 0!==n?C.style(t,e,n):C.css(t,e)},t,e,1<arguments.length)}}),((C.Tween=qt).prototype={constructor:qt,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||C.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var t=qt.propHooks[this.prop];return t&&t.get?t.get(this):qt.propHooks._default.get(this)},run:function(t){var e,n=qt.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):qt.propHooks._default.set(this),this}}).init.prototype=qt.prototype,(qt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):1!==t.elem.nodeType||!C.cssHooks[t.prop]&&null==t.elem.style[Ut(t.prop)]?t.elem[t.prop]=t.now:C.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=qt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},C.fx=qt.prototype.init,C.fx.step={};var $t,te,ee,ne,ie=/^(?:toggle|show|hide)$/,re=/queueHooks$/;function oe(){te&&(!1===m.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(oe):t.setTimeout(oe,C.fx.interval),C.fx.tick())}function ae(){return t.setTimeout(function(){$t=void 0}),$t=Date.now()}function se(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=nt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function le(t,e,n){for(var i,r=(ue.tweeners[e]||[]).concat(ue.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function ue(t,e,n){var i,r,o=0,a=ue.prefilters.length,s=C.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=$t||ae(),n=Math.max(0,u.startTime+u.duration-e),i=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(i);return s.notifyWith(t,[u,i,n]),i<1&&a?n:(a||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:e,originalOptions:n,startTime:$t||ae(),duration:n.duration,tweens:[],createTween:function(e,n){var i=C.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(function(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=X(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=C.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(c,u.opts.specialEasing);o<a;o++)if(i=ue.prefilters[o].call(u,t,c,u.opts))return d(i.stop)&&(C._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return C.map(c,le,u),d(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),C.fx.timer(C.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}C.Animation=C.extend(ue,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){d(t)?(e=t,t=["*"]):t=t.match(E);for(var n,i=0,r=t.length;i<r;i++)n=t[i],ue.tweeners[n]=ue.tweeners[n]||[],ue.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,a,s,l,u,c,h="width"in e||"height"in e,f=this,g={},d=t.style,p=t.nodeType&&at(t),m=J.get(t,"fxshow");for(i in n.queue||(null==(a=C._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,C.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],ie.test(r)){if(delete e[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}g[i]=m&&m[i]||C.style(t,i)}if((l=!C.isEmptyObject(e))||!C.isEmptyObject(g))for(i in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(u=m&&m.display)&&(u=J.get(t,"display")),"none"===(c=C.css(t,"display"))&&(u?c=u:(ut([t],!0),u=t.style.display||u,c=C.css(t,"display"),ut([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===C.css(t,"float")&&(l||(f.done(function(){d.display=u}),null==u&&(c=d.display,u="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),l=!1,g)l||(m?"hidden"in m&&(p=m.hidden):m=J.access(t,"fxshow",{display:u}),o&&(m.hidden=!p),p&&ut([t],!0),f.done(function(){for(i in p||ut([t]),J.remove(t,"fxshow"),g)C.style(t,i,g[i])})),l=le(p?m[i]:0,i,f),i in m||(m[i]=l.start,p&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ue.prefilters.unshift(t):ue.prefilters.push(t)}}),C.speed=function(t,e,n){var i=t&&"object"==typeof t?C.extend({},t):{complete:n||!n&&e||d(t)&&t,duration:t,easing:n&&e||e&&!d(e)&&e};return C.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in C.fx.speeds?i.duration=C.fx.speeds[i.duration]:i.duration=C.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){d(i.old)&&i.old.call(this),i.queue&&C.dequeue(this,i.queue)},i},C.fn.extend({fadeTo:function(t,e,n,i){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=C.isEmptyObject(t),o=C.speed(e,n,i),a=function(){var e=ue(this,C.extend({},t),o);(r||J.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=C.timers,a=J.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&re.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||C.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=J.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=C.timers,a=i?i.length:0;for(n.finish=!0,C.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),C.each(["toggle","show","hide"],function(t,e){var n=C.fn[e];C.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(se(e,!0),t,i,r)}}),C.each({slideDown:se("show"),slideUp:se("hide"),slideToggle:se("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){C.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),C.timers=[],C.fx.tick=function(){var t,e=0,n=C.timers;for($t=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||C.fx.stop(),$t=void 0},C.fx.timer=function(t){C.timers.push(t),C.fx.start()},C.fx.interval=13,C.fx.start=function(){te||(te=!0,oe())},C.fx.stop=function(){te=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,n){return e=C.fx&&C.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},ee=m.createElement("input"),ne=m.createElement("select").appendChild(m.createElement("option")),ee.type="checkbox",g.checkOn=""!==ee.value,g.optSelected=ne.selected,(ee=m.createElement("input")).value="t",ee.type="radio",g.radioValue="t"===ee.value;var ce,he=C.expr.attrHandle;C.fn.extend({attr:function(t,e){return W(this,C.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){C.removeAttr(this,t)})}}),C.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?C.prop(t,e,n):(1===o&&C.isXMLDoc(t)||(r=C.attrHooks[e.toLowerCase()]||(C.expr.match.bool.test(e)?ce:void 0)),void 0!==n?null===n?void C.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=C.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&S(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(E);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ce={set:function(t,e,n){return!1===e?C.removeAttr(t,n):t.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),function(t,e){var n=he[e]||C.find.attr;he[e]=function(t,e,i){var r,o,a=e.toLowerCase();return i||(o=he[a],he[a]=r,r=null!=n(t,e,i)?a:null,he[a]=o),r}});var fe=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;function de(t){return(t.match(E)||[]).join(" ")}function pe(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(E)||[]}C.fn.extend({prop:function(t,e){return W(this,C.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[C.propFix[t]||t]})}}),C.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(t)||(e=C.propFix[e]||e,r=C.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):fe.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,l=0;if(d(t))return this.each(function(e){C(this).addClass(t.call(this,e,pe(this)))});if((e=me(t)).length)for(;n=this[l++];)if(r=pe(n),i=1===n.nodeType&&" "+de(r)+" "){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=de(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,l=0;if(d(t))return this.each(function(e){C(this).removeClass(t.call(this,e,pe(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;n=this[l++];)if(r=pe(n),i=1===n.nodeType&&" "+de(r)+" "){for(a=0;o=e[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=de(i))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):d(t)?this.each(function(n){C(this).toggleClass(t.call(this,n,pe(this),e),e)}):this.each(function(){var e,r,o,a;if(i)for(r=0,o=C(this),a=me(t);e=a[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=pe(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+de(pe(n))+" ").indexOf(e))return!0;return!1}});var ve=/\r/g;C.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=d(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,C(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=C.map(r,function(t){return null==t?"":t+""})),(e=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=C.valHooks[r.type]||C.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(ve,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:de(C.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(e=C(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=C.makeArray(e),a=r.length;a--;)((i=r[a]).selected=-1<C.inArray(C.valHooks.option.get(i),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<C.inArray(C(t).val(),e)}},g.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in t;var Ie=/^(?:focusinfocus|focusoutblur)$/,Ae=function(t){t.stopPropagation()};C.extend(C.event,{trigger:function(e,n,i,r){var o,a,s,l,u,h,f,g,v=[i||m],I=c.call(e,"type")?e.type:e,A=c.call(e,"namespace")?e.namespace.split("."):[];if(a=g=s=i=i||m,3!==i.nodeType&&8!==i.nodeType&&!Ie.test(I+C.event.triggered)&&(-1<I.indexOf(".")&&(I=(A=I.split(".")).shift(),A.sort()),u=I.indexOf(":")<0&&"on"+I,(e=e[C.expando]?e:new C.Event(I,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=A.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+A.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:C.makeArray(n,[e]),f=C.event.special[I]||{},r||!f.trigger||!1!==f.trigger.apply(i,n))){if(!r&&!f.noBubble&&!p(i)){for(l=f.delegateType||I,Ie.test(l+I)||(a=a.parentNode);a;a=a.parentNode)v.push(a),s=a;s===(i.ownerDocument||m)&&v.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=v[o++])&&!e.isPropagationStopped();)g=a,e.type=1<o?l:f.bindType||I,(h=(J.get(a,"events")||Object.create(null))[e.type]&&J.get(a,"handle"))&&h.apply(a,n),(h=u&&a[u])&&h.apply&&V(a)&&(e.result=h.apply(a,n),!1===e.result&&e.preventDefault());return e.type=I,r||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(v.pop(),n)||!V(i)||u&&d(i[I])&&!p(i)&&((s=i[u])&&(i[u]=null),C.event.triggered=I,e.isPropagationStopped()&&g.addEventListener(I,Ae),i[I](),e.isPropagationStopped()&&g.removeEventListener(I,Ae),C.event.triggered=void 0,s&&(i[u]=s)),e.result}},simulate:function(t,e,n){var i=C.extend(new C.Event,n,{type:t,isSimulated:!0});C.event.trigger(i,null,e)}}),C.fn.extend({trigger:function(t,e){return this.each(function(){C.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return C.event.trigger(t,e,n,!0)}}),g.focusin||C.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){C.event.simulate(e,t.target,C.event.fix(t))};C.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e);r||i.addEventListener(t,n,!0),J.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e)-1;r?J.access(i,e,r):(i.removeEventListener(t,n,!0),J.remove(i,e))}}});var ye=t.location,Ce={guid:Date.now()},be=/\?/;C.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){}return i=n&&n.getElementsByTagName("parsererror")[0],n&&!i||C.error("Invalid XML: "+(i?C.map(i.childNodes,function(t){return t.textContent}).join("\n"):e)),n};var we=/\[\]$/,xe=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;function Se(t,e,n,i){var r;if(Array.isArray(e))C.each(e,function(e,r){n||we.test(t)?i(t,r):Se(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==A(e))i(t,e);else for(r in e)Se(t+"["+r+"]",e[r],n,i)}C.param=function(t,e){var n,i=[],r=function(t,e){var n=d(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,function(){r(this.name,this.value)});else for(n in t)Se(n,t[n],e,r);return i.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&Me.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!ft.test(t))}).map(function(t,e){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,function(t){return{name:e.name,value:t.replace(xe,"\r\n")}}):{name:e.name,value:n.replace(xe,"\r\n")}}).get()}});var ke=/%20/g,Te=/#.*$/,De=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,ze=/^(?:GET|HEAD)$/,Le=/^\/\//,Pe={},Ee={},Oe="*/".concat("*"),Ze=m.createElement("a");function Be(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(E)||[];if(d(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ge(t,e,n,i){var r={},o=t===Ee;function a(s){var l;return r[s]=!0,C.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||o||r[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),a(u),!1)}),l}return a(e.dataTypes[0])||!r["*"]&&a("*")}function Re(t,e){var n,i,r=C.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&C.extend(!0,t,i),t}Ze.href=ye.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ye.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ye.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Re(Re(t,C.ajaxSettings),e):Re(C.ajaxSettings,t)},ajaxPrefilter:Be(Pe),ajaxTransport:Be(Ee),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,r,o,a,s,l,u,c,h,f,g=C.ajaxSetup({},n),d=g.context||g,p=g.context&&(d.nodeType||d.jquery)?C(d):C.event,v=C.Deferred(),I=C.Callbacks("once memory"),A=g.statusCode||{},y={},b={},w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=je.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,y[t]=e),this},overrideMimeType:function(t){return null==u&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)x.always(t[x.status]);else for(e in t)A[e]=[A[e],t[e]];return this},abort:function(t){var e=t||w;return i&&i.abort(e),N(0,e),this}};if(v.promise(x),g.url=((e||g.url||ye.href)+"").replace(Le,ye.protocol+"//"),g.type=n.method||n.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(E)||[""],null==g.crossDomain){l=m.createElement("a");try{l.href=g.url,l.href=l.href,g.crossDomain=Ze.protocol+"//"+Ze.host!=l.protocol+"//"+l.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=C.param(g.data,g.traditional)),Ge(Pe,g,n,x),u)return x;for(h in(c=C.event&&g.global)&&0==C.active++&&C.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!ze.test(g.type),r=g.url.replace(Te,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(ke,"+")):(f=g.url.slice(r.length),g.data&&(g.processData||"string"==typeof g.data)&&(r+=(be.test(r)?"&":"?")+g.data,delete g.data),!1===g.cache&&(r=r.replace(De,"$1"),f=(be.test(r)?"&":"?")+"_="+Ce.guid+++f),g.url=r+f),g.ifModified&&(C.lastModified[r]&&x.setRequestHeader("If-Modified-Since",C.lastModified[r]),C.etag[r]&&x.setRequestHeader("If-None-Match",C.etag[r])),(g.data&&g.hasContent&&!1!==g.contentType||n.contentType)&&x.setRequestHeader("Content-Type",g.contentType),x.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Oe+"; q=0.01":""):g.accepts["*"]),g.headers)x.setRequestHeader(h,g.headers[h]);if(g.beforeSend&&(!1===g.beforeSend.call(d,x,g)||u))return x.abort();if(w="abort",I.add(g.complete),x.done(g.success),x.fail(g.error),i=Ge(Ee,g,n,x)){if(x.readyState=1,c&&p.trigger("ajaxSend",[x,g]),u)return x;g.async&&0<g.timeout&&(s=t.setTimeout(function(){x.abort("timeout")},g.timeout));try{u=!1,i.send(y,N)}catch(e){if(u)throw e;N(-1,e)}}else N(-1,"No Transport");function N(e,n,a,l){var h,f,m,y,b,w=n;u||(u=!0,s&&t.clearTimeout(s),i=void 0,o=l||"",x.readyState=0<e?4:0,h=200<=e&&e<300||304===e,a&&(y=function(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(g,x,a)),!h&&-1<C.inArray("script",g.dataTypes)&&C.inArray("json",g.dataTypes)<0&&(g.converters["text script"]=function(){}),y=function(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(g,y,x,h),h?(g.ifModified&&((b=x.getResponseHeader("Last-Modified"))&&(C.lastModified[r]=b),(b=x.getResponseHeader("etag"))&&(C.etag[r]=b)),204===e||"HEAD"===g.type?w="nocontent":304===e?w="notmodified":(w=y.state,f=y.data,h=!(m=y.error))):(m=w,!e&&w||(w="error",e<0&&(e=0))),x.status=e,x.statusText=(n||w)+"",h?v.resolveWith(d,[f,w,x]):v.rejectWith(d,[x,w,m]),x.statusCode(A),A=void 0,c&&p.trigger(h?"ajaxSuccess":"ajaxError",[x,g,h?f:m]),I.fireWith(d,[x,w]),c&&(p.trigger("ajaxComplete",[x,g]),--C.active||C.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return C.get(t,e,n,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],function(t,e){C[e]=function(t,n,i,r){return d(n)&&(r=r||i,i=n,n=void 0),C.ajax(C.extend({url:t,type:e,dataType:r,data:n,success:i},C.isPlainObject(t)&&t))}}),C.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),C._evalUrl=function(t,e,n){return C.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){C.globalEval(t,e,n)}})},C.fn.extend({wrapAll:function(t){var e;return this[0]&&(d(t)&&(t=t.call(this[0])),e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return d(t)?this.each(function(e){C(this).wrapInner(t.call(this,e))}):this.each(function(){var e=C(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=d(t);return this.each(function(n){C(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(t){return!C.expr.pseudos.visible(t)},C.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var _e={0:200,1223:204},We=C.ajaxSettings.xhr();g.cors=!!We&&"withCredentials"in We,g.ajax=We=!!We,C.ajaxTransport(function(e){var n,i;if(g.cors||We&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);n=function(t){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(_e[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(r){if(n)throw r}},abort:function(){n&&n()}}}),C.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),C.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=C("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),m.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ye,Ue=[],Fe=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ue.pop()||C.expando+"_"+Ce.guid++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=!1!==e.jsonp&&(Fe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fe.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=d(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Fe,"$1"+r):!1!==e.jsonp&&(e.url+=(be.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||C.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){void 0===o?C(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Ue.push(r)),a&&d(o)&&o(a[0]),a=o=void 0}),"script"}),g.createHTMLDocument=((Ye=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ye.childNodes.length),C.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((i=(e=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,e.head.appendChild(i)):e=m),o=!n&&[],(r=k.exec(t))?[e.createElement(r[1])]:(r=At([t],e,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var i,r,o},C.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return-1<s&&(i=de(t.slice(s)),t=t.slice(0,s)),d(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&C.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?C("<div>").append(C.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},C.expr.pseudos.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u=C.css(t,"position"),c=C(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=C.css(t,"top"),l=C.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(a=(i=c.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),d(e)&&(e=e.call(t,n,C.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+r),"using"in e?e.using.call(t,h):c.css(h)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===C.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===C.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=C(t).offset()).top+=C.css(t,"borderTopWidth",!0),r.left+=C.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-C.css(i,"marginTop",!0),left:e.left-r.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===C.css(t,"position");)t=t.offsetParent;return t||it})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;C.fn[t]=function(i){return W(this,function(t,i,r){var o;if(p(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r},t,i,arguments.length)}}),C.each(["top","left"],function(t,e){C.cssHooks[e]=Rt(g.pixelPosition,function(t,n){if(n)return n=Gt(t,e),Et.test(n)?C(t).position()[e]+"px":n})}),C.each({Height:"height",Width:"width"},function(t,e){C.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){C.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return W(this,function(e,n,r){var o;return p(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?C.css(e,n,s):C.style(e,n,r,s)},e,a?r:void 0,a)}})}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){C.fn[e]=function(t){return this.on(e,t)}}),C.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){C.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}});var Xe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.proxy=function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),d(t))return i=r.call(arguments,2),(o=function(){return t.apply(e||this,i.concat(r.call(arguments)))}).guid=t.guid=t.guid||C.guid++,o},C.holdReady=function(t){t?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=S,C.isFunction=d,C.isWindow=p,C.camelCase=X,C.type=A,C.now=Date.now,C.isNumeric=function(t){var e=C.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},C.trim=function(t){return null==t?"":(t+"").replace(Xe,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Ve=t.jQuery,He=t.$;return C.noConflict=function(e){return t.$===C&&(t.$=He),e&&t.jQuery===C&&(t.jQuery=Ve),C},void 0===e&&(t.jQuery=t.$=C),C}),
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
function(){function t(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function e(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function n(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function i(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function r(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function o(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function a(t,e){return!(null==t||!t.length)&&m(t,e,0)>-1}function s(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function l(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function u(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function c(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function h(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function f(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function g(t){return t.match(Qt)||[]}function d(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function p(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function m(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):p(t,I,n)}function v(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function I(t){return t!=t}function A(t,e){var n=null==t?0:t.length;return n?w(t,e)/n:tt}function y(t){return function(e){return null==e?Y:e[t]}}function C(t){return function(e){return null==t?Y:t[e]}}function b(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function w(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==Y&&(n=n===Y?o:n+o)}return n}function x(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function N(t){return t?t.slice(0,_(t)+1).replace(Ft,""):t}function M(t){return function(e){return t(e)}}function S(t,e){return l(e,function(e){return t[e]})}function k(t,e){return t.has(e)}function T(t,e){for(var n=-1,i=t.length;++n<i&&m(e,t[n],0)>-1;);return n}function D(t,e){for(var n=t.length;n--&&m(e,t[n],0)>-1;);return n}function j(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function z(t){return"\\"+Je[t]}function L(t){return Ye.test(t)}function P(t){return Ue.test(t)}function E(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function O(t,e){return function(n){return t(e(n))}}function Z(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==X||(t[n]=X,o[r++]=n)}return o}function B(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function G(t){return L(t)?function(t){for(var e=_e.lastIndex=0;_e.test(t);)++e;return e}(t):gn(t)}function R(t){return L(t)?function(t){return t.match(_e)||[]}(t):function(t){return t.split("")}(t)}function _(t){for(var e=t.length;e--&&Xt.test(t.charAt(e)););return e}function W(t){return t.match(We)||[]}var Y,U="Expected a function",F="__lodash_hash_undefined__",X="__lodash_placeholder__",V=16,H=32,J=64,Q=128,K=256,q=1/0,$=9007199254740991,tt=NaN,et=4294967295,nt=[["ary",Q],["bind",1],["bindKey",2],["curry",8],["curryRight",V],["flip",512],["partial",H],["partialRight",J],["rearg",K]],it="[object Arguments]",rt="[object Array]",ot="[object Boolean]",at="[object Date]",st="[object Error]",lt="[object Function]",ut="[object GeneratorFunction]",ct="[object Map]",ht="[object Number]",ft="[object Object]",gt="[object Promise]",dt="[object RegExp]",pt="[object Set]",mt="[object String]",vt="[object Symbol]",It="[object WeakMap]",At="[object ArrayBuffer]",yt="[object DataView]",Ct="[object Float32Array]",bt="[object Float64Array]",wt="[object Int8Array]",xt="[object Int16Array]",Nt="[object Int32Array]",Mt="[object Uint8Array]",St="[object Uint8ClampedArray]",kt="[object Uint16Array]",Tt="[object Uint32Array]",Dt=/\b__p \+= '';/g,jt=/\b(__p \+=) '' \+/g,zt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Lt=/&(?:amp|lt|gt|quot|#39);/g,Pt=/[&<>"']/g,Et=RegExp(Lt.source),Ot=RegExp(Pt.source),Zt=/<%-([\s\S]+?)%>/g,Bt=/<%([\s\S]+?)%>/g,Gt=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_t=/^\w*$/,Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yt=/[\\^$.*+?()[\]{}|]/g,Ut=RegExp(Yt.source),Ft=/^\s+/,Xt=/\s/,Vt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Jt=/,? & /,Qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Kt=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,$t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ee=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,ie=/^\[object .+?Constructor\]$/,re=/^0o[0-7]+$/i,oe=/^(?:0|[1-9]\d*)$/,ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,se=/($^)/,le=/['\n\r\u2028\u2029\\]/g,ue="\\ud800-\\udfff",ce="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",he="\\u2700-\\u27bf",fe="a-z\\xdf-\\xf6\\xf8-\\xff",ge="A-Z\\xc0-\\xd6\\xd8-\\xde",de="\\ufe0e\\ufe0f",pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",me="['\u2019]",ve="["+ue+"]",Ie="["+pe+"]",Ae="["+ce+"]",ye="\\d+",Ce="["+he+"]",be="["+fe+"]",we="[^"+ue+pe+ye+he+fe+ge+"]",xe="\\ud83c[\\udffb-\\udfff]",Ne="[^"+ue+"]",Me="(?:\\ud83c[\\udde6-\\uddff]){2}",Se="[\\ud800-\\udbff][\\udc00-\\udfff]",ke="["+ge+"]",Te="\\u200d",De="(?:"+be+"|"+we+")",je="(?:"+ke+"|"+we+")",ze="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Le="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Pe="(?:"+Ae+"|"+xe+")"+"?",Ee="["+de+"]?",Oe=Ee+Pe+("(?:\\u200d(?:"+[Ne,Me,Se].join("|")+")"+Ee+Pe+")*"),Ze="(?:"+[Ce,Me,Se].join("|")+")"+Oe,Be="(?:"+[Ne+Ae+"?",Ae,Me,Se,ve].join("|")+")",Ge=RegExp(me,"g"),Re=RegExp(Ae,"g"),_e=RegExp(xe+"(?="+xe+")|"+Be+Oe,"g"),We=RegExp([ke+"?"+be+"+"+ze+"(?="+[Ie,ke,"$"].join("|")+")",je+"+"+Le+"(?="+[Ie,ke+De,"$"].join("|")+")",ke+"?"+De+"+"+ze,ke+"+"+Le,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ye,Ze].join("|"),"g"),Ye=RegExp("["+Te+ue+ce+de+"]"),Ue=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xe=-1,Ve={};Ve[Ct]=Ve[bt]=Ve[wt]=Ve[xt]=Ve[Nt]=Ve[Mt]=Ve[St]=Ve[kt]=Ve[Tt]=!0,Ve[it]=Ve[rt]=Ve[At]=Ve[ot]=Ve[yt]=Ve[at]=Ve[st]=Ve[lt]=Ve[ct]=Ve[ht]=Ve[ft]=Ve[dt]=Ve[pt]=Ve[mt]=Ve[It]=!1;var He={};He[it]=He[rt]=He[At]=He[yt]=He[ot]=He[at]=He[Ct]=He[bt]=He[wt]=He[xt]=He[Nt]=He[ct]=He[ht]=He[ft]=He[dt]=He[pt]=He[mt]=He[vt]=He[Mt]=He[St]=He[kt]=He[Tt]=!0,He[st]=He[lt]=He[It]=!1;var Je={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qe=parseFloat,Ke=parseInt,qe="object"==typeof global&&global&&global.Object===Object&&global,$e="object"==typeof self&&self&&self.Object===Object&&self,tn=qe||$e||Function("return this")(),en="object"==typeof exports&&exports&&!exports.nodeType&&exports,nn=en&&"object"==typeof module&&module&&!module.nodeType&&module,rn=nn&&nn.exports===en,on=rn&&qe.process,an=function(){try{var t=nn&&nn.require&&nn.require("util").types;return t||on&&on.binding&&on.binding("util")}catch(t){}}(),sn=an&&an.isArrayBuffer,ln=an&&an.isDate,un=an&&an.isMap,cn=an&&an.isRegExp,hn=an&&an.isSet,fn=an&&an.isTypedArray,gn=y("length"),dn=C({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),pn=C({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),mn=C({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),vn=function C(Xt){function Qt(t){if(Rr(t)&&!Ds(t)&&!(t instanceof he)){if(t instanceof ce)return t;if(Do.call(t,"__wrapped__"))return fr(t)}return new ce(t)}function ue(){}function ce(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Y}function he(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=et,this.__views__=[]}function fe(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function ge(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function de(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function pe(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new de;++e<n;)this.add(t[e])}function me(t){this.size=(this.__data__=new ge(t)).size}function ve(t,e){var n=Ds(t),i=!n&&Ts(t),r=!n&&!i&&zs(t),o=!n&&!i&&!r&&Zs(t),a=n||i||r||o,s=a?x(t.length,wo):[],l=s.length;for(var u in t)!e&&!Do.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ji(u,l))||s.push(u);return s}function Ie(t){var e=t.length;return e?t[zn(0,e-1)]:Y}function Ae(t,e){return lr(ui(t),ke(e,0,t.length))}function ye(t){return lr(ui(t))}function Ce(t,e,n){(n===Y||zr(t[e],n))&&(n!==Y||e in t)||Me(t,e,n)}function be(t,e,n){var i=t[e];Do.call(t,e)&&zr(i,n)&&(n!==Y||e in t)||Me(t,e,n)}function we(t,e){for(var n=t.length;n--;)if(zr(t[n][0],e))return n;return-1}function xe(t,e,n,i){return ka(t,function(t,r,o){e(i,t,n(t),o)}),i}function Ne(t,e){return t&&ci(e,to(e),t)}function Me(t,e,n){"__proto__"==e&&Ho?Ho(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Se(t,e){for(var n=-1,i=e.length,r=mo(i),o=null==t;++n<i;)r[n]=o?Y:qr(t,e[n]);return r}function ke(t,e,n){return t==t&&(n!==Y&&(t=t<=n?t:n),e!==Y&&(t=t>=e?t:e)),t}function Te(t,e,i,r,o,a){var s,l=1&e,u=2&e,c=4&e;if(i&&(s=o?i(t,r,o,a):i(t)),s!==Y)return s;if(!Gr(t))return t;var h=Ds(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Do.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return ui(t,s)}else{var f=Ra(t),g=f==lt||f==ut;if(zs(t))return ii(t,l);if(f==ft||f==it||g&&!o){if(s=u||g?{}:Vi(t),!l)return u?function(t,e){return ci(t,Ga(t),e)}(t,function(t,e){return t&&ci(e,eo(e),t)}(s,t)):function(t,e){return ci(t,Ba(t),e)}(t,Ne(s,t))}else{if(!He[f])return o?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case At:return ri(t);case ot:case at:return new i(+t);case yt:return function(t,e){return new t.constructor(e?ri(t.buffer):t.buffer,t.byteOffset,t.byteLength)}(t,n);case Ct:case bt:case wt:case xt:case Nt:case Mt:case St:case kt:case Tt:return oi(t,n);case ct:return new i;case ht:case mt:return new i(t);case dt:return function(t){var e=new t.constructor(t.source,te.exec(t));return e.lastIndex=t.lastIndex,e}(t);case pt:return new i;case vt:return function(t){return Na?Co(Na.call(t)):{}}(t)}}(t,f,l)}}a||(a=new me);var d=a.get(t);if(d)return d;a.set(t,s),Os(t)?t.forEach(function(n){s.add(Te(n,e,i,n,t,a))}):Ps(t)&&t.forEach(function(n,r){s.set(r,Te(n,e,i,r,t,a))});var p=h?Y:(c?u?Gi:Bi:u?eo:to)(t);return n(p||t,function(n,r){p&&(n=t[r=n]),be(s,r,Te(n,e,i,r,t,a))}),s}function De(t,e,n){var i=n.length;if(null==t)return!i;for(t=Co(t);i--;){var r=n[i],o=e[r],a=t[r];if(a===Y&&!(r in t)||!o(a))return!1}return!0}function je(t,e,n){if("function"!=typeof t)throw new xo(U);return Ya(function(){t.apply(Y,n)},e)}function ze(t,e,n,i){var r=-1,o=a,u=!0,c=t.length,h=[],f=e.length;if(!c)return h;n&&(e=l(e,M(n))),i?(o=s,u=!1):e.length>=200&&(o=k,u=!1,e=new pe(e));t:for(;++r<c;){var g=t[r],d=null==n?g:n(g);if(g=i||0!==g?g:0,u&&d==d){for(var p=f;p--;)if(e[p]===d)continue t;h.push(g)}else o(e,d,i)||h.push(g)}return h}function Le(t,e){var n=!0;return ka(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Pe(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],a=e(o);if(null!=a&&(s===Y?a==a&&!Ur(a):n(a,s)))var s=a,l=o}return l}function Ee(t,e){var n=[];return ka(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Oe(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=Hi),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Oe(s,e-1,n,i,r):u(r,s):i||(r[r.length]=s)}return r}function Ze(t,e){return t&&Da(t,e,to)}function Be(t,e){return t&&ja(t,e,to)}function _e(t,e){return o(e,function(e){return Or(t[e])})}function We(t,e){for(var n=0,i=(e=ei(e,t)).length;null!=t&&n<i;)t=t[ur(e[n++])];return n&&n==i?t:Y}function Ye(t,e,n){var i=e(t);return Ds(t)?i:u(i,n(t))}function Ue(t){return null==t?t===Y?"[object Undefined]":"[object Null]":Vo&&Vo in Co(t)?function(t){var e=Do.call(t,Vo),n=t[Vo];try{t[Vo]=Y;var i=!0}catch(t){}var r=Lo.call(t);return i&&(e?t[Vo]=n:delete t[Vo]),r}(t):function(t){return Lo.call(t)}(t)}function Je(t,e){return t>e}function qe(t,e){return null!=t&&Do.call(t,e)}function $e(t,e){return null!=t&&e in Co(t)}function en(t,e,n){for(var i=n?s:a,r=t[0].length,o=t.length,u=o,c=mo(o),h=1/0,f=[];u--;){var g=t[u];u&&e&&(g=l(g,M(e))),h=aa(g.length,h),c[u]=!n&&(e||r>=120&&g.length>=120)?new pe(u&&g):Y}g=t[0];var d=-1,p=c[0];t:for(;++d<r&&f.length<h;){var m=g[d],v=e?e(m):m;if(m=n||0!==m?m:0,!(p?k(p,v):i(f,v,n))){for(u=o;--u;){var I=c[u];if(!(I?k(I,v):i(t[u],v,n)))continue t}p&&p.push(v),f.push(m)}}return f}function nn(e,n,i){var r=null==(e=ir(e,n=ei(n,e)))?e:e[ur(vr(n))];return null==r?Y:t(r,e,i)}function on(t){return Rr(t)&&Ue(t)==it}function an(t,e,n,i,r){return t===e||(null==t||null==e||!Rr(t)&&!Rr(e)?t!=t&&e!=e:function(t,e,n,i,r,o){var a=Ds(t),s=Ds(e),l=a?rt:Ra(t),u=s?rt:Ra(e),c=(l=l==it?ft:l)==ft,h=(u=u==it?ft:u)==ft,f=l==u;if(f&&zs(t)){if(!zs(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new me),a||Zs(t)?Oi(t,e,n,i,r,o):function(t,e,n,i,r,o,a){switch(n){case yt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case At:return!(t.byteLength!=e.byteLength||!o(new Go(t),new Go(e)));case ot:case at:case ht:return zr(+t,+e);case st:return t.name==e.name&&t.message==e.message;case dt:case mt:return t==e+"";case ct:var s=E;case pt:var l=1&i;if(s||(s=B),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;i|=2,a.set(t,e);var c=Oi(s(t),s(e),i,r,o,a);return a.delete(t),c;case vt:if(Na)return Na.call(t)==Na.call(e)}return!1}(t,e,l,n,i,r,o);if(!(1&n)){var g=c&&Do.call(t,"__wrapped__"),d=h&&Do.call(e,"__wrapped__");if(g||d){var p=g?t.value():t,m=d?e.value():e;return o||(o=new me),r(p,m,n,i,o)}}return!!f&&(o||(o=new me),function(t,e,n,i,r,o){var a=1&n,s=Bi(t),l=s.length;if(l!=Bi(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:Do.call(e,c)))return!1}var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;var g=!0;o.set(t,e),o.set(e,t);for(var d=a;++u<l;){var p=t[c=s[u]],m=e[c];if(i)var v=a?i(m,p,c,e,t,o):i(p,m,c,t,e,o);if(!(v===Y?p===m||r(p,m,n,i,o):v)){g=!1;break}d||(d="constructor"==c)}if(g&&!d){var I=t.constructor,A=e.constructor;I!=A&&"constructor"in t&&"constructor"in e&&!("function"==typeof I&&I instanceof I&&"function"==typeof A&&A instanceof A)&&(g=!1)}return o.delete(t),o.delete(e),g}(t,e,n,i,r,o))}(t,e,n,i,an,r))}function gn(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Co(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){var l=(s=n[r])[0],u=t[l],c=s[1];if(a&&s[2]){if(u===Y&&!(l in t))return!1}else{var h=new me;if(i)var f=i(u,c,l,t,e,h);if(!(f===Y?an(c,u,3,i,h):f))return!1}}return!0}function In(t){return!(!Gr(t)||function(t){return!!zo&&zo in t}(t))&&(Or(t)?Oo:ie).test(cr(t))}function An(t){return"function"==typeof t?t:null==t?lo:"object"==typeof t?Ds(t)?Nn(t[0],t[1]):xn(t):fo(t)}function yn(t){if(!$i(t))return ra(t);var e=[];for(var n in Co(t))Do.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Cn(t){if(!Gr(t))return function(t){var e=[];if(null!=t)for(var n in Co(t))e.push(n);return e}(t);var e=$i(t),n=[];for(var i in t)("constructor"!=i||!e&&Do.call(t,i))&&n.push(i);return n}function bn(t,e){return t<e}function wn(t,e){var n=-1,i=Lr(t)?mo(t.length):[];return ka(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function xn(t){var e=Ui(t);return 1==e.length&&e[0][2]?er(e[0][0],e[0][1]):function(n){return n===t||gn(n,t,e)}}function Nn(t,e){return Ki(t)&&tr(e)?er(ur(t),e):function(n){var i=qr(n,t);return i===Y&&i===e?$r(n,t):an(e,i,3)}}function Mn(t,e,n,i,r){t!==e&&Da(e,function(o,a){if(r||(r=new me),Gr(o))!function(t,e,n,i,r,o,a){var s=or(t,n),l=or(e,n),u=a.get(l);if(u)return Ce(t,n,u),Y;var c=o?o(s,l,n+"",t,e,a):Y,h=c===Y;if(h){var f=Ds(l),g=!f&&zs(l),d=!f&&!g&&Zs(l);c=l,f||g||d?Ds(s)?c=s:Pr(s)?c=ui(s):g?(h=!1,c=ii(l,!0)):d?(h=!1,c=oi(l,!0)):c=[]:Wr(l)||Ts(l)?(c=s,Ts(s)?c=Qr(s):Gr(s)&&!Or(s)||(c=Vi(l))):h=!1}h&&(a.set(l,c),r(c,l,i,o,a),a.delete(l)),Ce(t,n,c)}(t,e,a,n,Mn,i,r);else{var s=i?i(or(t,a),o,a+"",t,e,r):Y;s===Y&&(s=o),Ce(t,a,s)}},eo)}function Sn(t,e){var n=t.length;if(n)return Ji(e+=e<0?n:0,n)?t[e]:Y}function kn(t,e,n){e=e.length?l(e,function(t){return Ds(t)?function(e){return We(e,1===t.length?t[0]:t)}:t}):[lo];var i=-1;return e=l(e,M(Wi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(wn(t,function(t,n,r){return{criteria:l(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=ai(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)})}function Tn(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=We(t,a);n(s,a)&&Zn(o,ei(a,t),s)}return o}function Dn(t,e,n,i){var r=i?v:m,o=-1,a=e.length,s=t;for(t===e&&(e=ui(e)),n&&(s=l(t,M(n)));++o<a;)for(var u=0,c=e[o],h=n?n(c):c;(u=r(s,h,u,i))>-1;)s!==t&&Uo.call(s,u,1),Uo.call(t,u,1);return t}function jn(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Ji(r)?Uo.call(t,r,1):Vn(t,r)}}return t}function zn(t,e){return t+$o(ua()*(e-t+1))}function Ln(t,e){var n="";if(!t||e<1||e>$)return n;do{e%2&&(n+=t),(e=$o(e/2))&&(t+=t)}while(e);return n}function Pn(t,e){return Ua(nr(t,e,lo),t+"")}function En(t){return Ie(io(t))}function On(t,e){var n=io(t);return lr(n,ke(e,0,n.length))}function Zn(t,e,n,i){if(!Gr(t))return t;for(var r=-1,o=(e=ei(e,t)).length,a=o-1,s=t;null!=s&&++r<o;){var l=ur(e[r]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=a){var c=s[l];(u=i?i(c,l,s):Y)===Y&&(u=Gr(c)?c:Ji(e[r+1])?[]:{})}be(s,l,u),s=s[l]}return t}function Bn(t){return lr(io(t))}function Gn(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=mo(r);++i<r;)o[i]=t[i+e];return o}function Rn(t,e){var n;return ka(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function _n(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!Ur(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return Wn(t,e,lo,n)}function Wn(t,e,n,i){var r=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,s=null===e,l=Ur(e),u=e===Y;r<o;){var c=$o((r+o)/2),h=n(t[c]),f=h!==Y,g=null===h,d=h==h,p=Ur(h);if(a)var m=i||d;else m=u?d&&(i||f):s?d&&f&&(i||!g):l?d&&f&&!g&&(i||!p):!g&&!p&&(i?h<=e:h<e);m?r=c+1:o=c}return aa(o,4294967294)}function Yn(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!zr(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function Un(t){return"number"==typeof t?t:Ur(t)?tt:+t}function Fn(t){if("string"==typeof t)return t;if(Ds(t))return l(t,Fn)+"";if(Ur(t))return Ma?Ma.call(t):"";var e=t+"";return"0"==e&&1/t==-q?"-0":e}function Xn(t,e,n){var i=-1,r=a,o=t.length,l=!0,u=[],c=u;if(n)l=!1,r=s;else if(o>=200){var h=e?null:Oa(t);if(h)return B(h);l=!1,r=k,c=new pe}else c=e?[]:u;t:for(;++i<o;){var f=t[i],g=e?e(f):f;if(f=n||0!==f?f:0,l&&g==g){for(var d=c.length;d--;)if(c[d]===g)continue t;e&&c.push(g),u.push(f)}else r(c,g,n)||(c!==u&&c.push(g),u.push(f))}return u}function Vn(t,e){return null==(t=ir(t,e=ei(e,t)))||delete t[ur(vr(e))]}function Hn(t,e,n,i){return Zn(t,e,n(We(t,e)),i)}function Jn(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Gn(t,i?0:o,i?o+1:r):Gn(t,i?o+1:0,i?r:o)}function Qn(t,e){var n=t;return n instanceof he&&(n=n.value()),c(e,function(t,e){return e.func.apply(e.thisArg,u([t],e.args))},n)}function Kn(t,e,n){var i=t.length;if(i<2)return i?Xn(t[0]):[];for(var r=-1,o=mo(i);++r<i;)for(var a=t[r],s=-1;++s<i;)s!=r&&(o[r]=ze(o[r]||a,t[s],e,n));return Xn(Oe(o,1),e,n)}function qn(t,e,n){for(var i=-1,r=t.length,o=e.length,a={};++i<r;)n(a,t[i],i<o?e[i]:Y);return a}function $n(t){return Pr(t)?t:[]}function ti(t){return"function"==typeof t?t:lo}function ei(t,e){return Ds(t)?t:Ki(t,e)?[t]:Fa(Kr(t))}function ni(t,e,n){var i=t.length;return n=n===Y?i:n,!e&&n>=i?t:Gn(t,e,n)}function ii(t,e){if(e)return t.slice();var n=t.length,i=Ro?Ro(n):new t.constructor(n);return t.copy(i),i}function ri(t){var e=new t.constructor(t.byteLength);return new Go(e).set(new Go(t)),e}function oi(t,e){return new t.constructor(e?ri(t.buffer):t.buffer,t.byteOffset,t.length)}function ai(t,e){if(t!==e){var n=t!==Y,i=null===t,r=t==t,o=Ur(t),a=e!==Y,s=null===e,l=e==e,u=Ur(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||i&&a&&l||!n&&l||!r)return 1;if(!i&&!o&&!u&&t<e||u&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!l)return-1}return 0}function si(t,e,n,i){for(var r=-1,o=t.length,a=n.length,s=-1,l=e.length,u=oa(o-a,0),c=mo(l+u),h=!i;++s<l;)c[s]=e[s];for(;++r<a;)(h||r<o)&&(c[n[r]]=t[r]);for(;u--;)c[s++]=t[r++];return c}function li(t,e,n,i){for(var r=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=oa(o-s,0),h=mo(c+u),f=!i;++r<c;)h[r]=t[r];for(var g=r;++l<u;)h[g+l]=e[l];for(;++a<s;)(f||r<o)&&(h[g+n[a]]=t[r++]);return h}function ui(t,e){var n=-1,i=t.length;for(e||(e=mo(i));++n<i;)e[n]=t[n];return e}function ci(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=i?i(n[s],t[s],s,n,t):Y;l===Y&&(l=t[s]),r?Me(n,s,l):be(n,s,l)}return n}function hi(t,n){return function(i,r){var o=Ds(i)?e:xe,a=n?n():{};return o(i,t,Wi(r,2),a)}}function fi(t){return Pn(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:Y,a=r>2?n[2]:Y;for(o=t.length>3&&"function"==typeof o?(r--,o):Y,a&&Qi(n[0],n[1],a)&&(o=r<3?Y:o,r=1),e=Co(e);++i<r;){var s=n[i];s&&t(e,s,i,o)}return e})}function gi(t,e){return function(n,i){if(null==n)return n;if(!Lr(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Co(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function di(t){return function(e,n,i){for(var r=-1,o=Co(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function pi(t){return function(e){var n=L(e=Kr(e))?R(e):Y,i=n?n[0]:e.charAt(0),r=n?ni(n,1).join(""):e.slice(1);return i[t]()+r}}function mi(t){return function(e){return c(ao(oo(e).replace(Ge,"")),t,"")}}function vi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Sa(t.prototype),i=t.apply(n,e);return Gr(i)?i:n}}function Ii(e,n,i){var r=vi(e);return function o(){for(var a=arguments.length,s=mo(a),l=a,u=_i(o);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:Z(s,u);return(a-=c.length)<i?Ti(e,n,Ci,o.placeholder,Y,s,c,Y,Y,i-a):t(this&&this!==tn&&this instanceof o?r:e,this,s)}}function Ai(t){return function(e,n,i){var r=Co(e);if(!Lr(e)){var o=Wi(n,3);e=to(e),n=function(t){return o(r[t],t,r)}}var a=t(e,n,i);return a>-1?r[o?e[a]:a]:Y}}function yi(t){return Zi(function(e){var n=e.length,i=n,r=ce.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new xo(U);if(r&&!a&&"wrapper"==Ri(o))var a=new ce([],!0)}for(i=a?i:n;++i<n;){var s=Ri(o=e[i]),l="wrapper"==s?Za(o):Y;a=l&&qi(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Ri(l[0])].apply(a,l[3]):1==o.length&&qi(o)?a[s]():a.thru(o)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&Ds(i))return a.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}})}function Ci(t,e,n,i,r,o,a,s,l,u){var c=e&Q,h=1&e,f=2&e,g=24&e,d=512&e,p=f?Y:vi(t);return function m(){for(var v=arguments.length,I=mo(v),A=v;A--;)I[A]=arguments[A];if(g)var y=_i(m),C=j(I,y);if(i&&(I=si(I,i,r,g)),o&&(I=li(I,o,a,g)),v-=C,g&&v<u)return Ti(t,e,Ci,m.placeholder,n,I,Z(I,y),s,l,u-v);var b=h?n:this,w=f?b[t]:t;return v=I.length,s?I=rr(I,s):d&&v>1&&I.reverse(),c&&l<v&&(I.length=l),this&&this!==tn&&this instanceof m&&(w=p||vi(w)),w.apply(b,I)}}function bi(t,e){return function(n,i){return function(t,e,n,i){return Ze(t,function(t,r,o){e(i,n(t),r,o)}),i}(n,t,e(i),{})}}function wi(t,e){return function(n,i){var r;if(n===Y&&i===Y)return e;if(n!==Y&&(r=n),i!==Y){if(r===Y)return i;"string"==typeof n||"string"==typeof i?(n=Fn(n),i=Fn(i)):(n=Un(n),i=Un(i)),r=t(n,i)}return r}}function xi(e){return Zi(function(n){return n=l(n,M(Wi())),Pn(function(i){var r=this;return e(n,function(e){return t(e,r,i)})})})}function Ni(t,e){var n=(e=e===Y?" ":Fn(e)).length;if(n<2)return n?Ln(e,t):e;var i=Ln(e,qo(t/G(e)));return L(e)?ni(R(i),0,t).join(""):i.slice(0,t)}function Mi(e,n,i,r){var o=1&n,a=vi(e);return function n(){for(var s=-1,l=arguments.length,u=-1,c=r.length,h=mo(c+l),f=this&&this!==tn&&this instanceof n?a:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++s];return t(f,o?i:this,h)}}function Si(t){return function(e,n,i){return i&&"number"!=typeof i&&Qi(e,n,i)&&(n=i=Y),e=Xr(e),n===Y?(n=e,e=0):n=Xr(n),function(t,e,n,i){for(var r=-1,o=oa(qo((e-t)/(n||1)),0),a=mo(o);o--;)a[i?o:++r]=t,t+=n;return a}(e,n,i=i===Y?e<n?1:-1:Xr(i),t)}}function ki(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Jr(e),n=Jr(n)),t(e,n)}}function Ti(t,e,n,i,r,o,a,s,l,u){var c=8&e;e|=c?H:J,4&(e&=~(c?J:H))||(e&=-4);var h=[t,e,r,c?o:Y,c?a:Y,c?Y:o,c?Y:a,s,l,u],f=n.apply(Y,h);return qi(t)&&Wa(f,h),f.placeholder=i,ar(f,t,e)}function Di(t){var e=yo[t];return function(t,n){if(t=Jr(t),(n=null==n?0:aa(Vr(n),292))&&na(t)){var i=(Kr(t)+"e").split("e");return+((i=(Kr(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}function ji(t){return function(e){var n=Ra(e);return n==ct?E(e):n==pt?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return l(e,function(e){return[e,t[e]]})}(e,t(e))}}function zi(t,e,n,i,r,o,a,s){var l=2&e;if(!l&&"function"!=typeof t)throw new xo(U);var u=i?i.length:0;if(u||(e&=-97,i=r=Y),a=a===Y?a:oa(Vr(a),0),s=s===Y?s:Vr(s),u-=r?r.length:0,e&J){var c=i,h=r;i=r=Y}var f=l?Y:Za(t),g=[t,e,n,i,r,c,h,o,a,s];if(f&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,a=i==Q&&8==n||i==Q&&n==K&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var s=e[3];if(s){var l=t[3];t[3]=l?si(l,s,e[4]):s,t[4]=l?Z(t[3],X):e[4]}(s=e[5])&&(l=t[5],t[5]=l?li(l,s,e[6]):s,t[6]=l?Z(t[5],X):e[6]),(s=e[7])&&(t[7]=s),i&Q&&(t[8]=null==t[8]?e[8]:aa(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(g,f),t=g[0],e=g[1],n=g[2],i=g[3],r=g[4],!(s=g[9]=g[9]===Y?l?0:t.length:oa(g[9]-u,0))&&24&e&&(e&=-25),e&&1!=e)d=8==e||e==V?Ii(t,e,s):e!=H&&33!=e||r.length?Ci.apply(Y,g):Mi(t,e,n,i);else var d=function(t,e,n){var i=1&e,r=vi(t);return function e(){return(this&&this!==tn&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return ar((f?za:Wa)(d,g),t,e)}function Li(t,e,n,i){return t===Y||zr(t,So[n])&&!Do.call(i,n)?e:t}function Pi(t,e,n,i,r,o){return Gr(t)&&Gr(e)&&(o.set(e,t),Mn(t,e,Y,Pi,o),o.delete(e)),t}function Ei(t){return Wr(t)?Y:t}function Oi(t,e,n,i,r,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var h=-1,g=!0,d=2&n?new pe:Y;for(o.set(t,e),o.set(e,t);++h<s;){var p=t[h],m=e[h];if(i)var v=a?i(m,p,h,e,t,o):i(p,m,h,t,e,o);if(v!==Y){if(v)continue;g=!1;break}if(d){if(!f(e,function(t,e){if(!k(d,e)&&(p===t||r(p,t,n,i,o)))return d.push(e)})){g=!1;break}}else if(p!==m&&!r(p,m,n,i,o)){g=!1;break}}return o.delete(t),o.delete(e),g}function Zi(t){return Ua(nr(t,Y,pr),t+"")}function Bi(t){return Ye(t,to,Ba)}function Gi(t){return Ye(t,eo,Ga)}function Ri(t){for(var e=t.name+"",n=Ia[e],i=Do.call(Ia,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function _i(t){return(Do.call(Qt,"placeholder")?Qt:t).placeholder}function Wi(){var t=Qt.iteratee||uo;return t=t===uo?An:t,arguments.length?t(arguments[0],arguments[1]):t}function Yi(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ui(t){for(var e=to(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,tr(r)]}return e}function Fi(t,e){var n=function(t,e){return null==t?Y:t[e]}(t,e);return In(n)?n:Y}function Xi(t,e,n){for(var i=-1,r=(e=ei(e,t)).length,o=!1;++i<r;){var a=ur(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Br(r)&&Ji(a,r)&&(Ds(t)||Ts(t))}function Vi(t){return"function"!=typeof t.constructor||$i(t)?{}:Sa(_o(t))}function Hi(t){return Ds(t)||Ts(t)||!!(Fo&&t&&t[Fo])}function Ji(t,e){var n=typeof t;return!!(e=null==e?$:e)&&("number"==n||"symbol"!=n&&oe.test(t))&&t>-1&&t%1==0&&t<e}function Qi(t,e,n){if(!Gr(n))return!1;var i=typeof e;return!!("number"==i?Lr(n)&&Ji(e,n.length):"string"==i&&e in n)&&zr(n[e],t)}function Ki(t,e){if(Ds(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ur(t))||_t.test(t)||!Rt.test(t)||null!=e&&t in Co(e)}function qi(t){var e=Ri(t),n=Qt[e];if("function"!=typeof n||!(e in he.prototype))return!1;if(t===n)return!0;var i=Za(n);return!!i&&t===i[0]}function $i(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||So)}function tr(t){return t==t&&!Gr(t)}function er(t,e){return function(n){return null!=n&&n[t]===e&&(e!==Y||t in Co(n))}}function nr(e,n,i){return n=oa(n===Y?e.length-1:n,0),function(){for(var r=arguments,o=-1,a=oa(r.length-n,0),s=mo(a);++o<a;)s[o]=r[n+o];o=-1;for(var l=mo(n+1);++o<n;)l[o]=r[o];return l[n]=i(s),t(e,this,l)}}function ir(t,e){return e.length<2?t:We(t,Gn(e,0,-1))}function rr(t,e){for(var n=t.length,i=aa(e.length,n),r=ui(t);i--;){var o=e[i];t[i]=Ji(o,n)?r[o]:Y}return t}function or(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function ar(t,e,n){var i=e+"";return Ua(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Vt,"{\n/* [wrapped with "+e+"] */\n")}(i,hr(function(t){var e=t.match(Ht);return e?e[1].split(Jt):[]}(i),n)))}function sr(t){var e=0,n=0;return function(){var i=sa(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(Y,arguments)}}function lr(t,e){var n=-1,i=t.length,r=i-1;for(e=e===Y?i:e;++n<e;){var o=zn(n,r),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function ur(t){if("string"==typeof t||Ur(t))return t;var e=t+"";return"0"==e&&1/t==-q?"-0":e}function cr(t){if(null!=t){try{return To.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function hr(t,e){return n(nt,function(n){var i="_."+n[0];e&n[1]&&!a(t,i)&&t.push(i)}),t.sort()}function fr(t){if(t instanceof he)return t.clone();var e=new ce(t.__wrapped__,t.__chain__);return e.__actions__=ui(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function gr(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Vr(n);return r<0&&(r=oa(i+r,0)),p(t,Wi(e,3),r)}function dr(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==Y&&(r=Vr(n),r=n<0?oa(i+r,0):aa(r,i-1)),p(t,Wi(e,3),r,!0)}function pr(t){return null!=t&&t.length?Oe(t,1):[]}function mr(t){return t&&t.length?t[0]:Y}function vr(t){var e=null==t?0:t.length;return e?t[e-1]:Y}function Ir(t,e){return t&&t.length&&e&&e.length?Dn(t,e):t}function Ar(t){return null==t?t:ca.call(t)}function yr(t){if(!t||!t.length)return[];var e=0;return t=o(t,function(t){if(Pr(t))return e=oa(t.length,e),!0}),x(e,function(e){return l(t,y(e))})}function Cr(e,n){if(!e||!e.length)return[];var i=yr(e);return null==n?i:l(i,function(e){return t(n,Y,e)})}function br(t){var e=Qt(t);return e.__chain__=!0,e}function wr(t,e){return e(t)}function xr(t,e){return(Ds(t)?n:ka)(t,Wi(e,3))}function Nr(t,e){return(Ds(t)?i:Ta)(t,Wi(e,3))}function Mr(t,e){return(Ds(t)?l:wn)(t,Wi(e,3))}function Sr(t,e,n){return e=n?Y:e,e=t&&null==e?t.length:e,zi(t,Q,Y,Y,Y,Y,e)}function kr(t,e){var n;if("function"!=typeof e)throw new xo(U);return t=Vr(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=Y),n}}function Tr(t,e,n){function i(e){var n=u,i=c;return u=c=Y,p=e,f=t.apply(i,n)}function r(t){return p=t,g=Ya(a,e),m?i(t):f}function o(t){var n=t-d;return d===Y||n>=e||n<0||v&&t-p>=h}function a(){var t=Is();return o(t)?s(t):(g=Ya(a,function(t){var n=e-(t-d);return v?aa(n,h-(t-p)):n}(t)),Y)}function s(t){return g=Y,I&&u?i(t):(u=c=Y,f)}function l(){var t=Is(),n=o(t);if(u=arguments,c=this,d=t,n){if(g===Y)return r(d);if(v)return Ea(g),g=Ya(a,e),i(d)}return g===Y&&(g=Ya(a,e)),f}var u,c,h,f,g,d,p=0,m=!1,v=!1,I=!0;if("function"!=typeof t)throw new xo(U);return e=Jr(e)||0,Gr(n)&&(m=!!n.leading,h=(v="maxWait"in n)?oa(Jr(n.maxWait)||0,e):h,I="trailing"in n?!!n.trailing:I),l.cancel=function(){g!==Y&&Ea(g),p=0,u=d=c=g=Y},l.flush=function(){return g===Y?f:s(Is())},l}function Dr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new xo(U);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Dr.Cache||de),n}function jr(t){if("function"!=typeof t)throw new xo(U);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function zr(t,e){return t===e||t!=t&&e!=e}function Lr(t){return null!=t&&Br(t.length)&&!Or(t)}function Pr(t){return Rr(t)&&Lr(t)}function Er(t){if(!Rr(t))return!1;var e=Ue(t);return e==st||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Wr(t)}function Or(t){if(!Gr(t))return!1;var e=Ue(t);return e==lt||e==ut||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Zr(t){return"number"==typeof t&&t==Vr(t)}function Br(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=$}function Gr(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rr(t){return null!=t&&"object"==typeof t}function _r(t){return"number"==typeof t||Rr(t)&&Ue(t)==ht}function Wr(t){if(!Rr(t)||Ue(t)!=ft)return!1;var e=_o(t);if(null===e)return!0;var n=Do.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&To.call(n)==Po}function Yr(t){return"string"==typeof t||!Ds(t)&&Rr(t)&&Ue(t)==mt}function Ur(t){return"symbol"==typeof t||Rr(t)&&Ue(t)==vt}function Fr(t){if(!t)return[];if(Lr(t))return Yr(t)?R(t):ui(t);if(Xo&&t[Xo])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Xo]());var e=Ra(t);return(e==ct?E:e==pt?B:io)(t)}function Xr(t){return t?(t=Jr(t))===q||t===-q?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Vr(t){var e=Xr(t),n=e%1;return e==e?n?e-n:e:0}function Hr(t){return t?ke(Vr(t),0,et):0}function Jr(t){if("number"==typeof t)return t;if(Ur(t))return tt;if(Gr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Gr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=N(t);var n=ne.test(t);return n||re.test(t)?Ke(t.slice(2),n?2:8):ee.test(t)?tt:+t}function Qr(t){return ci(t,eo(t))}function Kr(t){return null==t?"":Fn(t)}function qr(t,e,n){var i=null==t?Y:We(t,e);return i===Y?n:i}function $r(t,e){return null!=t&&Xi(t,e,$e)}function to(t){return Lr(t)?ve(t):yn(t)}function eo(t){return Lr(t)?ve(t,!0):Cn(t)}function no(t,e){if(null==t)return{};var n=l(Gi(t),function(t){return[t]});return e=Wi(e),Tn(t,n,function(t,n){return e(t,n[0])})}function io(t){return null==t?[]:S(t,to(t))}function ro(t){return ul(Kr(t).toLowerCase())}function oo(t){return(t=Kr(t))&&t.replace(ae,dn).replace(Re,"")}function ao(t,e,n){return t=Kr(t),(e=n?Y:e)===Y?P(t)?W(t):g(t):t.match(e)||[]}function so(t){return function(){return t}}function lo(t){return t}function uo(t){return An("function"==typeof t?t:Te(t,1))}function co(t,e,i){var r=to(e),o=_e(e,r);null!=i||Gr(e)&&(o.length||!r.length)||(i=e,e=t,t=this,o=_e(e,to(e)));var a=!(Gr(i)&&"chain"in i&&!i.chain),s=Or(t);return n(o,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=ui(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,u([this.value()],arguments))})}),t}function ho(){}function fo(t){return Ki(t)?y(ur(t)):function(t){return function(e){return We(e,t)}}(t)}function go(){return[]}function po(){return!1}var mo=(Xt=null==Xt?tn:vn.defaults(tn.Object(),Xt,vn.pick(tn,Fe))).Array,vo=Xt.Date,Io=Xt.Error,Ao=Xt.Function,yo=Xt.Math,Co=Xt.Object,bo=Xt.RegExp,wo=Xt.String,xo=Xt.TypeError,No=mo.prototype,Mo=Ao.prototype,So=Co.prototype,ko=Xt["__core-js_shared__"],To=Mo.toString,Do=So.hasOwnProperty,jo=0,zo=function(){var t=/[^.]+$/.exec(ko&&ko.keys&&ko.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Lo=So.toString,Po=To.call(Co),Eo=tn._,Oo=bo("^"+To.call(Do).replace(Yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zo=rn?Xt.Buffer:Y,Bo=Xt.Symbol,Go=Xt.Uint8Array,Ro=Zo?Zo.allocUnsafe:Y,_o=O(Co.getPrototypeOf,Co),Wo=Co.create,Yo=So.propertyIsEnumerable,Uo=No.splice,Fo=Bo?Bo.isConcatSpreadable:Y,Xo=Bo?Bo.iterator:Y,Vo=Bo?Bo.toStringTag:Y,Ho=function(){try{var t=Fi(Co,"defineProperty");return t({},"",{}),t}catch(t){}}(),Jo=Xt.clearTimeout!==tn.clearTimeout&&Xt.clearTimeout,Qo=vo&&vo.now!==tn.Date.now&&vo.now,Ko=Xt.setTimeout!==tn.setTimeout&&Xt.setTimeout,qo=yo.ceil,$o=yo.floor,ta=Co.getOwnPropertySymbols,ea=Zo?Zo.isBuffer:Y,na=Xt.isFinite,ia=No.join,ra=O(Co.keys,Co),oa=yo.max,aa=yo.min,sa=vo.now,la=Xt.parseInt,ua=yo.random,ca=No.reverse,ha=Fi(Xt,"DataView"),fa=Fi(Xt,"Map"),ga=Fi(Xt,"Promise"),da=Fi(Xt,"Set"),pa=Fi(Xt,"WeakMap"),ma=Fi(Co,"create"),va=pa&&new pa,Ia={},Aa=cr(ha),ya=cr(fa),Ca=cr(ga),ba=cr(da),wa=cr(pa),xa=Bo?Bo.prototype:Y,Na=xa?xa.valueOf:Y,Ma=xa?xa.toString:Y,Sa=function(){function t(){}return function(e){if(!Gr(e))return{};if(Wo)return Wo(e);t.prototype=e;var n=new t;return t.prototype=Y,n}}();Qt.templateSettings={escape:Zt,evaluate:Bt,interpolate:Gt,variable:"",imports:{_:Qt}},Qt.prototype=ue.prototype,Qt.prototype.constructor=Qt,ce.prototype=Sa(ue.prototype),ce.prototype.constructor=ce,he.prototype=Sa(ue.prototype),he.prototype.constructor=he,fe.prototype.clear=function(){this.__data__=ma?ma(null):{},this.size=0},fe.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},fe.prototype.get=function(t){var e=this.__data__;if(ma){var n=e[t];return n===F?Y:n}return Do.call(e,t)?e[t]:Y},fe.prototype.has=function(t){var e=this.__data__;return ma?e[t]!==Y:Do.call(e,t)},fe.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ma&&e===Y?F:e,this},ge.prototype.clear=function(){this.__data__=[],this.size=0},ge.prototype.delete=function(t){var e=this.__data__,n=we(e,t);return!(n<0||(n==e.length-1?e.pop():Uo.call(e,n,1),--this.size,0))},ge.prototype.get=function(t){var e=this.__data__,n=we(e,t);return n<0?Y:e[n][1]},ge.prototype.has=function(t){return we(this.__data__,t)>-1},ge.prototype.set=function(t,e){var n=this.__data__,i=we(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},de.prototype.clear=function(){this.size=0,this.__data__={hash:new fe,map:new(fa||ge),string:new fe}},de.prototype.delete=function(t){var e=Yi(this,t).delete(t);return this.size-=e?1:0,e},de.prototype.get=function(t){return Yi(this,t).get(t)},de.prototype.has=function(t){return Yi(this,t).has(t)},de.prototype.set=function(t,e){var n=Yi(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},pe.prototype.add=pe.prototype.push=function(t){return this.__data__.set(t,F),this},pe.prototype.has=function(t){return this.__data__.has(t)},me.prototype.clear=function(){this.__data__=new ge,this.size=0},me.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},me.prototype.get=function(t){return this.__data__.get(t)},me.prototype.has=function(t){return this.__data__.has(t)},me.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ge){var i=n.__data__;if(!fa||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new de(i)}return n.set(t,e),this.size=n.size,this};var ka=gi(Ze),Ta=gi(Be,!0),Da=di(),ja=di(!0),za=va?function(t,e){return va.set(t,e),t}:lo,La=Ho?function(t,e){return Ho(t,"toString",{configurable:!0,enumerable:!1,value:so(e),writable:!0})}:lo,Pa=Pn,Ea=Jo||function(t){return tn.clearTimeout(t)},Oa=da&&1/B(new da([,-0]))[1]==q?function(t){return new da(t)}:ho,Za=va?function(t){return va.get(t)}:ho,Ba=ta?function(t){return null==t?[]:(t=Co(t),o(ta(t),function(e){return Yo.call(t,e)}))}:go,Ga=ta?function(t){for(var e=[];t;)u(e,Ba(t)),t=_o(t);return e}:go,Ra=Ue;(ha&&Ra(new ha(new ArrayBuffer(1)))!=yt||fa&&Ra(new fa)!=ct||ga&&Ra(ga.resolve())!=gt||da&&Ra(new da)!=pt||pa&&Ra(new pa)!=It)&&(Ra=function(t){var e=Ue(t),n=e==ft?t.constructor:Y,i=n?cr(n):"";if(i)switch(i){case Aa:return yt;case ya:return ct;case Ca:return gt;case ba:return pt;case wa:return It}return e});var _a=ko?Or:po,Wa=sr(za),Ya=Ko||function(t,e){return tn.setTimeout(t,e)},Ua=sr(La),Fa=function(t){var e=Dr(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Wt,function(t,n,i,r){e.push(i?r.replace(qt,"$1"):n||t)}),e}),Xa=Pn(function(t,e){return Pr(t)?ze(t,Oe(e,1,Pr,!0)):[]}),Va=Pn(function(t,e){var n=vr(e);return Pr(n)&&(n=Y),Pr(t)?ze(t,Oe(e,1,Pr,!0),Wi(n,2)):[]}),Ha=Pn(function(t,e){var n=vr(e);return Pr(n)&&(n=Y),Pr(t)?ze(t,Oe(e,1,Pr,!0),Y,n):[]}),Ja=Pn(function(t){var e=l(t,$n);return e.length&&e[0]===t[0]?en(e):[]}),Qa=Pn(function(t){var e=vr(t),n=l(t,$n);return e===vr(n)?e=Y:n.pop(),n.length&&n[0]===t[0]?en(n,Wi(e,2)):[]}),Ka=Pn(function(t){var e=vr(t),n=l(t,$n);return(e="function"==typeof e?e:Y)&&n.pop(),n.length&&n[0]===t[0]?en(n,Y,e):[]}),qa=Pn(Ir),$a=Zi(function(t,e){var n=null==t?0:t.length,i=Se(t,e);return jn(t,l(e,function(t){return Ji(t,n)?+t:t}).sort(ai)),i}),ts=Pn(function(t){return Xn(Oe(t,1,Pr,!0))}),es=Pn(function(t){var e=vr(t);return Pr(e)&&(e=Y),Xn(Oe(t,1,Pr,!0),Wi(e,2))}),ns=Pn(function(t){var e=vr(t);return e="function"==typeof e?e:Y,Xn(Oe(t,1,Pr,!0),Y,e)}),is=Pn(function(t,e){return Pr(t)?ze(t,e):[]}),rs=Pn(function(t){return Kn(o(t,Pr))}),os=Pn(function(t){var e=vr(t);return Pr(e)&&(e=Y),Kn(o(t,Pr),Wi(e,2))}),as=Pn(function(t){var e=vr(t);return e="function"==typeof e?e:Y,Kn(o(t,Pr),Y,e)}),ss=Pn(yr),ls=Pn(function(t){var e=t.length,n=e>1?t[e-1]:Y;return n="function"==typeof n?(t.pop(),n):Y,Cr(t,n)}),us=Zi(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Se(e,t)};return!(e>1||this.__actions__.length)&&i instanceof he&&Ji(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:wr,args:[r],thisArg:Y}),new ce(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Y),t})):this.thru(r)}),cs=hi(function(t,e,n){Do.call(t,n)?++t[n]:Me(t,n,1)}),hs=Ai(gr),fs=Ai(dr),gs=hi(function(t,e,n){Do.call(t,n)?t[n].push(e):Me(t,n,[e])}),ds=Pn(function(e,n,i){var r=-1,o="function"==typeof n,a=Lr(e)?mo(e.length):[];return ka(e,function(e){a[++r]=o?t(n,e,i):nn(e,n,i)}),a}),ps=hi(function(t,e,n){Me(t,n,e)}),ms=hi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),vs=Pn(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Qi(t,e[0],e[1])?e=[]:n>2&&Qi(e[0],e[1],e[2])&&(e=[e[0]]),kn(t,Oe(e,1),[])}),Is=Qo||function(){return tn.Date.now()},As=Pn(function(t,e,n){var i=1;if(n.length){var r=Z(n,_i(As));i|=H}return zi(t,i,e,n,r)}),ys=Pn(function(t,e,n){var i=3;if(n.length){var r=Z(n,_i(ys));i|=H}return zi(e,i,t,n,r)}),Cs=Pn(function(t,e){return je(t,1,e)}),bs=Pn(function(t,e,n){return je(t,Jr(e)||0,n)});Dr.Cache=de;var ws=Pa(function(e,n){var i=(n=1==n.length&&Ds(n[0])?l(n[0],M(Wi())):l(Oe(n,1),M(Wi()))).length;return Pn(function(r){for(var o=-1,a=aa(r.length,i);++o<a;)r[o]=n[o].call(this,r[o]);return t(e,this,r)})}),xs=Pn(function(t,e){return zi(t,H,Y,e,Z(e,_i(xs)))}),Ns=Pn(function(t,e){return zi(t,J,Y,e,Z(e,_i(Ns)))}),Ms=Zi(function(t,e){return zi(t,K,Y,Y,Y,e)}),Ss=ki(Je),ks=ki(function(t,e){return t>=e}),Ts=on(function(){return arguments}())?on:function(t){return Rr(t)&&Do.call(t,"callee")&&!Yo.call(t,"callee")},Ds=mo.isArray,js=sn?M(sn):function(t){return Rr(t)&&Ue(t)==At},zs=ea||po,Ls=ln?M(ln):function(t){return Rr(t)&&Ue(t)==at},Ps=un?M(un):function(t){return Rr(t)&&Ra(t)==ct},Es=cn?M(cn):function(t){return Rr(t)&&Ue(t)==dt},Os=hn?M(hn):function(t){return Rr(t)&&Ra(t)==pt},Zs=fn?M(fn):function(t){return Rr(t)&&Br(t.length)&&!!Ve[Ue(t)]},Bs=ki(bn),Gs=ki(function(t,e){return t<=e}),Rs=fi(function(t,e){if($i(e)||Lr(e))return ci(e,to(e),t),Y;for(var n in e)Do.call(e,n)&&be(t,n,e[n])}),_s=fi(function(t,e){ci(e,eo(e),t)}),Ws=fi(function(t,e,n,i){ci(e,eo(e),t,i)}),Ys=fi(function(t,e,n,i){ci(e,to(e),t,i)}),Us=Zi(Se),Fs=Pn(function(t,e){t=Co(t);var n=-1,i=e.length,r=i>2?e[2]:Y;for(r&&Qi(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],a=eo(o),s=-1,l=a.length;++s<l;){var u=a[s],c=t[u];(c===Y||zr(c,So[u])&&!Do.call(t,u))&&(t[u]=o[u])}return t}),Xs=Pn(function(e){return e.push(Y,Pi),t(Ks,Y,e)}),Vs=bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lo.call(e)),t[e]=n},so(lo)),Hs=bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lo.call(e)),Do.call(t,e)?t[e].push(n):t[e]=[n]},Wi),Js=Pn(nn),Qs=fi(function(t,e,n){Mn(t,e,n)}),Ks=fi(function(t,e,n,i){Mn(t,e,n,i)}),qs=Zi(function(t,e){var n={};if(null==t)return n;var i=!1;e=l(e,function(e){return e=ei(e,t),i||(i=e.length>1),e}),ci(t,Gi(t),n),i&&(n=Te(n,7,Ei));for(var r=e.length;r--;)Vn(n,e[r]);return n}),$s=Zi(function(t,e){return null==t?{}:function(t,e){return Tn(t,e,function(e,n){return $r(t,n)})}(t,e)}),tl=ji(to),el=ji(eo),nl=mi(function(t,e,n){return e=e.toLowerCase(),t+(n?ro(e):e)}),il=mi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),rl=mi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ol=pi("toLowerCase"),al=mi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),sl=mi(function(t,e,n){return t+(n?" ":"")+ul(e)}),ll=mi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ul=pi("toUpperCase"),cl=Pn(function(e,n){try{return t(e,Y,n)}catch(t){return Er(t)?t:new Io(t)}}),hl=Zi(function(t,e){return n(e,function(e){e=ur(e),Me(t,e,As(t[e],t))}),t}),fl=yi(),gl=yi(!0),dl=Pn(function(t,e){return function(n){return nn(n,t,e)}}),pl=Pn(function(t,e){return function(n){return nn(t,n,e)}}),ml=xi(l),vl=xi(r),Il=xi(f),Al=Si(),yl=Si(!0),Cl=wi(function(t,e){return t+e},0),bl=Di("ceil"),wl=wi(function(t,e){return t/e},1),xl=Di("floor"),Nl=wi(function(t,e){return t*e},1),Ml=Di("round"),Sl=wi(function(t,e){return t-e},0);return Qt.after=function(t,e){if("function"!=typeof e)throw new xo(U);return t=Vr(t),function(){if(--t<1)return e.apply(this,arguments)}},Qt.ary=Sr,Qt.assign=Rs,Qt.assignIn=_s,Qt.assignInWith=Ws,Qt.assignWith=Ys,Qt.at=Us,Qt.before=kr,Qt.bind=As,Qt.bindAll=hl,Qt.bindKey=ys,Qt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ds(t)?t:[t]},Qt.chain=br,Qt.chunk=function(t,e,n){e=(n?Qi(t,e,n):e===Y)?1:oa(Vr(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,o=0,a=mo(qo(i/e));r<i;)a[o++]=Gn(t,r,r+=e);return a},Qt.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Qt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=mo(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return u(Ds(n)?ui(n):[n],Oe(e,1))},Qt.cond=function(e){var n=null==e?0:e.length,i=Wi();return e=n?l(e,function(t){if("function"!=typeof t[1])throw new xo(U);return[i(t[0]),t[1]]}):[],Pn(function(i){for(var r=-1;++r<n;){var o=e[r];if(t(o[0],this,i))return t(o[1],this,i)}})},Qt.conforms=function(t){return function(t){var e=to(t);return function(n){return De(n,t,e)}}(Te(t,1))},Qt.constant=so,Qt.countBy=cs,Qt.create=function(t,e){var n=Sa(t);return null==e?n:Ne(n,e)},Qt.curry=function t(e,n,i){var r=zi(e,8,Y,Y,Y,Y,Y,n=i?Y:n);return r.placeholder=t.placeholder,r},Qt.curryRight=function t(e,n,i){var r=zi(e,V,Y,Y,Y,Y,Y,n=i?Y:n);return r.placeholder=t.placeholder,r},Qt.debounce=Tr,Qt.defaults=Fs,Qt.defaultsDeep=Xs,Qt.defer=Cs,Qt.delay=bs,Qt.difference=Xa,Qt.differenceBy=Va,Qt.differenceWith=Ha,Qt.drop=function(t,e,n){var i=null==t?0:t.length;return i?Gn(t,(e=n||e===Y?1:Vr(e))<0?0:e,i):[]},Qt.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Gn(t,0,(e=i-(e=n||e===Y?1:Vr(e)))<0?0:e):[]},Qt.dropRightWhile=function(t,e){return t&&t.length?Jn(t,Wi(e,3),!0,!0):[]},Qt.dropWhile=function(t,e){return t&&t.length?Jn(t,Wi(e,3),!0):[]},Qt.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Qi(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=Vr(n))<0&&(n=-n>r?0:r+n),(i=i===Y||i>r?r:Vr(i))<0&&(i+=r),i=n>i?0:Hr(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Qt.filter=function(t,e){return(Ds(t)?o:Ee)(t,Wi(e,3))},Qt.flatMap=function(t,e){return Oe(Mr(t,e),1)},Qt.flatMapDeep=function(t,e){return Oe(Mr(t,e),q)},Qt.flatMapDepth=function(t,e,n){return n=n===Y?1:Vr(n),Oe(Mr(t,e),n)},Qt.flatten=pr,Qt.flattenDeep=function(t){return null!=t&&t.length?Oe(t,q):[]},Qt.flattenDepth=function(t,e){return null!=t&&t.length?Oe(t,e=e===Y?1:Vr(e)):[]},Qt.flip=function(t){return zi(t,512)},Qt.flow=fl,Qt.flowRight=gl,Qt.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Qt.functions=function(t){return null==t?[]:_e(t,to(t))},Qt.functionsIn=function(t){return null==t?[]:_e(t,eo(t))},Qt.groupBy=gs,Qt.initial=function(t){return null!=t&&t.length?Gn(t,0,-1):[]},Qt.intersection=Ja,Qt.intersectionBy=Qa,Qt.intersectionWith=Ka,Qt.invert=Vs,Qt.invertBy=Hs,Qt.invokeMap=ds,Qt.iteratee=uo,Qt.keyBy=ps,Qt.keys=to,Qt.keysIn=eo,Qt.map=Mr,Qt.mapKeys=function(t,e){var n={};return e=Wi(e,3),Ze(t,function(t,i,r){Me(n,e(t,i,r),t)}),n},Qt.mapValues=function(t,e){var n={};return e=Wi(e,3),Ze(t,function(t,i,r){Me(n,i,e(t,i,r))}),n},Qt.matches=function(t){return xn(Te(t,1))},Qt.matchesProperty=function(t,e){return Nn(t,Te(e,1))},Qt.memoize=Dr,Qt.merge=Qs,Qt.mergeWith=Ks,Qt.method=dl,Qt.methodOf=pl,Qt.mixin=co,Qt.negate=jr,Qt.nthArg=function(t){return t=Vr(t),Pn(function(e){return Sn(e,t)})},Qt.omit=qs,Qt.omitBy=function(t,e){return no(t,jr(Wi(e)))},Qt.once=function(t){return kr(2,t)},Qt.orderBy=function(t,e,n,i){return null==t?[]:(Ds(e)||(e=null==e?[]:[e]),Ds(n=i?Y:n)||(n=null==n?[]:[n]),kn(t,e,n))},Qt.over=ml,Qt.overArgs=ws,Qt.overEvery=vl,Qt.overSome=Il,Qt.partial=xs,Qt.partialRight=Ns,Qt.partition=ms,Qt.pick=$s,Qt.pickBy=no,Qt.property=fo,Qt.propertyOf=function(t){return function(e){return null==t?Y:We(t,e)}},Qt.pull=qa,Qt.pullAll=Ir,Qt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Dn(t,e,Wi(n,2)):t},Qt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Dn(t,e,Y,n):t},Qt.pullAt=$a,Qt.range=Al,Qt.rangeRight=yl,Qt.rearg=Ms,Qt.reject=function(t,e){return(Ds(t)?o:Ee)(t,jr(Wi(e,3)))},Qt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Wi(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return jn(t,r),n},Qt.rest=function(t,e){if("function"!=typeof t)throw new xo(U);return Pn(t,e=e===Y?e:Vr(e))},Qt.reverse=Ar,Qt.sampleSize=function(t,e,n){return e=(n?Qi(t,e,n):e===Y)?1:Vr(e),(Ds(t)?Ae:On)(t,e)},Qt.set=function(t,e,n){return null==t?t:Zn(t,e,n)},Qt.setWith=function(t,e,n,i){return i="function"==typeof i?i:Y,null==t?t:Zn(t,e,n,i)},Qt.shuffle=function(t){return(Ds(t)?ye:Bn)(t)},Qt.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Qi(t,e,n)?(e=0,n=i):(e=null==e?0:Vr(e),n=n===Y?i:Vr(n)),Gn(t,e,n)):[]},Qt.sortBy=vs,Qt.sortedUniq=function(t){return t&&t.length?Yn(t):[]},Qt.sortedUniqBy=function(t,e){return t&&t.length?Yn(t,Wi(e,2)):[]},Qt.split=function(t,e,n){return n&&"number"!=typeof n&&Qi(t,e,n)&&(e=n=Y),(n=n===Y?et:n>>>0)?(t=Kr(t))&&("string"==typeof e||null!=e&&!Es(e))&&(!(e=Fn(e))&&L(t))?ni(R(t),0,n):t.split(e,n):[]},Qt.spread=function(e,n){if("function"!=typeof e)throw new xo(U);return n=null==n?0:oa(Vr(n),0),Pn(function(i){var r=i[n],o=ni(i,0,n);return r&&u(o,r),t(e,this,o)})},Qt.tail=function(t){var e=null==t?0:t.length;return e?Gn(t,1,e):[]},Qt.take=function(t,e,n){return t&&t.length?Gn(t,0,(e=n||e===Y?1:Vr(e))<0?0:e):[]},Qt.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Gn(t,(e=i-(e=n||e===Y?1:Vr(e)))<0?0:e,i):[]},Qt.takeRightWhile=function(t,e){return t&&t.length?Jn(t,Wi(e,3),!1,!0):[]},Qt.takeWhile=function(t,e){return t&&t.length?Jn(t,Wi(e,3)):[]},Qt.tap=function(t,e){return e(t),t},Qt.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new xo(U);return Gr(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Tr(t,e,{leading:i,maxWait:e,trailing:r})},Qt.thru=wr,Qt.toArray=Fr,Qt.toPairs=tl,Qt.toPairsIn=el,Qt.toPath=function(t){return Ds(t)?l(t,ur):Ur(t)?[t]:ui(Fa(Kr(t)))},Qt.toPlainObject=Qr,Qt.transform=function(t,e,i){var r=Ds(t),o=r||zs(t)||Zs(t);if(e=Wi(e,4),null==i){var a=t&&t.constructor;i=o?r?new a:[]:Gr(t)&&Or(a)?Sa(_o(t)):{}}return(o?n:Ze)(t,function(t,n,r){return e(i,t,n,r)}),i},Qt.unary=function(t){return Sr(t,1)},Qt.union=ts,Qt.unionBy=es,Qt.unionWith=ns,Qt.uniq=function(t){return t&&t.length?Xn(t):[]},Qt.uniqBy=function(t,e){return t&&t.length?Xn(t,Wi(e,2)):[]},Qt.uniqWith=function(t,e){return e="function"==typeof e?e:Y,t&&t.length?Xn(t,Y,e):[]},Qt.unset=function(t,e){return null==t||Vn(t,e)},Qt.unzip=yr,Qt.unzipWith=Cr,Qt.update=function(t,e,n){return null==t?t:Hn(t,e,ti(n))},Qt.updateWith=function(t,e,n,i){return i="function"==typeof i?i:Y,null==t?t:Hn(t,e,ti(n),i)},Qt.values=io,Qt.valuesIn=function(t){return null==t?[]:S(t,eo(t))},Qt.without=is,Qt.words=ao,Qt.wrap=function(t,e){return xs(ti(e),t)},Qt.xor=rs,Qt.xorBy=os,Qt.xorWith=as,Qt.zip=ss,Qt.zipObject=function(t,e){return qn(t||[],e||[],be)},Qt.zipObjectDeep=function(t,e){return qn(t||[],e||[],Zn)},Qt.zipWith=ls,Qt.entries=tl,Qt.entriesIn=el,Qt.extend=_s,Qt.extendWith=Ws,co(Qt,Qt),Qt.add=Cl,Qt.attempt=cl,Qt.camelCase=nl,Qt.capitalize=ro,Qt.ceil=bl,Qt.clamp=function(t,e,n){return n===Y&&(n=e,e=Y),n!==Y&&(n=(n=Jr(n))==n?n:0),e!==Y&&(e=(e=Jr(e))==e?e:0),ke(Jr(t),e,n)},Qt.clone=function(t){return Te(t,4)},Qt.cloneDeep=function(t){return Te(t,5)},Qt.cloneDeepWith=function(t,e){return Te(t,5,e="function"==typeof e?e:Y)},Qt.cloneWith=function(t,e){return Te(t,4,e="function"==typeof e?e:Y)},Qt.conformsTo=function(t,e){return null==e||De(t,e,to(e))},Qt.deburr=oo,Qt.defaultTo=function(t,e){return null==t||t!=t?e:t},Qt.divide=wl,Qt.endsWith=function(t,e,n){t=Kr(t),e=Fn(e);var i=t.length,r=n=n===Y?i:ke(Vr(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},Qt.eq=zr,Qt.escape=function(t){return(t=Kr(t))&&Ot.test(t)?t.replace(Pt,pn):t},Qt.escapeRegExp=function(t){return(t=Kr(t))&&Ut.test(t)?t.replace(Yt,"\\$&"):t},Qt.every=function(t,e,n){var i=Ds(t)?r:Le;return n&&Qi(t,e,n)&&(e=Y),i(t,Wi(e,3))},Qt.find=hs,Qt.findIndex=gr,Qt.findKey=function(t,e){return d(t,Wi(e,3),Ze)},Qt.findLast=fs,Qt.findLastIndex=dr,Qt.findLastKey=function(t,e){return d(t,Wi(e,3),Be)},Qt.floor=xl,Qt.forEach=xr,Qt.forEachRight=Nr,Qt.forIn=function(t,e){return null==t?t:Da(t,Wi(e,3),eo)},Qt.forInRight=function(t,e){return null==t?t:ja(t,Wi(e,3),eo)},Qt.forOwn=function(t,e){return t&&Ze(t,Wi(e,3))},Qt.forOwnRight=function(t,e){return t&&Be(t,Wi(e,3))},Qt.get=qr,Qt.gt=Ss,Qt.gte=ks,Qt.has=function(t,e){return null!=t&&Xi(t,e,qe)},Qt.hasIn=$r,Qt.head=mr,Qt.identity=lo,Qt.includes=function(t,e,n,i){t=Lr(t)?t:io(t),n=n&&!i?Vr(n):0;var r=t.length;return n<0&&(n=oa(r+n,0)),Yr(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&m(t,e,n)>-1},Qt.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Vr(n);return r<0&&(r=oa(i+r,0)),m(t,e,r)},Qt.inRange=function(t,e,n){return e=Xr(e),n===Y?(n=e,e=0):n=Xr(n),function(t,e,n){return t>=aa(e,n)&&t<oa(e,n)}(t=Jr(t),e,n)},Qt.invoke=Js,Qt.isArguments=Ts,Qt.isArray=Ds,Qt.isArrayBuffer=js,Qt.isArrayLike=Lr,Qt.isArrayLikeObject=Pr,Qt.isBoolean=function(t){return!0===t||!1===t||Rr(t)&&Ue(t)==ot},Qt.isBuffer=zs,Qt.isDate=Ls,Qt.isElement=function(t){return Rr(t)&&1===t.nodeType&&!Wr(t)},Qt.isEmpty=function(t){if(null==t)return!0;if(Lr(t)&&(Ds(t)||"string"==typeof t||"function"==typeof t.splice||zs(t)||Zs(t)||Ts(t)))return!t.length;var e=Ra(t);if(e==ct||e==pt)return!t.size;if($i(t))return!yn(t).length;for(var n in t)if(Do.call(t,n))return!1;return!0},Qt.isEqual=function(t,e){return an(t,e)},Qt.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:Y)?n(t,e):Y;return i===Y?an(t,e,Y,n):!!i},Qt.isError=Er,Qt.isFinite=function(t){return"number"==typeof t&&na(t)},Qt.isFunction=Or,Qt.isInteger=Zr,Qt.isLength=Br,Qt.isMap=Ps,Qt.isMatch=function(t,e){return t===e||gn(t,e,Ui(e))},Qt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:Y,gn(t,e,Ui(e),n)},Qt.isNaN=function(t){return _r(t)&&t!=+t},Qt.isNative=function(t){if(_a(t))throw new Io("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return In(t)},Qt.isNil=function(t){return null==t},Qt.isNull=function(t){return null===t},Qt.isNumber=_r,Qt.isObject=Gr,Qt.isObjectLike=Rr,Qt.isPlainObject=Wr,Qt.isRegExp=Es,Qt.isSafeInteger=function(t){return Zr(t)&&t>=-$&&t<=$},Qt.isSet=Os,Qt.isString=Yr,Qt.isSymbol=Ur,Qt.isTypedArray=Zs,Qt.isUndefined=function(t){return t===Y},Qt.isWeakMap=function(t){return Rr(t)&&Ra(t)==It},Qt.isWeakSet=function(t){return Rr(t)&&"[object WeakSet]"==Ue(t)},Qt.join=function(t,e){return null==t?"":ia.call(t,e)},Qt.kebabCase=il,Qt.last=vr,Qt.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==Y&&(r=(r=Vr(n))<0?oa(i+r,0):aa(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):p(t,I,r,!0)},Qt.lowerCase=rl,Qt.lowerFirst=ol,Qt.lt=Bs,Qt.lte=Gs,Qt.max=function(t){return t&&t.length?Pe(t,lo,Je):Y},Qt.maxBy=function(t,e){return t&&t.length?Pe(t,Wi(e,2),Je):Y},Qt.mean=function(t){return A(t,lo)},Qt.meanBy=function(t,e){return A(t,Wi(e,2))},Qt.min=function(t){return t&&t.length?Pe(t,lo,bn):Y},Qt.minBy=function(t,e){return t&&t.length?Pe(t,Wi(e,2),bn):Y},Qt.stubArray=go,Qt.stubFalse=po,Qt.stubObject=function(){return{}},Qt.stubString=function(){return""},Qt.stubTrue=function(){return!0},Qt.multiply=Nl,Qt.nth=function(t,e){return t&&t.length?Sn(t,Vr(e)):Y},Qt.noConflict=function(){return tn._===this&&(tn._=Eo),this},Qt.noop=ho,Qt.now=Is,Qt.pad=function(t,e,n){t=Kr(t);var i=(e=Vr(e))?G(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Ni($o(r),n)+t+Ni(qo(r),n)},Qt.padEnd=function(t,e,n){t=Kr(t);var i=(e=Vr(e))?G(t):0;return e&&i<e?t+Ni(e-i,n):t},Qt.padStart=function(t,e,n){t=Kr(t);var i=(e=Vr(e))?G(t):0;return e&&i<e?Ni(e-i,n)+t:t},Qt.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),la(Kr(t).replace(Ft,""),e||0)},Qt.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Qi(t,e,n)&&(e=n=Y),n===Y&&("boolean"==typeof e?(n=e,e=Y):"boolean"==typeof t&&(n=t,t=Y)),t===Y&&e===Y?(t=0,e=1):(t=Xr(t),e===Y?(e=t,t=0):e=Xr(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=ua();return aa(t+r*(e-t+Qe("1e-"+((r+"").length-1))),e)}return zn(t,e)},Qt.reduce=function(t,e,n){var i=Ds(t)?c:b,r=arguments.length<3;return i(t,Wi(e,4),n,r,ka)},Qt.reduceRight=function(t,e,n){var i=Ds(t)?h:b,r=arguments.length<3;return i(t,Wi(e,4),n,r,Ta)},Qt.repeat=function(t,e,n){return e=(n?Qi(t,e,n):e===Y)?1:Vr(e),Ln(Kr(t),e)},Qt.replace=function(){var t=arguments,e=Kr(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Qt.result=function(t,e,n){var i=-1,r=(e=ei(e,t)).length;for(r||(r=1,t=Y);++i<r;){var o=null==t?Y:t[ur(e[i])];o===Y&&(i=r,o=n),t=Or(o)?o.call(t):o}return t},Qt.round=Ml,Qt.runInContext=C,Qt.sample=function(t){return(Ds(t)?Ie:En)(t)},Qt.size=function(t){if(null==t)return 0;if(Lr(t))return Yr(t)?G(t):t.length;var e=Ra(t);return e==ct||e==pt?t.size:yn(t).length},Qt.snakeCase=al,Qt.some=function(t,e,n){var i=Ds(t)?f:Rn;return n&&Qi(t,e,n)&&(e=Y),i(t,Wi(e,3))},Qt.sortedIndex=function(t,e){return _n(t,e)},Qt.sortedIndexBy=function(t,e,n){return Wn(t,e,Wi(n,2))},Qt.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=_n(t,e);if(i<n&&zr(t[i],e))return i}return-1},Qt.sortedLastIndex=function(t,e){return _n(t,e,!0)},Qt.sortedLastIndexBy=function(t,e,n){return Wn(t,e,Wi(n,2),!0)},Qt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=_n(t,e,!0)-1;if(zr(t[n],e))return n}return-1},Qt.startCase=sl,Qt.startsWith=function(t,e,n){return t=Kr(t),n=null==n?0:ke(Vr(n),0,t.length),e=Fn(e),t.slice(n,n+e.length)==e},Qt.subtract=Sl,Qt.sum=function(t){return t&&t.length?w(t,lo):0},Qt.sumBy=function(t,e){return t&&t.length?w(t,Wi(e,2)):0},Qt.template=function(t,e,n){var i=Qt.templateSettings;n&&Qi(t,e,n)&&(e=Y),t=Kr(t),e=Ws({},e,i,Li);var r,o,a=Ws({},e.imports,i.imports,Li),s=to(a),l=S(a,s),u=0,c=e.interpolate||se,h="__p += '",f=bo((e.escape||se).source+"|"+c.source+"|"+(c===Gt?$t:se).source+"|"+(e.evaluate||se).source+"|$","g"),g="//# sourceURL="+(Do.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xe+"]")+"\n";t.replace(f,function(e,n,i,a,s,l){return i||(i=a),h+=t.slice(u,l).replace(le,z),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),h+="';\n";var d=Do.call(e,"variable")&&e.variable;if(d){if(Kt.test(d))throw new Io("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(Dt,""):h).replace(jt,"$1").replace(zt,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var p=cl(function(){return Ao(s,g+"return "+h).apply(Y,l)});if(p.source=h,Er(p))throw p;return p},Qt.times=function(t,e){if((t=Vr(t))<1||t>$)return[];var n=et,i=aa(t,et);e=Wi(e),t-=et;for(var r=x(i,e);++n<t;)e(n);return r},Qt.toFinite=Xr,Qt.toInteger=Vr,Qt.toLength=Hr,Qt.toLower=function(t){return Kr(t).toLowerCase()},Qt.toNumber=Jr,Qt.toSafeInteger=function(t){return t?ke(Vr(t),-$,$):0===t?t:0},Qt.toString=Kr,Qt.toUpper=function(t){return Kr(t).toUpperCase()},Qt.trim=function(t,e,n){if((t=Kr(t))&&(n||e===Y))return N(t);if(!t||!(e=Fn(e)))return t;var i=R(t),r=R(e);return ni(i,T(i,r),D(i,r)+1).join("")},Qt.trimEnd=function(t,e,n){if((t=Kr(t))&&(n||e===Y))return t.slice(0,_(t)+1);if(!t||!(e=Fn(e)))return t;var i=R(t);return ni(i,0,D(i,R(e))+1).join("")},Qt.trimStart=function(t,e,n){if((t=Kr(t))&&(n||e===Y))return t.replace(Ft,"");if(!t||!(e=Fn(e)))return t;var i=R(t);return ni(i,T(i,R(e))).join("")},Qt.truncate=function(t,e){var n=30,i="...";if(Gr(e)){var r="separator"in e?e.separator:r;n="length"in e?Vr(e.length):n,i="omission"in e?Fn(e.omission):i}var o=(t=Kr(t)).length;if(L(t)){var a=R(t);o=a.length}if(n>=o)return t;var s=n-G(i);if(s<1)return i;var l=a?ni(a,0,s).join(""):t.slice(0,s);if(r===Y)return l+i;if(a&&(s+=l.length-s),Es(r)){if(t.slice(s).search(r)){var u,c=l;for(r.global||(r=bo(r.source,Kr(te.exec(r))+"g")),r.lastIndex=0;u=r.exec(c);)var h=u.index;l=l.slice(0,h===Y?s:h)}}else if(t.indexOf(Fn(r),s)!=s){var f=l.lastIndexOf(r);f>-1&&(l=l.slice(0,f))}return l+i},Qt.unescape=function(t){return(t=Kr(t))&&Et.test(t)?t.replace(Lt,mn):t},Qt.uniqueId=function(t){var e=++jo;return Kr(t)+e},Qt.upperCase=ll,Qt.upperFirst=ul,Qt.each=xr,Qt.eachRight=Nr,Qt.first=mr,co(Qt,function(){var t={};return Ze(Qt,function(e,n){Do.call(Qt.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),Qt.VERSION="4.17.21",n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Qt[t].placeholder=Qt}),n(["drop","take"],function(t,e){he.prototype[t]=function(n){n=n===Y?1:oa(Vr(n),0);var i=this.__filtered__&&!e?new he(this):this.clone();return i.__filtered__?i.__takeCount__=aa(n,i.__takeCount__):i.__views__.push({size:aa(n,et),type:t+(i.__dir__<0?"Right":"")}),i},he.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),n(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;he.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Wi(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),n(["head","last"],function(t,e){var n="take"+(e?"Right":"");he.prototype[t]=function(){return this[n](1).value()[0]}}),n(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");he.prototype[t]=function(){return this.__filtered__?new he(this):this[n](1)}}),he.prototype.compact=function(){return this.filter(lo)},he.prototype.find=function(t){return this.filter(t).head()},he.prototype.findLast=function(t){return this.reverse().find(t)},he.prototype.invokeMap=Pn(function(t,e){return"function"==typeof t?new he(this):this.map(function(n){return nn(n,t,e)})}),he.prototype.reject=function(t){return this.filter(jr(Wi(t)))},he.prototype.slice=function(t,e){t=Vr(t);var n=this;return n.__filtered__&&(t>0||e<0)?new he(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==Y&&(n=(e=Vr(e))<0?n.dropRight(-e):n.take(e-t)),n)},he.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},he.prototype.toArray=function(){return this.take(et)},Ze(he.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=Qt[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);r&&(Qt.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,s=e instanceof he,l=a[0],c=s||Ds(e),h=function(t){var e=r.apply(Qt,u([t],a));return i&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var f=this.__chain__,g=!!this.__actions__.length,d=o&&!f,p=s&&!g;if(!o&&c){e=p?e:new he(this);var m=t.apply(e,a);return m.__actions__.push({func:wr,args:[h],thisArg:Y}),new ce(m,f)}return d&&p?t.apply(this,a):(m=this.thru(h),d?i?m.value()[0]:m.value():m)})}),n(["pop","push","shift","sort","splice","unshift"],function(t){var e=No[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Qt.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Ds(r)?r:[],t)}return this[n](function(n){return e.apply(Ds(n)?n:[],t)})}}),Ze(he.prototype,function(t,e){var n=Qt[e];if(n){var i=n.name+"";Do.call(Ia,i)||(Ia[i]=[]),Ia[i].push({name:e,func:n})}}),Ia[Ci(Y,2).name]=[{name:"wrapper",func:Y}],he.prototype.clone=function(){var t=new he(this.__wrapped__);return t.__actions__=ui(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ui(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ui(this.__views__),t},he.prototype.reverse=function(){if(this.__filtered__){var t=new he(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},he.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ds(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=aa(e,t+a);break;case"takeRight":t=oa(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,u=i?s:a-1,c=this.__iteratees__,h=c.length,f=0,g=aa(l,this.__takeCount__);if(!n||!i&&r==l&&g==l)return Qn(t,this.__actions__);var d=[];t:for(;l--&&f<g;){for(var p=-1,m=t[u+=e];++p<h;){var v=c[p],I=v.iteratee,A=v.type,y=I(m);if(2==A)m=y;else if(!y){if(1==A)continue t;break t}}d[f++]=m}return d},Qt.prototype.at=us,Qt.prototype.chain=function(){return br(this)},Qt.prototype.commit=function(){return new ce(this.value(),this.__chain__)},Qt.prototype.next=function(){this.__values__===Y&&(this.__values__=Fr(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?Y:this.__values__[this.__index__++]}},Qt.prototype.plant=function(t){for(var e,n=this;n instanceof ue;){var i=fr(n);i.__index__=0,i.__values__=Y,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},Qt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof he){var e=t;return this.__actions__.length&&(e=new he(this)),(e=e.reverse()).__actions__.push({func:wr,args:[Ar],thisArg:Y}),new ce(e,this.__chain__)}return this.thru(Ar)},Qt.prototype.toJSON=Qt.prototype.valueOf=Qt.prototype.value=function(){return Qn(this.__wrapped__,this.__actions__)},Qt.prototype.first=Qt.prototype.head,Xo&&(Qt.prototype[Xo]=function(){return this}),Qt}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(tn._=vn,define(function(){return vn})):nn?((nn.exports=vn)._=vn,en._=vn):tn._=vn}.call(this),function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,r){e.Backbone=t(e,r,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(t){}t(e,exports,i,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,n,i){var r=t.Backbone,o=Array.prototype.slice;e.VERSION="1.4.0",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a,s=e.Events={},l=/\s+/,u=function(t,e,i,r,o){var a,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(a=n.keys(i);s<a.length;s++)e=u(t,e,a[s],i[a[s]],o)}else if(i&&l.test(i))for(a=i.split(l);s<a.length;s++)e=t(e,a[s],r,o);else e=t(e,i,r,o);return e};s.on=function(t,e,n){(this._events=u(c,this._events||{},t,e,{context:n,ctx:this,listening:a}),a)&&((this._listeners||(this._listeners={}))[a.id]=a,a.interop=!1);return this},s.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=a=o[r];s||(this._listenId||(this._listenId=n.uniqueId("l")),s=a=o[r]=new m(this,t));var l=h(t,e,i,this);if(a=void 0,l)throw l;return s.interop&&s.on(e,i),this};var c=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return t},h=function(t,e,n,i){try{t.on(e,n,i)}catch(t){return t}};s.off=function(t,e,n){return this._events?(this._events=u(f,this._events,t,e,{context:n,listeners:this._listeners}),this):this},s.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:n.keys(r),a=0;a<o.length;a++){var s=r[o[a]];if(!s)break;s.obj.off(e,i,this),s.interop&&s.off(e,i)}return n.isEmpty(r)&&(this._listeningTo=void 0),this};var f=function(t,e,i,r){if(t){var o,a=r.context,s=r.listeners,l=0;if(e||a||i){for(o=e?[e]:n.keys(t);l<o.length;l++){var u=t[e=o[l]];if(!u)break;for(var c=[],h=0;h<u.length;h++){var f=u[h];if(i&&i!==f.callback&&i!==f.callback._callback||a&&a!==f.context)c.push(f);else{var g=f.listening;g&&g.off(e,i)}}c.length?t[e]=c:delete t[e]}return t}for(o=n.keys(s);l<o.length;l++)s[o[l]].cleanup()}};s.once=function(t,e,n){var i=u(g,{},t,e,this.off.bind(this));return"string"==typeof t&&null==n&&(e=void 0),this.on(i,e,n)},s.listenToOnce=function(t,e,n){var i=u(g,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,i)};var g=function(t,e,i,r){if(i){var o=t[e]=n.once(function(){r(e,o),i.apply(this,arguments)});o._callback=i}return t};s.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return u(d,this._events,t,void 0,n),this};var d=function(t,e,n,i){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&p(r,i),o&&p(o,[e].concat(i))}return t},p=function(t,e){var n,i=-1,r=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},m=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};m.prototype.on=s.on,m.prototype.off=function(t,e){var n;this.interop?(this._events=u(f,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},m.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},s.bind=s.on,s.unbind=s.off,n.extend(e,s);var v=e.Model=function(t,e){var i=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,s,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,a=i.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,h=this._previousAttributes;for(var f in r)e=r[f],n.isEqual(u[f],e)||s.push(f),n.isEqual(h[f],e)?delete c[f]:c[f]=e,o?delete u[f]:u[f]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=i);for(var g=0;g<s.length;g++)this.trigger("change:"+s[g],this,u[s[g]],i)}if(l)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,i=this._changing?this._previousAttributes:this.attributes,r={};for(var o in t){var a=t[o];n.isEqual(i[o],a)||(r[o]=a,e=!0)}return!!e&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;if(!e.set(r,t))return!1;i&&i.call(t.context,e,n,t),e.trigger("sync",e,n,t)},U(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e;var o=(i=n.extend({validate:!0,parse:!0},i)).wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,s=i.success,l=this.attributes;i.success=function(t){a.attributes=l;var e=i.parse?a.parse(t,i):t;if(o&&(e=n.extend({},r,e)),e&&!a.set(e,i))return!1;s&&s.call(i.context,a,t,i),a.trigger("sync",a,t,i)},U(this,i),r&&o&&(this.attributes=n.extend({},l,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var c=this.sync(u,this,i);return this.attributes=l,c},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&o(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var a=!1;return this.isNew()?n.defer(t.success):(U(this,t),a=this.sync("delete",this,t)),r||o(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||Y();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}});var I=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},A={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1},C=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),o=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<o;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+o+n]=r[i]};n.extend(I.prototype,s,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,y))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),i?r[0]:r},set:function(t,e){if(null!=t){(e=n.extend({},A,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,a,s=[],l=[],u=[],c=[],h={},f=e.add,g=e.merge,d=e.remove,p=!1,m=this.comparator&&null==r&&!1!==e.sort,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var I=this.get(o);if(I){if(g&&o!==I){var y=this._isModel(o)?o.attributes:o;e.parse&&(y=I.parse(y,e)),I.set(y,e),u.push(I),m&&!p&&(p=I.hasChanged(v))}h[I.cid]||(h[I.cid]=!0,s.push(I)),t[a]=I}else f&&(o=t[a]=this._prepareModel(o,e))&&(l.push(o),this._addReference(o,e),h[o.cid]=!0,s.push(o))}if(d){for(a=0;a<this.length;a++)h[(o=this.models[a]).cid]||c.push(o);c.length&&this._removeModels(c,e)}var b=!1,w=!m&&f&&d;if(s.length&&w?(b=this.length!==s.length||n.some(this.models,function(t,e){return t!==s[e]}),this.models.length=0,C(this.models,s,0),this.length=this.models.length):l.length&&(m&&(p=!0),C(this.models,l,null==r?this.length:r),this.length=this.models.length),p&&this.sort({silent:!0}),!e.silent){for(a=0;a<l.length;a++)null!=r&&(e.index=r+a),(o=l[a]).trigger("add",o,this,e);(p||b)&&this.trigger("sort",this,e),(l.length||c.length||u.length)&&(e.changes={added:l,removed:c,merged:u},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=e.bind(this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){var i=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,n){i&&r.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},values:function(){return new w(this,x)},keys:function(){return new w(this,N)},entries:function(){return new w(this,M)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?n.clone(e):{}).collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var b="function"==typeof Symbol&&Symbol.iterator;b&&(I.prototype[b]=I.prototype.values);var w=function(t,e){this._collection=t,this._kind=e,this._index=0},x=1,N=2,M=3;b&&(w.prototype[b]=function(){return this}),w.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===x)t=e;else{var n=this._collection.modelId(e.attributes);t=this._kind===N?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var S=e.View=function(t){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(S.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(k);this.delegate(r[1],r[2],i.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var D=function(t,e,i,r){n.each(i,function(n,i){e[i]&&(t.prototype[i]=function(t,e,n,i){switch(e){case 1:return function(){return t[n](this[i])};case 2:return function(e){return t[n](this[i],e)};case 3:return function(e,r){return t[n](this[i],j(e,this),r)};case 4:return function(e,r,o){return t[n](this[i],j(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),t[n].apply(t,e)}}}(e,n,i,r))})},j=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?z(t):n.isString(t)?function(e){return e.get(t)}:t},z=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}};n.each([[I,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(t){var e=t[0],i=t[1],r=t[2];e.mixin=function(t){var i=n.reduce(n.functions(t),function(t,e){return t[e]=0,t},{});D(e,t,i,r)},D(e,n,i,r)}),e.sync=function(t,i,r){var o=L[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||Y()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var l=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,l&&l.call(r.context,t,e,n)};var u=r.xhr=e.ajax(n.extend(a,r));return i.trigger("request",i,u,r),u};var L={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var P=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,Z=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(P.prototype,s,{preinitialize:function(){},initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return e.history.route(t,function(n){var a=o._extractParameters(t,n);!1!==o.execute(r,a,i)&&(o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),e.history.trigger("route",o,i,a))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(B,"\\$&").replace(E,"(?:$1)?").replace(O,function(t,e){return e?t:"([^/?]+)"}).replace(Z,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var G=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,W=/#.*$/;G.started=!1,n.extend(G.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(R,"")},start:function(t){if(G.started)throw new Error("Backbone.history has already been started");if(G.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(_,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),G.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!G.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;t=t.replace(W,"");var r=this.decodeFragment(t);if(this.fragment!==r){if(this.fragment=r,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;e.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new G;v.extend=I.extend=P.extend=S.extend=G.extend=function(t,e){var i,r=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e),i.prototype=n.create(r.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i};var Y=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("backbone"),require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["exports","backbone","lodash","jquery"],e):e((t=t||self).joint={},t.Backbone,t._,t.$)}(this,function(t,e,n,i){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var a=function(t){return t&&t.Math==Math&&t},s=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof r&&r)||function(){return this}()||Function("return this")(),l=function(t){try{return!!t()}catch(t){return!0}},u=!l(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),c={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,f={f:h&&!c.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:c},g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},d={}.toString,p=function(t){return d.call(t).slice(8,-1)},m="".split,v=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==p(t)?m.call(t,""):Object(t)}:Object,I=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},A=function(t){return v(I(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},C=function(t,e){if(!y(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!y(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!y(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!y(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,w=function(t,e){return b.call(t,e)},x=s.document,N=y(x)&&y(x.createElement),M=function(t){return N?x.createElement(t):{}},S=!u&&!l(function(){return 7!=Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a}),k=Object.getOwnPropertyDescriptor,T={f:u?k:function(t,e){if(t=A(t),e=C(e,!0),S)try{return k(t,e)}catch(t){}if(w(t,e))return g(!f.f.call(t,e),t[e])}},D=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},j=Object.defineProperty,z={f:u?j:function(t,e,n){if(D(t),e=C(e,!0),D(n),S)try{return j(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},L=u?function(t,e,n){return z.f(t,e,g(1,n))}:function(t,e,n){return t[e]=n,t},P=function(t,e){try{L(s,t,e)}catch(n){s[t]=e}return e},E="__core-js_shared__",O=s[E]||P(E,{}),Z=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(t){return Z.call(t)});var B,G,R,_=O.inspectSource,W=s.WeakMap,Y="function"==typeof W&&/native code/.test(_(W)),U=o(function(t){(t.exports=function(t,e){return O[t]||(O[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.3",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),F=0,X=Math.random(),V=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++F+X).toString(36)},H=U("keys"),J=function(t){return H[t]||(H[t]=V(t))},Q={},K=s.WeakMap;if(Y){var q=O.state||(O.state=new K),$=q.get,tt=q.has,et=q.set;B=function(t,e){return e.facade=t,et.call(q,t,e),e},G=function(t){return $.call(q,t)||{}},R=function(t){return tt.call(q,t)}}else{var nt=J("state");Q[nt]=!0,B=function(t,e){return e.facade=t,L(t,nt,e),e},G=function(t){return w(t,nt)?t[nt]:{}},R=function(t){return w(t,nt)}}var it,rt={set:B,get:G,has:R,enforce:function(t){return R(t)?G(t):B(t,{})},getterFor:function(t){return function(e){var n;if(!y(e)||(n=G(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},ot=o(function(t){var e=rt.get,n=rt.enforce,i=String(String).split("String");(t.exports=function(t,e,r,o){var a,l=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||w(r,"name")||L(r,"name",e),(a=n(r)).source||(a.source=i.join("string"==typeof e?e:""))),t!==s?(l?!c&&t[e]&&(u=!0):delete t[e],u?t[e]=r:L(t,e,r)):u?t[e]=r:P(e,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||_(this)})}),at=s,st=function(t){return"function"==typeof t?t:void 0},lt=function(t,e){return arguments.length<2?st(at[t])||st(s[t]):at[t]&&at[t][e]||s[t]&&s[t][e]},ut=Math.ceil,ct=Math.floor,ht=function(t){return isNaN(t=+t)?0:(0<t?ct:ut)(t)},ft=Math.min,gt=function(t){return 0<t?ft(ht(t),9007199254740991):0},dt=Math.max,pt=Math.min,mt=function(t){return function(e,n,i){var r,o,a,s=A(e),l=gt(s.length),u=(r=l,(o=ht(i))<0?dt(o+r,0):pt(o,r));if(t&&n!=n){for(;u<l;)if((a=s[u++])!=a)return!0}else for(;u<l;u++)if((t||u in s)&&s[u]===n)return t||u||0;return!t&&-1}},vt={includes:mt(!0),indexOf:mt(!1)},It=vt.indexOf,At=function(t,e){var n,i=A(t),r=0,o=[];for(n in i)!w(Q,n)&&w(i,n)&&o.push(n);for(;e.length>r;)w(i,n=e[r++])&&(~It(o,n)||o.push(n));return o},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ct=yt.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return At(t,Ct)}},wt={f:Object.getOwnPropertySymbols},xt=lt("Reflect","ownKeys")||function(t){var e=bt.f(D(t)),n=wt.f;return n?e.concat(n(t)):e},Nt=function(t,e){for(var n=xt(e),i=z.f,r=T.f,o=0;o<n.length;o++){var a=n[o];w(t,a)||i(t,a,r(e,a))}},Mt=/#|\.prototype\./,St=function(t,e){var n=Tt[kt(t)];return n==jt||n!=Dt&&("function"==typeof e?l(e):!!e)},kt=St.normalize=function(t){return String(t).replace(Mt,".").toLowerCase()},Tt=St.data={},Dt=St.NATIVE="N",jt=St.POLYFILL="P",zt=St,Lt=T.f,Pt=function(t,e){var n,i,r,o,a,l=t.target,u=t.global,c=t.stat;if(n=u?s:c?s[l]||P(l,{}):(s[l]||{}).prototype)for(i in e){if(o=e[i],r=t.noTargetGet?(a=Lt(n,i))&&a.value:n[i],!zt(u?i:l+(c?".":"#")+i,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;Nt(o,r)}(t.sham||r&&r.sham)&&L(o,"sham",!0),ot(n,i,o,t)}},Et=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())}),Ot=Et&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Zt=U("wks"),Bt=s.Symbol,Gt=Ot?Bt:Bt&&Bt.withoutSetter||V,Rt=function(t){return w(Zt,t)||(Et&&w(Bt,t)?Zt[t]=Bt[t]:Zt[t]=Gt("Symbol."+t)),Zt[t]},_t=Object.keys||function(t){return At(t,yt)},Wt=u?Object.defineProperties:function(t,e){D(t);for(var n,i=_t(e),r=i.length,o=0;o<r;)z.f(t,n=i[o++],e[n]);return t},Yt=lt("document","documentElement"),Ut="prototype",Ft=J("IE_PROTO"),Xt=function(){},Vt=function(t){return"<script>"+t+"<\/script>"},Ht=function(){try{it=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Ht=it?function(t){t.write(Vt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(it):((e=M("iframe")).style.display="none",Yt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Vt("document.F=Object")),t.close(),t.F);for(var n=yt.length;n--;)delete Ht[Ut][yt[n]];return Ht()};Q[Ft]=!0;var Jt=Object.create||function(t,e){var n;return null!==t?(Xt[Ut]=D(t),n=new Xt,Xt[Ut]=null,n[Ft]=t):n=Ht(),void 0===e?n:Wt(n,e)},Qt=Rt("unscopables"),Kt=Array.prototype;null==Kt[Qt]&&z.f(Kt,Qt,{configurable:!0,value:Jt(null)});var qt=function(t){Kt[Qt][t]=!0},$t=Object.defineProperty,te={},ee=function(t){throw t},ne=function(t,e){if(w(te,t))return te[t];e||(e={});var n=[][t],i=!!w(e,"ACCESSORS")&&e.ACCESSORS,r=w(e,0)?e[0]:ee,o=w(e,1)?e[1]:void 0;return te[t]=!!n&&!l(function(){if(i&&!u)return!0;var t={length:-1};i?$t(t,1,{enumerable:!0,get:ee}):t[1]=1,n.call(t,r,o)})},ie=vt.includes,re=ne("indexOf",{ACCESSORS:!0,1:0});Pt({target:"Array",proto:!0,forced:!re},{includes:function(t){return ie(this,t,1<arguments.length?arguments[1]:void 0)}}),qt("includes");var oe=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},ae=Function.call,se=function(t,e,n){return oe(ae,s[t].prototype[e],n)},le=(se("Array","includes"),function(t){return Object(I(t))}),ue=Array.isArray||function(t){return"Array"==p(t)},ce=Rt("species"),he=function(t,e){var n;return ue(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!ue(n.prototype)?y(n)&&null===(n=n[ce])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},fe=[].push,ge=function(t){var e=1==t,n=2==t,i=3==t,r=4==t,o=6==t,a=7==t,s=5==t||o;return function(l,u,c,h){for(var f,g,d=le(l),p=v(d),m=oe(u,c,3),I=gt(p.length),A=0,y=h||he,C=e?y(l,I):n||a?y(l,0):void 0;A<I;A++)if((s||A in p)&&(g=m(f=p[A],A,d),t))if(e)C[A]=g;else if(g)switch(t){case 3:return!0;case 5:return f;case 6:return A;case 2:fe.call(C,f)}else switch(t){case 4:return!1;case 7:fe.call(C,f)}return o?-1:i||r?r:C}},de={forEach:ge(0),map:ge(1),filter:ge(2),some:ge(3),every:ge(4),find:ge(5),findIndex:ge(6),filterOut:ge(7)},pe=de.find,me="find",ve=!0,Ie=ne(me);me in[]&&Array(1)[me](function(){ve=!1}),Pt({target:"Array",proto:!0,forced:ve||!Ie},{find:function(t){return pe(this,t,1<arguments.length?arguments[1]:void 0)}}),qt(me),se("Array","find");var Ae,ye,Ce,be=function(t){return function(e,n){var i,r,o=String(I(e)),a=ht(n),s=o.length;return a<0||s<=a?t?"":void 0:(i=o.charCodeAt(a))<55296||56319<i||a+1===s||(r=o.charCodeAt(a+1))<56320||57343<r?t?o.charAt(a):i:t?o.slice(a,a+2):r-56320+(i-55296<<10)+65536}},we={codeAt:be(!1),charAt:be(!0)},xe=!l(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Ne=J("IE_PROTO"),Me=Object.prototype,Se=xe?Object.getPrototypeOf:function(t){return t=le(t),w(t,Ne)?t[Ne]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Me:null},ke=Rt("iterator"),Te=!1;[].keys&&("next"in(Ce=[].keys())?(ye=Se(Se(Ce)))!==Object.prototype&&(Ae=ye):Te=!0),(null==Ae||l(function(){var t={};return Ae[ke].call(t)!==t}))&&(Ae={}),w(Ae,ke)||L(Ae,ke,function(){return this});var De={IteratorPrototype:Ae,BUGGY_SAFARI_ITERATORS:Te},je=z.f,ze=Rt("toStringTag"),Le=function(t,e,n){t&&!w(t=n?t:t.prototype,ze)&&je(t,ze,{configurable:!0,value:e})},Pe={},Ee=De.IteratorPrototype,Oe=function(){return this},Ze=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,i){return D(n),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),Be=De.IteratorPrototype,Ge=De.BUGGY_SAFARI_ITERATORS,Re=Rt("iterator"),_e="values",We="entries",Ye=function(){return this},Ue=we.charAt,Fe="String Iterator",Xe=rt.set,Ve=rt.getterFor(Fe);!function(t,e,n,i,r,o,a){var s,l,u;l=function(){var t,e=Ve(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=Ue(n,i),e.index+=t.length,{value:t,done:!1})},u=e+" Iterator",(s=n).prototype=Jt(Ee,{next:g(1,l)}),Le(s,u,!1),Pe[u]=Oe;var c,h=function(t){if(t===r&&p)return p;if(!Ge&&t in f)return f[t];switch(t){case"keys":case _e:case We:return function(){return new n(this,t)}}return function(){return new n(this)}},f=t.prototype,d=f[Re]||f["@@iterator"]||r,p=!Ge&&d||h(r);d&&(c=Se(d.call(new t)),Be!==Object.prototype&&c.next&&(Se(c)!==Be&&(Ze?Ze(c,Be):"function"!=typeof c[Re]&&L(c,Re,Ye)),Le(c,"String Iterator",!0))),f[Re]!==p&&L(f,Re,p),Pe[e]=p}(String,"String",function(t){Xe(this,{type:Fe,string:String(t),index:0})});var He=function(t,e,n,i){try{return i?e(D(n)[0],n[1]):e(n)}catch(e){throw function(t){var e=t.return;void 0!==e&&D(e.call(t)).value}(t),e}},Je=Rt("iterator"),Qe=Array.prototype,Ke=function(t,e,n){var i=C(e);i in t?z.f(t,i,g(0,n)):t[i]=n},qe={};qe[Rt("toStringTag")]="z";var $e="[object z]"===String(qe),tn=Rt("toStringTag"),en="Arguments"==p(function(){return arguments}()),nn=$e?p:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),tn))?n:en?p(e):"Object"==(i=p(e))&&"function"==typeof e.callee?"Arguments":i},rn=Rt("iterator"),on=Rt("iterator"),an=!1;try{var sn=0,ln={next:function(){return{done:!!sn++}},return:function(){an=!0}};ln[on]=function(){return this},Array.from(ln,function(){throw 2})}catch(t){}var un=!function(t,e){if(!an)return!1;var n=!1;try{var i={};i[on]=function(){return{next:function(){return{done:n=!0}}}},function(t){Array.from(t)}(i)}catch(t){}return n}();Pt({target:"Array",stat:!0,forced:un},{from:function(t){var e,n,i,r,o,a,s,l=le(t),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?arguments[1]:void 0,f=void 0!==h,g=function(t){if(null!=t)return t[rn]||t["@@iterator"]||Pe[nn(t)]}(l),d=0;if(f&&(h=oe(h,2<c?arguments[2]:void 0,2)),null!=g&&(u!=Array||void 0===(s=g)||Pe.Array!==s&&Qe[Je]!==s))for(o=(r=g.call(l)).next,n=new u;!(i=o.call(r)).done;d++)a=f?He(r,h,[i.value,d],!0):i.value,Ke(n,d,a);else for(n=new u(e=gt(l.length));d<e;d++)a=f?h(l[d],d):l[d],Ke(n,d,a);return n.length=d,n}}),at.Array.from;var cn=de.findIndex,hn="findIndex",fn=!0,gn=ne(hn);hn in[]&&Array(1)[hn](function(){fn=!1}),Pt({target:"Array",proto:!0,forced:fn||!gn},{findIndex:function(t){return cn(this,t,1<arguments.length?arguments[1]:void 0)}}),qt(hn),se("Array","findIndex"),o(function(t,e){!function(){var t=e,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}(i.prototype=new Error).name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var e,r,o=String(t),a=0,s=n,l="";o.charAt(0|a)||(s="=",a%1);l+=s.charAt(63&e>>8-a%1*8)){if(255<(r=o.charCodeAt(a+=.75)))throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return l}),t.atob||(t.atob=function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,a=0,s=0,l="";o=e.charAt(s++);~o&&(r=a%4?64*r+o:o,a++%4)?l+=String.fromCharCode(255&r>>(-2*a&6)):0)o=n.indexOf(o);return l})}()}),Pt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),at.Number.isNaN;var dn=s.isFinite,pn=Number.isFinite||function(t){return"number"==typeof t&&dn(t)};Pt({target:"Number",stat:!0},{isFinite:pn}),at.Number.isFinite;var mn=Rt("match"),vn=function(t){if(y(e=t)&&(void 0!==(n=e[mn])?n:"RegExp"==p(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t},In=Rt("match"),An=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[In]=!1,"/./"[t](e)}catch(t){}}return!1};Pt({target:"String",proto:!0,forced:!An("includes")},{includes:function(t){return!!~String(I(this)).indexOf(vn(t),1<arguments.length?arguments[1]:void 0)}}),se("String","includes");var yn,Cn=T.f,bn="".startsWith,wn=Math.min,xn=An("startsWith"),Nn=!(xn||!(yn=Cn(String.prototype,"startsWith"))||yn.writable);Pt({target:"String",proto:!0,forced:!Nn&&!xn},{startsWith:function(t){var e=String(I(this));vn(t);var n=gt(wn(1<arguments.length?arguments[1]:void 0,e.length)),i=String(t);return bn?bn.call(e,i,n):e.slice(n,n+i.length)===i}}),se("String","startsWith"),function(){function t(t,e){return this.slice(t,e)}function e(t,e){arguments.length<2&&(e=0);for(var n=0,i=t.length;n<i;++n,++e)this[e]=255&t[n]}function n(n){var i;if("number"==typeof n){i=new Array(n);for(var r=0;r<n;++r)i[r]=0}else i=n.slice(0);return i.subarray=t,(i.buffer=i).byteLength=i.length,i.set=e,"object"==typeof n&&n.buffer&&(i.buffer=n.buffer),i}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=n,window.Uint32Array=n,window.Int32Array=n)}();var Mn=Math.round,Sn=Math.floor,kn=Math.PI,Tn=function(t){return t%360+(t<0?360:0)},Dn=function(t,e){return e*Mn(t/e)},jn=function(t){return 180*t/kn%360},zn=function(t,e){return(t=(e=e||!1)?t:t%360)*kn/180},Ln=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){var n=t;t=e,e=n}return Sn(Math.random()*(e-t+1)+t)},Pn=Math.cos,En=Math.sin,On=Math.atan2,Zn=function(t,e){var n=zn(t.y),i=zn(e.y),r=t.x,o=e.x,a=zn(o-r),s=En(a)*Pn(i),l=Pn(n)*En(i)-En(n)*Pn(i)*Pn(a),u=jn(On(s,l))-22.5;return u<0&&(u+=360),["NE","E","SE","S","SW","W","NW","N"][u=parseInt(u/45)]},Bn=function(t,e){var n=t.x,i=t.y;return(n-=e.x)*n+(i-=e.y)*i},Gn=function(t,e){return Math.sqrt(Bn(t,e))},Rn=Math.abs,_n=Math.cos,Wn=Math.sin,Yn=Math.sqrt,Un=Math.min,Fn=Math.max,Xn=Math.atan2,Vn=Math.round,Hn=Math.pow,Jn=Math.PI,Qn=function(t,e){if(!(this instanceof Qn))return new Qn(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};Qn.fromPolar=function(t,e,n){n=new Qn(n);var i=Rn(t*_n(e)),r=Rn(t*Wn(e)),o=Tn(jn(e));return o<90?r=-r:o<180?(i=-i,r=-r):o<270&&(i=-i),new Qn(n.x+i,n.y+r)},Qn.random=function(t,e,n,i){return new Qn(Ln(t,e),Ln(n,i))},Qn.prototype={chooseClosest:function(t){var e=t.length;if(1===e)return new Qn(t[0]);for(var n=null,i=1/0,r=0;r<e;r++){var o=new Qn(t[r]),a=this.squaredDistance(o);a<i&&(n=o,i=a)}return n},adhereToRect:function(t){return t.containsPoint(this)||(this.x=Un(Fn(this.x,t.x),t.x+t.width),this.y=Un(Fn(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return Zn(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new Qn(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new Qn(this.x-(t||0),this.y-(e||0))},distance:function(t){return Gn(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,i=this.y;return new Qn((1-e)*n+e*t.x,(1-e)*i+e*t.y)},magnitude:function(){return Yn(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Rn(t.x-this.x)+Rn(t.y-this.y)},move:function(t,e){var n=zn(new Qn(t).theta(this));return this.offset(_n(n)*e,-Wn(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new Qn(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new Qn(0,0),e=zn(Tn(-e));var n=_n(e),i=Wn(e),r=n*(this.x-t.x)-i*(this.y-t.y)+t.x,o=i*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=r,this.y=o,this},round:function(t){var e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Hn(10,t)}return this.x=Vn(this.x*e)/e,this.y=Vn(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new Qn(n)||new Qn(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=Dn(this.x,t),this.y=Dn(this.y,e||t),this},squaredDistance:function(t){return Bn(this,t)},theta:function(t){var e=-((t=new Qn(t)).y-this.y),n=t.x-this.x,i=Xn(e,n);return i<0&&(i=2*Jn+i),180*i/Jn},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new Qn(t)||new Qn(0,0);var e=this.x,n=this.y;return this.x=Yn((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=zn(t.theta(new Qn(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new Qn(0,0).angleBetween(this,t)}},Qn.prototype.translate=Qn.prototype.offset;var Kn=Qn,qn=Math.max,$n=Math.min,ti=function(t,e){return this instanceof ti?t instanceof ti?new ti(t.start,t.end):(this.start=new Qn(t),void(this.end=new Qn(e))):new ti(t,e)};ti.prototype={angle:function(){var t=new Qn(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=$n(this.start.x,this.end.x),e=$n(this.start.y,this.end.y),n=qn(this.start.x,this.end.x),i=qn(this.start.y,this.end.y);return new di(t,e,n-t,i-e)},bearing:function(){return Zn(this.start,this.end)},clone:function(){return new ti(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new ti(this.start,t).vector()),n=$n(1,qn(0,e/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var i=this.length();return!(new ti(e,t).length()>i||new ti(t,n).length()>i)},divideAt:function(t){var e=this.pointAt(t);return[new ti(this.start,e),new ti(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new ti(this.start,e),new ti(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof ti&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new Qn(this.end.x-this.start.x,this.end.y-this.start.y),n=new Qn(t.end.x-t.start.x,t.end.y-t.start.y),i=e.x*n.y-e.y*n.x,r=new Qn(t.start.x-this.start.x,t.start.y-this.start.y),o=r.x*n.y-r.y*n.x,a=r.x*e.y-r.y*e.x;if(0===i||o*i<0||a*i<0)return null;if(0<i){if(i<o||i<a)return null}else if(o<i||a<i)return null;return[new Qn(this.start.x+o*e.x/i,this.start.y+o*e.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Gn(this.start,this.end)},midpoint:function(){return new Qn((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){var e=this.clone();if(!this.isDifferentiable())return e;var n=e.start,i=e.end,r=n.clone().rotate(i,270),o=i.clone().rotate(n,90);return n.move(o,t),i.move(r,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():1<=t?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,i=!0;t<0&&(i=!1,t=-t);var r=this.length();return r<=t?i?n.clone():e.clone():this.pointAt((i?t:r-t)/r)},pointOffset:function(t){t=new Qn(t);var e=this.start,n=this.end;return((n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return Bn(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,i=this.pointAt(t),r=new ti(e,n);return r.translate(i.x-e.x,i.y-e.y),r},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,i=this.pointAtLength(t),r=new ti(e,n);return r.translate(i.x-e.x,i.y-e.y),r},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new Qn(this.end.x-this.start.x,this.end.y-this.start.y)}},ti.prototype.intersection=ti.prototype.intersect;var ei=ti,ni=Math.sqrt,ii=Math.round,ri=Math.pow,oi=function(t,e,n){return this instanceof oi?t instanceof oi?new oi(new Qn(t.x,t.y),t.a,t.b):(t=new Qn(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new oi(t,e,n)};oi.fromRect=function(t){return t=new di(t),new oi(t.center(),t.width/2,t.height/2)},oi.prototype={bbox:function(){return new di(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new Qn(this.x,this.y)},clone:function(){return new oi(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,i=t.end,r=this.a,o=this.b,a=t.vector(),s=n.difference(new Qn(this)),l=new Qn(a.x/(r*r),a.y/(o*o)),u=new Qn(s.x/(r*r),s.y/(o*o)),c=a.dot(l),h=a.dot(u),f=h*h-c*(s.dot(u)-1);if(f<0)return null;if(0<f){var g=ni(f),d=(-h-g)/c,p=(-h+g)/c;if((d<0||1<d)&&(p<0||1<p))return null;0<=d&&d<=1&&e.push(n.lerp(i,d)),0<=p&&p<=1&&e.push(n.lerp(i,p))}else{var m=-h/c;if(!(0<=m&&m<=1))return null;e.push(n.lerp(i,m))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new Qn(t),e&&t.rotate(new Qn(this.x,this.y),e);var n,i=t.x-this.x,r=t.y-this.y;if(0===i)return n=this.bbox().pointNearestToPoint(t),e?n.rotate(new Qn(this.x,this.y),-e):n;var o=r/i,a=o*o,s=this.a*this.a,l=this.b*this.b,u=ni(1/(1/s+a/l)),c=o*(u=i<0?-u:u);return n=new Qn(this.x+u,this.y+c),e?n.rotate(new Qn(this.x,this.y),-e):n},normalizedDistance:function(t){var e=t.x,n=t.y,i=this.a,r=this.b,o=this.x,a=this.y;return(e-o)*(e-o)/(i*i)+(n-a)*(n-a)/(r*r)},round:function(t){var e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=ri(10,t)}return this.x=ii(this.x*e)/e,this.y=ii(this.y*e)/e,this.a=ii(this.a*e)/e,this.b=ii(this.b*e)/e,this},tangentTheta:function(t){var e,n,i=t.x,r=t.y,o=this.a,a=this.b,s=this.bbox().center(),l=s.x,u=s.y,c=i>s.x+o/2,h=i<s.x-o/2;return c||h?n=o*o/(i-l)-o*o*(r-u)*((e=i>s.x?r-30:r+30)-u)/(a*a*(i-l))+l:e=a*a/(r-u)-a*a*(i-l)*((n=r>s.y?i+30:i-30)-l)/(o*o*(r-u))+u,new Qn(n,e).theta(t)},toString:function(){return new Qn(this.x,this.y).toString()+" "+this.a+" "+this.b}};var ai=oi,si=Math.abs,li=Math.cos,ui=Math.sin,ci=Math.min,hi=Math.max,fi=Math.round,gi=Math.pow,di=function(t,e,n,i){if(!(this instanceof di))return new di(t,e,n,i);Object(t)===t&&(e=t.y,n=t.width,i=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===i?0:i};di.fromEllipse=function(t){return t=new oi(t),new di(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},di.fromPointUnion=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return null;var n,i,r,o,a=new Qn;n=i=1/0,r=o=-1/0;for(var s=0;s<t.length;s++){a.update(t[s]);var l=a.x,u=a.y;l<n&&(n=l),r<l&&(r=l),u<i&&(i=u),o<u&&(o=u)}return new di(n,i,r-n,o-i)},di.fromRectUnion=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return null;var n,i,r,o,a=new di;n=i=1/0,r=o=-1/0;for(var s=0;s<t.length;s++){a.update(t[s]);var l=a.x,u=a.y,c=l+a.width,h=u+a.height;l<n&&(n=l),r<c&&(r=c),u<i&&(i=u),o<h&&(o=h)}return new di(n,i,r-n,o-i)},di.prototype={bbox:function(t){if(!t)return this.clone();var e=zn(t),n=si(ui(e)),i=si(li(e)),r=this.width*i+this.height*n,o=this.width*n+this.height*i;return new di(this.x+(this.width-r)/2,this.y+(this.height-o)/2,r,o)},bottomLeft:function(){return new Qn(this.x,this.y+this.height)},bottomLine:function(){return new ti(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new Qn(this.x+this.width/2,this.y+this.height)},center:function(){return new Qn(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new di(this)},containsPoint:function(t){return(t=new Qn(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new di(this).normalize(),n=new di(t).normalize(),i=e.width,r=e.height,o=n.width,a=n.height;if(!(i&&r&&o&&a))return!1;var s=e.x,l=e.y,u=n.x,c=n.y;return o+=u,i+=s,a+=c,r+=l,s<=u&&o<=i&&l<=c&&a<=r},corner:function(){return new Qn(this.x+this.width,this.y+this.height)},equals:function(t){var e=new di(this).normalize(),n=new di(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),i=t.origin(),r=t.corner();if(r.x<=e.x||r.y<=e.y||i.x>=n.x||i.y>=n.y)return null;var o=hi(e.x,i.x),a=hi(e.y,i.y);return new di(o,a,ci(n.x,r.x)-o,ci(n.y,r.y)-a)},intersectionWithLine:function(t){var e,n,i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],r=[],o=[],a=i.length;for(n=0;n<a;n++)null!==(e=t.intersect(i[n]))&&o.indexOf(e.toString())<0&&(r.push(e),o.push(e.toString()));return 0<r.length?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new Qn(t);var n,i=new Qn(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(i,e);for(var r=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new ti(i,t),a=r.length-1;0<=a;--a){var s=r[a].intersection(o);if(null!==s){n=s;break}}return n&&e&&n.rotate(i,-e),n},leftLine:function(){return new ti(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new Qn(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var n,i,r,o,a,s,l,u;t=new di(t),e||(e=t.center());var c=e.x,h=e.y;n=i=r=o=a=s=l=u=1/0;var f=t.topLeft();f.x<c&&(n=(this.x-c)/(f.x-c)),f.y<h&&(a=(this.y-h)/(f.y-h));var g=t.bottomRight();g.x>c&&(i=(this.x+this.width-c)/(g.x-c)),g.y>h&&(s=(this.y+this.height-h)/(g.y-h));var d=t.topRight();d.x>c&&(r=(this.x+this.width-c)/(d.x-c)),d.y<h&&(l=(this.y-h)/(d.y-h));var p=t.bottomLeft();return p.x<c&&(o=(this.x-c)/(p.x-c)),p.y>h&&(u=(this.y+this.height-h)/(p.y-h)),{sx:ci(n,i,r,o),sy:ci(a,s,l,u)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return ci(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,i=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,i=-this.height),this.x=t,this.y=e,this.width=n,this.height=i,this},offset:function(t,e){return Qn.prototype.offset.call(this,t,e)},origin:function(){return new Qn(this.x,this.y)},pointNearestToPoint:function(t){if(t=new Qn(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new Qn(this.x+this.width,t.y);case"left":return new Qn(this.x,t.y);case"bottom":return new Qn(t.x,this.y+this.height);case"top":return new Qn(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new ti(this.topRight(),this.bottomRight())},rightMiddle:function(){return new Qn(this.x+this.width,this.y+this.height/2)},round:function(t){var e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=gi(10,t)}return this.x=fi(this.x*e)/e,this.y=fi(this.y*e)/e,this.width=fi(this.width*e)/e,this.height=fi(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new Qn(t)).x-this.x,n=this.x+this.width-t.x,i=t.y-this.y,r=e,o="left";return n<r&&(r=n,o="right"),i<r&&(r=i,o="top"),this.y+this.height-t.y<r&&(o="bottom"),o},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),i=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=i.x-n.x,this.height=i.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new ti(this.topLeft(),this.topRight())},topMiddle:function(){return new Qn(this.x+this.width/2,this.y)},topRight:function(){return new Qn(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return di.fromRectUnion(this,t)},update:function(t,e,n,i){return Object(t)===t&&(e=t.y,n=t.width,i=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=i||0,this}},di.prototype.bottomRight=di.prototype.corner,di.prototype.topLeft=di.prototype.origin,di.prototype.translate=di.prototype.offset;var pi=di,mi=Math.abs,vi=function(t){return this instanceof vi?"string"==typeof t?new vi.parse(t):void(this.points=Array.isArray(t)?t.map(Qn):[]):new vi(t)};vi.parse=function(t){if(""===(t=t.trim()))return new vi;for(var e=[],n=t.split(/\s*,\s*|\s+/),i=n.length,r=0;r<i;r+=2)e.push({x:+n[r],y:+n[r+1]});return new vi(e)},vi.prototype={bbox:function(){var t=1/0,e=-1/0,n=1/0,i=-1/0,r=this.points,o=r.length;if(0===o)return null;for(var a=0;a<o;a++){var s=r[a],l=s.x,u=s.y;l<t&&(t=l),e<l&&(e=l),u<n&&(n=u),i<u&&(i=u)}return new di(t,n,e-t,i-n)},clone:function(){var t=this.points,e=t.length;if(0===e)return new vi;for(var n=[],i=0;i<e;i++){var r=t[i].clone();n.push(r)}return new vi(n)},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,n=this.points,i=n.length;if(0===i)return 0;if(1===i)return 0;for(var r=1/0,o=0,a=i-1,s=0;s<a;s++){var l=new ti(n[s],n[s+1]),u=l.length(),c=l.closestPointNormalizedLength(t),h=l.pointAt(c).squaredDistance(t);h<r&&(r=h,e=o+c*u),o+=u}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var n=this.length();return 0===n?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(0===n)return!1;for(var i=t.x,r=t.y,o=n-1,a=0,s=0;a<n;a++){var l=e[o],u=e[a];if(t.equals(l))return!0;var c=new ti(l,u);if(c.containsPoint(t))return!0;if(r<=l.y&&r>u.y||r>l.y&&r<=u.y){var h=l.x-i>u.x-i?l.x-i:u.x-i;if(0<=h){var f=new Qn(i+h,r),g=new ti(t,f);c.intersect(g)&&s++}}o=a}return s%2==1},convexHull:function(){var t,e,n,i=this.points,r=i.length;if(0===r)return new vi;for(t=0;t<r;t++)(void 0===n||i[t].y<n.y||i[t].y===n.y&&i[t].x>n.x)&&(n=i[t]);var o=[];for(t=0;t<r;t++){var a=n.theta(i[t]);0===a&&(a=360);var s=[i[t],t,a];o.push(s)}if(o.sort(function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n}),2<o.length){var l=o[o.length-1];o.unshift(l)}for(var u,c,h,f,g,d,p,m={},v=[];0!==o.length;)if(c=(u=o.pop())[0],!m.hasOwnProperty(u[0]+"@@"+u[1]))for(var I=!1;!I;)if(v.length<2)v.push(u),I=!0;else{f=(h=v.pop())[0];var A=(d=(g=v.pop())[0]).cross(f,c);if(A<0)v.push(g),v.push(h),v.push(u),I=!0;else if(0===A){var y=f.angleBetween(d,c);mi(y-180)<1e-10||f.equals(c)||d.equals(f)?(m[h[0]+"@@"+h[1]]=f,v.push(g)):mi((y+1)%360-1)<1e-10&&(v.push(g),o.push(h))}else m[h[0]+"@@"+h[1]]=f,v.push(g)}2<v.length&&v.pop();var C=-1;for(e=v.length,t=0;t<e;t++){var b=v[t][1];(void 0===p||b<p)&&(p=b,C=t)}var w=[];if(0<C){var x=v.slice(C),N=v.slice(0,C);w=x.concat(N)}else w=v;var M=[];for(e=w.length,t=0;t<e;t++)M.push(w[t][0]);return new vi(M)},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,i=e.length;if(n.length!==i)return!1;for(var r=0;r<i;r++){var o=e[r],a=t.points[r];if(!o.equals(a))return!1}return!0},intersectionWithLine:function(t){for(var e=new ti(t),n=[],i=this.points,r=0,o=i.length-1;r<o;r++){var a=i[r],s=i[r+1],l=new ti(a,s),u=e.intersectionWithLine(l);u&&n.push(u[0])}return 0<n.length?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var n=e-1,i=0;i<n;i++){var r=t[i],o=t[i+1];if(new ti(r,o).isDifferentiable())return!0}return!1},length:function(){var t=this.points,e=t.length;if(0===e)return 0;for(var n=0,i=e-1,r=0;r<i;r++)n+=t[r].distance(t[r+1]);return n},pointAt:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(1<=t)return e[n-1].clone();var i=this.length()*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var i=!0;t<0&&(i=!1,t=-t);for(var r=0,o=n-1,a=0;a<o;a++){var s=i?a:o-1-a,l=e[s],u=e[s+1],c=new ti(l,u),h=l.distance(u);if(t<=r+h)return c.pointAtLength((i?1:-1)*(t-r));r+=h}return(i?e[n-1]:e[0]).clone()},round:function(t){for(var e=this.points,n=e.length,i=0;i<n;i++)e[i].round(t);return this},scale:function(t,e,n){for(var i=this.points,r=i.length,o=0;o<r;o++)i[o].scale(t,e,n);return this},simplify:function(t){void 0===t&&(t={});var e=this.points;if(e.length<3)return this;for(var n=t.threshold||0,i=0;e[i+2];){var r=i+1,o=i+2,a=e[i],s=e[r],l=e[o];new ti(a,l).closestPoint(s).distance(s)<=n?e.splice(r,1):i+=1}return this},tangentAt:function(t){var e=this.points.length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),1<t&&(t=1);var n=this.length()*t;return this.tangentAtLength(n)},tangentAtLength:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return null;var i,r=!0;t<0&&(r=!1,t=-t);for(var o=0,a=n-1,s=0;s<a;s++){var l=r?s:a-1-s,u=e[l],c=e[l+1],h=new ti(u,c),f=u.distance(c);if(h.isDifferentiable()){if(t<=o+f)return h.tangentAtLength((r?1:-1)*(t-o));i=h}o+=f}if(i){var g=r?1:0;return i.tangentAt(g)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,i=n.length,r=0;r<i;r++)n[r].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var n="",i=0;i<e;i++){var r=t[i];n+=r.x+","+r.y+" "}return n.trim()}},Object.defineProperty(vi.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(vi.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});var Ii=Math.abs,Ai=Math.sqrt,yi=Math.min,Ci=Math.max,bi=Math.pow,wi=function(t,e,n,i){return this instanceof wi?t instanceof wi?new wi(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new Qn(t),this.controlPoint1=new Qn(e),this.controlPoint2=new Qn(n),void(this.end=new Qn(i))):new wi(t,e,n,i)};wi.throughPoints=function(){function t(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var o=1;o<e;o++)i[o]=1/r,r=(o<e-1?4:3.5)-i[o],n[o]=(t[o]-n[o-1])/r;for(o=1;o<e;o++)n[e-o-1]-=i[e-o]*n[e-o];return n}return function(e){if(!e||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var n=function(e){var n,i=[],r=[],o=e.length-1;if(1==o)return i[0]=new Qn((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=new Qn(2*i[0].x-e[0].x,2*i[0].y-e[0].y),[i,r];var a=[];for(n=1;n<o-1;n++)a[n]=4*e[n].x+2*e[n+1].x;a[0]=e[0].x+2*e[1].x,a[o-1]=(8*e[o-1].x+e[o].x)/2;var s=t(a);for(n=1;n<o-1;++n)a[n]=4*e[n].y+2*e[n+1].y;a[0]=e[0].y+2*e[1].y,a[o-1]=(8*e[o-1].y+e[o].y)/2;var l=t(a);for(n=0;n<o;n++)i.push(new Qn(s[n],l[n])),n<o-1?r.push(new Qn(2*e[n+1].x-s[n+1],2*e[n+1].y-l[n+1])):r.push(new Qn((e[o].x+s[o-1])/2,(e[o].y+l[o-1])/2));return[i,r]}(e),i=[],r=n[0].length,o=0;o<r;o++){var a=new Qn(n[0][o].x,n[0][o].y),s=new Qn(n[1][o].x,n[1][o].y);i.push(new wi(e[o],a,s,e[o+1]))}return i}}(),wi.prototype={bbox:function(){for(var t,e,n,i,r,o,a,s,l=this.start,u=this.controlPoint1,c=this.controlPoint2,h=this.end,f=l.x,g=l.y,d=u.x,p=u.y,m=c.x,v=c.y,I=h.x,A=h.y,y=new Array,C=new Array,b=[new Array,new Array],w=0;w<2;++w)if(n=0===w?(e=6*f-12*d+6*m,t=-3*f+9*d-9*m+3*I,3*d-3*f):(e=6*g-12*p+6*v,t=-3*g+9*p-9*v+3*A,3*p-3*g),Ii(t)<1e-12){if(Ii(e)<1e-12)continue;0<(i=-n/e)&&i<1&&C.push(i)}else s=Ai(a=e*e-4*n*t),a<0||(0<(r=(-e+s)/(2*t))&&r<1&&C.push(r),0<(o=(-e-s)/(2*t))&&o<1&&C.push(o));for(var x,N,M,S=C.length,k=S;S--;)N=(x=1-(i=C[S]))*x*x*f+3*x*x*i*d+3*x*i*i*m+i*i*i*I,b[0][S]=N,M=x*x*x*g+3*x*x*i*p+3*x*i*i*v+i*i*i*A,b[1][S]=M,y[S]={X:N,Y:M};C[k]=0,C[k+1]=1,y[k]={X:f,Y:g},y[k+1]={X:I,Y:A},b[0][k]=f,b[1][k]=g,b[0][k+1]=I,b[1][k+1]=A,C.length=k+2,b[0].length=k+2,b[1].length=k+2,y.length=k+2;var T=yi.apply(null,b[0]),D=yi.apply(null,b[1]),j=Ci.apply(null,b[0]),z=Ci.apply(null,b[1]);return new di(T,D,j-T,z-D)},clone:function(){return new wi(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},r=this.closestPointLength(t,i);if(!r)return 0;var o=this.length(i);return 0===o?0:r/o},closestPointT:function(t,e){for(var n,i,r,o,a,s,l,u=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.subdivisions?this.getSubdivisions({precision:u}):e.subdivisions,h=c.length,f=h?1/h:0,g=0;g<h;g++){var d=c[g],p=d.start.distance(t),m=d.end.distance(t),v=p+m;(!l||v<l)&&(i=g*f,r=(g+1)*f,o=p,a=m,s=(n=d).start.distance(d.end),l=v)}for(var I=bi(10,-u);;){var A=o?Ii(o-a)/o:0,y=a?Ii(o-a)/a:0;if(A<I||y<I||!o||o<s*I||!a||a<s*I)return o<=a?i:r;var C=n.divide(.5);f/=2;var b=C[0].start.distance(t),w=C[0].end.distance(t),x=b+w,N=C[1].start.distance(t),M=C[1].end.distance(t);a=x<=N+M?(n=C[0],r-=f,o=b,w):(n=C[1],i+=f,o=N,M)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(1<=t)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,i=this.controlPoint2,r=this.end;if(t<=0)return[new wi(e,e,e,e),new wi(e,n,i,r)];if(1<=t)return[new wi(e,n,i,r),new wi(r,r,r,r)];var o=this.getSkeletonPoints(t),a=o.startControlPoint1,s=o.startControlPoint2,l=o.divider,u=o.dividerControlPoint1,c=o.dividerControlPoint2;return[new wi(e,a,s,l),new wi(l,u,c,r)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,i=this.controlPoint2,r=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:i.clone()};if(1<=t)return{startControlPoint1:n.clone(),startControlPoint2:i.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};var o=new ti(e,n).pointAt(t),a=new ti(n,i).pointAt(t),s=new ti(i,r).pointAt(t),l=new ti(o,a).pointAt(t),u=new ti(a,s).pointAt(t);return{startControlPoint1:o,startControlPoint2:l,divider:new ti(l,u).pointAt(t),dividerControlPoint1:u,dividerControlPoint2:s}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=[new wi(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return n;for(var i=this.endpointDistance(),r=bi(10,-e),o=0;;){o+=1;for(var a=[],s=n.length,l=0;l<s;l++){var u=n[l].divide(.5);a.push(u[0],u[1])}for(var c=0,h=a.length,f=0;f<h;f++)c+=a[f].endpointDistance();if(1<o&&(0!==c?(c-i)/c:0)<r)return a;n=a,i=c}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(i))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,i=0,r=n.length,o=0;o<r;o++)i+=n[o].endpointDistance();return i},lengthAtT:function(t,e){if(t<=0)return 0;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():1<=t?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,i=e.dividerControlPoint1,r=e.divider,o=new ti(n,i);return o.translate(r.x-n.x,r.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(1<=t)return 1;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},r=this.length(i)*t;return this.tAtLength(r,i)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t);for(var i,r,o,a,s,l=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.subdivisions?this.getSubdivisions({precision:l}):e.subdivisions,c={precision:l,subdivisions:u},h=0,f=u.length,g=1/f,d=0;d<f;d++){var p=n?d:f-1-d,m=u[d],v=m.endpointDistance();if(t<=h+v){i=m,r=p*g,o=(p+1)*g,a=n?t-h:v+h-t,s=n?v+h-t:t-h;break}h+=v}if(!i)return n?1:0;for(var I=this.length(c),A=bi(10,-l);;){var y,C;if((0!==I?a/I:0)<A)return r;if((0!==I?s/I:0)<A)return o;var b=i.divide(.5);g/=2;var w=b[0].endpointDistance(),x=b[1].endpointDistance();C=a<=w?(i=b[0],o-=g,w-(y=a)):(i=b[1],r+=g,x-(y=a-w)),a=y,s=C}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,i=[n[0].start.clone()],r=n.length,o=0;o<r;o++){var a=n[o];i.push(a.end.clone())}return i},toPolyline:function(t){return new vi(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},wi.prototype.divide=wi.prototype.divideAtT;var xi=function(t){if(!(this instanceof xi))return new xi(t);if("string"==typeof t)return new xi.parse(t);var e,n;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(n=(t=t.reduce(function(t,e){return t.concat(e)},[])).length,t[0].isSegment)for(e=0;e<n;e++){var i=t[e];this.appendSegment(i)}else{var r=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof ti||o instanceof wi))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(xi.createSegment("M",o.start)),r&&!r.end.equals(o.start)&&this.appendSegment(xi.createSegment("M",o.start)),o instanceof ti?this.appendSegment(xi.createSegment("L",o.end)):o instanceof wi&&this.appendSegment(xi.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),r=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof ti)this.appendSegment(xi.createSegment("M",t.start)),this.appendSegment(xi.createSegment("L",t.end));else if(t instanceof wi)this.appendSegment(xi.createSegment("M",t.start)),this.appendSegment(xi.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof vi))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(n=t.points.length,e=0;e<n;e++){var a=t.points[e];0===e?this.appendSegment(xi.createSegment("M",a)):this.appendSegment(xi.createSegment("L",a))}}};function Ni(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}function Mi(t){var e,n,i=arguments,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(i[e]);if(!t)throw new Error("Missing a parent object.");var o=Object.create(t);for(n=r.length,e=0;e<n;e++){var a,s,l=r[e];for(s in l)l.hasOwnProperty(s)&&(delete o[s],a=Object.getOwnPropertyDescriptor(l,s),Object.defineProperty(o,s,a))}return o}xi.parse=function(t){if(!t)return new xi;for(var e=new xi,n=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),i=n.length,r=0;r<i;r++){var o=n[r].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),a=xi.createSegment.apply(this,o);e.appendSegment(a)}return e},xi.createSegment=function(t){var e=arguments;if(!t)throw new Error("Type must be provided.");var n=xi.segmentTypes[t];if(!n)throw new Error(t+" is not a recognized path segment type.");for(var i=[],r=arguments.length,o=1;o<r;o++)i.push(e[o]);return Ni(n,i)},xi.prototype={appendSegment:function(t){var e,n=this.segments,i=n.length,r=0!==i?n[i-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var o=t.length,a=0;a<o;a++){var s=t[a];e=this.prepareSegment(s,r,null),n.push(e),r=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,r,null),n.push(e)}},bbox:function(){var t,e=this.segments,n=e.length;if(0===n)return null;for(var i=0;i<n;i++){var r=e[i];if(r.isVisible){var o=r.bbox();t=t?t.union(o):o}}if(t)return t;var a=e[n-1];return new di(a.end.x,a.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new xi,i=0;i<e;i++){var r=t[i].clone();n.appendSegment(r)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.closestPointT(t,i);return r?this.lengthAtT(r,i):0},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.closestPointLength(t,i);if(0===r)return 0;var o=this.length(i);return 0===o?0:r/o},closestPointT:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s=1/0,l=0;l<i;l++){var u=n[l],c=a[l];if(u.isVisible){var h=u.closestPointT(t,{precision:o,subdivisions:c}),f=u.pointAtT(h),g=new ti(f,t).squaredLength();g<s&&(r={segmentIndex:l,value:h},s=g)}}return r||{segmentIndex:i-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;for(var r,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s=1/0,l=0;l<i;l++){var u=n[l],c=a[l];if(u.isDifferentiable()){var h=u.closestPointT(t,{precision:o,subdivisions:c}),f=u.pointAtT(h),g=new ti(f,t).squaredLength();g<s&&(r=u.tangentAtT(h),s=g)}}return r||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var i=n.length,r=0,o=0;o<i;o++)n[o].containsPoint(t)&&r++;return r%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.divideAtLength(r,i)},divideAtLength:function(t,e){var n=this.segments.length;if(0===n)return null;var i=!0;t<0&&(i=!1,t=-t);var r,o,a,s,l,u,c,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,f=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):e.segmentSubdivisions,g=0;for(r=0;r<n;r++){var d=i?r:n-1-r;o=this.getSegment(d);var p=f[d],m=o.length({precision:h,subdivisions:p});if(o.isDifferentiable()&&(l=o,u=d,t<=g+m)){s=d,a=o.divideAtLength((i?1:-1)*(t-g),{precision:h,subdivisions:p});break}g+=m}if(!l)return null;a||(s=u,c=i?1:0,a=l.divideAtT(c));var v=this.clone();v.replaceSegment(s,a);var I=s,A=s+1,y=s+2;a[0].isDifferentiable()||(v.removeSegment(I),A-=1,y-=1);var C=v.getSegment(A).start;v.insertSegment(A,xi.createSegment("M",C)),y+=1,a[1].isDifferentiable()||(v.removeSegment(y-1),y-=1);var b=y-I-1;for(r=y;r<v.segments.length;r++){var w=this.getSegment(r-b);if("Z"===(o=v.getSegment(r)).type&&!w.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var x=xi.createSegment("L",w.end);v.replaceSegment(r,x)}}return[new xi(v.segments.slice(0,A)),new xi(v.segments.slice(A))]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,i=e.length;if(n.length!==i)return!1;for(var r=0;r<i;r++){var o=e[r],a=n[r];if(o.type!==a.type||!o.equals(a))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),n<=t||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,n=e.length,i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=[],o=0;o<n;o++){var a=e[o].getSubdivisions({precision:i});r.push(a)}return r},getSubpaths:function(){for(var t=this.clone().validate().segments,e=t.length,n=[],i=0;i<e;i++){var r=t[i];r.isSubpathStart?n.push(new xi(r)):n[n.length-1].appendSegment(r)}return n},insertSegment:function(t,e){var n,i=this.segments,r=i.length;if(t<0&&(t=r+t+1),r<t||t<0)throw new Error("Index out of range.");var o=null,a=null;if(0!==r&&(a=1<=t?(o=i[t-1]).nextSegment:i[0]),Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var s=e.length,l=0;l<s;l++){var u=e[l];n=this.prepareSegment(u,o,a),i.splice(t+l,0,n),o=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,o,a),i.splice(t,0,n)}},intersectionWithLine:function(t,e){var n=null,i=this.toPolylines(e);if(!i)return null;for(var r=0,o=i.length;r<o;r++){var a=i[r],s=t.intersect(a);s&&(n||(n=[]),Array.isArray(s)?Array.prototype.push.apply(n,s):n.push(s))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++)if(t[n].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,n=e.length;if(0===n)return 0;for(var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o=0,a=0;a<n;a++){var s=e[a],l=r[a];o+=s.length({subdivisions:l})}return o},lengthAtT:function(t,e){var n=this.segments,i=n.length;if(0===i)return 0;var r=t.segmentIndex;if(r<0)return 0;var o=t.value;i<=r?(r=i-1,o=1):o<0?o=0:1<o&&(o=1);for(var a,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=0,c=0;c<r;c++){var h=n[c];a=l[c],u+=h.length({precisison:s,subdivisions:a})}return h=n[r],a=l[r],u+h.lengthAtT(o,{precisison:s,subdivisions:a})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.pointAtLength(r,i)},pointAtLength:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;if(0===t)return this.start.clone();var r=!0;t<0&&(r=!1,t=-t);for(var o,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,l=0,u=0;u<i;u++){var c=r?u:i-1-u,h=n[c],f=s[c],g=h.length({precision:a,subdivisions:f});if(h.isVisible){if(t<=l+g)return h.pointAtLength((r?1:-1)*(t-l),{precision:a,subdivisions:f});o=h}l+=g}return o?r?o.end:o.start:n[i-1].end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var i=t.segmentIndex;if(i<0)return e[0].pointAtT(0);if(n<=i)return e[n-1].pointAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[i].pointAtT(r)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var i=t;return t.isSubpathStart&&(t.subpathStartSegment=t,i=n),i&&this.updateSubpathStartSegment(i),t},removeSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),n<=t||t<0)throw new Error("Index out of range.");var i=e.splice(t,1)[0],r=i.previousSegment,o=i.nextSegment;r&&(r.nextSegment=o),o&&(o.previousSegment=r),i.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n,i=this.segments,r=i.length;if(0===r)throw new Error("Path has no segments.");if(t<0&&(t=r+t),r<=t||t<0)throw new Error("Index out of range.");var o=i[t],a=o.previousSegment,s=o.nextSegment,l=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");i.splice(t,1);for(var u=e.length,c=0;c<u;c++){var h=e[c];n=this.prepareSegment(h,a,s),i.splice(t+c,0,n),a=n,l&&n.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,a,s),i.splice(t,1,n),l&&n.isSubpathStart&&(l=!1)}l&&s&&this.updateSubpathStartSegment(s)},round:function(t){for(var e=this.segments,n=e.length,i=0;i<n;i++)e[i].round(t);return this},scale:function(t,e,n){for(var i=this.segments,r=i.length,o=0;o<r;o++)i[o].scale(t,e,n);return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.segmentIndexAtLength(r,i)},segmentIndexAtLength:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s=null,l=0,u=0;u<i;u++){var c=r?u:i-1-u,h=n[c],f=a[c],g=h.length({precision:o,subdivisions:f});if(h.isVisible){if(t<=l+g)return c;s=c}l+=g}return s},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),1<t&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},r=this.length(i)*t;return this.tangentAtLength(r,i)},tangentAtLength:function(t,e){var n=this.segments,i=n.length;if(0===i)return null;var r=!0;t<0&&(r=!1,t=-t);for(var o,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,l=0,u=0;u<i;u++){var c=r?u:i-1-u,h=n[c],f=s[c],g=h.length({precision:a,subdivisions:f});if(h.isDifferentiable()){if(t<=l+g)return h.tangentAtLength((r?1:-1)*(t-l),{precision:a,subdivisions:f});o=h}l+=g}if(o){var d=r?1:0;return o.tangentAtT(d)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var i=t.segmentIndex;if(i<0)return e[0].tangentAtT(0);if(n<=i)return e[n-1].tangentAtT(1);var r=t.value;return r<0?r=0:1<r&&(r=1),e[i].tangentAtT(r)},toPoints:function(t){var e=this.segments,n=e.length;if(0===n)return null;for(var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,o=[],a=[],s=0;s<n;s++){var l=e[s];if(l.isVisible){var u=r[s];if(0<u.length){var c=u.map(function(t){return t.start});Array.prototype.push.apply(a,c)}else a.push(l.start)}else 0<a.length&&(a.push(e[s-1].end),o.push(a),a=[])}return 0<a.length&&(a.push(this.end),o.push(a)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var i=0,r=n.length;i<r;i++)e.push(new vi(n[i]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",i=0;i<e;i++)n+=t[i].serialize()+" ";return n.trim()},translate:function(t,e){for(var n=this.segments,i=n.length,r=0;r<i;r++)n[r].translate(t,e);return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,t=(e=t).nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,xi.createSegment("M",0,0)),this}},Object.defineProperty(xi.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var i=t[n];if(i.isVisible)return i.start}return t[e-1].end}}),Object.defineProperty(xi.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;0<=n;n--){var i=t[n];if(i.isVisible)return i.end}return t[e-1].end}});var Si={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return 1<=t?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Si,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Si,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(Si,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var ki=function(){for(var t,e,n=arguments,i=[],r=arguments.length,o=0;o<r;o++)i.push(n[o]);if(!(this instanceof ki))return Ni(ki,i);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof ti){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new Qn(+i[0],+i[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var a;for(t=[],o=0;o<r;o+=2)a=i.slice(o,o+2),t.push(Ni(ki,a));return t}if(1===r)return this.end=new Qn(i[0]),this;for(t=[],o=0;o<r;o+=1)e=i[o],t.push(new ki(e));return t},Ti={clone:function(){return new ki(this.end)},divideAt:function(t){var e=new ti(this.start,this.end).divideAt(t);return[new ki(e[0]),new ki(e[1])]},divideAtLength:function(t){var e=new ti(this.start,this.end).divideAtLength(t);return[new ki(e[0]),new ki(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Ti,"type",{configurable:!0,enumerable:!0,value:"L"}),ki.prototype=Mi(Si,ti.prototype,Ti);var Di=function(){for(var t,e,n=arguments,i=[],r=arguments.length,o=0;o<r;o++)i.push(n[o]);if(!(this instanceof Di))return Ni(Di,i);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(i[0]instanceof wi){if(1===r)return this.controlPoint1=i[0].controlPoint1.clone(),this.controlPoint2=i[0].controlPoint2.clone(),this.end=i[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(6===r)return this.controlPoint1=new Qn(+i[0],+i[1]),this.controlPoint2=new Qn(+i[2],+i[3]),this.end=new Qn(+i[4],+i[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var a;for(t=[],o=0;o<r;o+=6)a=i.slice(o,o+6),t.push(Ni(Di,a));return t}if(3===r)return this.controlPoint1=new Qn(i[0]),this.controlPoint2=new Qn(i[1]),this.end=new Qn(i[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],o=0;o<r;o+=3)e=i.slice(o,o+3),t.push(Ni(Di,e));return t},ji={clone:function(){return new Di(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new wi(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new Di(n[0]),new Di(n[1])]},divideAtLength:function(t,e){var n=new wi(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new Di(n[0]),new Di(n[1])]},divideAtT:function(t){var e=new wi(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new Di(e[0]),new Di(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(i))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(ji,"type",{configurable:!0,enumerable:!0,value:"C"}),Di.prototype=Mi(Si,wi.prototype,ji);var zi=function(){for(var t,e,n=arguments,i=[],r=arguments.length,o=0;o<r;o++)i.push(n[o]);if(!(this instanceof zi))return Ni(zi,i);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(i[0]instanceof ti){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(i[0]instanceof wi){if(1===r)return this.end=i[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof i[0]||"number"==typeof i[0]){if(2===r)return this.end=new Qn(+i[0],+i[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var a;for(t=[],o=0;o<r;o+=2)a=i.slice(o,o+2),0===o?t.push(Ni(zi,a)):t.push(Ni(ki,a));return t}if(1===r)return this.end=new Qn(i[0]),this;for(t=[],o=0;o<r;o+=1)e=i[o],0===o?t.push(new zi(e)):t.push(new ki(e));return t},Li={bbox:function(){return null},clone:function(){return new zi(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Li,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Li,"type",{configurable:!0,enumerable:!0,value:"M"}),zi.prototype=Mi(Si,Li);var Pi=function(){for(var t=arguments,e=[],n=arguments.length,i=0;i<n;i++)e.push(t[i]);if(!(this instanceof Pi))return Ni(Pi,e);if(0<n)throw new Error("Closepath constructor expects no arguments.");return this},Ei={clone:function(){return new Pi},divideAt:function(t){var e=new ti(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new ki(e[0]):this.clone(),new ki(e[1])]},divideAtLength:function(t){var e=new ti(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new ki(e[0]):this.clone(),new ki(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Ei,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Ei,"type",{configurable:!0,enumerable:!0,value:"Z"}),Pi.prototype=Mi(Si,ti.prototype,Ei);var Oi=xi.segmentTypes={L:ki,C:Di,M:zi,Z:Pi,z:Pi};xi.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Oi).join("")+",.]*$"),xi.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};var Zi,Bi,Gi={scale:{linear:function(t,e,n){var i=t[1]-t[0],r=e[1]-e[0];return(n-t[0])/i*r+e[0]||0}},normalizeAngle:Tn,snapToGrid:Dn,toDeg:jn,toRad:zn,random:Ln,bezier:{curveThroughPoints:function(t){return console.warn("deprecated"),new xi(wi.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,n=[],i=[],r=t.length-1;if(1==r)return n[0]=new Qn((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),i[0]=new Qn(2*n[0].x-t[0].x,2*n[0].y-t[0].y),[n,i];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var a=this.getFirstControlPoints(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var s=this.getFirstControlPoints(o);for(e=0;e<r;e++)n.push(new Qn(a[e],s[e])),e<r-1?i.push(new Qn(2*t[e+1].x-a[e+1],2*t[e+1].y-s[e+1])):i.push(new Qn((t[r].x+a[r-1])/2,(t[r].y+s[r-1])/2));return[n,i]},getCurveDivider:function(t,e,n,i){console.warn("deprecated");var r=new wi(t,e,n,i);return function(t){var e=r.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var o=1;o<e;o++)i[o]=1/r,r=(o<e-1?4:3.5)-i[o],n[o]=(t[o]-n[o-1])/r;for(o=1;o<e;o++)n[e-o-1]-=i[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,i){console.warn("deprecated");var r=new wi(t,e,n,i);return function(t){return r.closestPointT(t)}}},Curve:wi,Ellipse:oi,ellipse:ai,Line:ti,line:ei,Path:xi,Point:Qn,point:Kn,Polyline:vi,Rect:di,rect:pi},Ri=function(){if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},e=Math,n=e.PI,i=e.atan2,r=e.sqrt,o=e.min,a=e.max,s=e.cos,l=e.sin,u=function(e,n,i){if(!(this instanceof u))return u.apply(Object.create(u.prototype),arguments);if(e){if(u.isV(e)&&(e=e.node),n=n||{},u.isString(e)){if("svg"===e.toLowerCase())e=u.createSvgDocument();else if("<"===e[0]){var r=u.createSvgDocument(e);if(1<r.childNodes.length){var o,a,s=[];for(o=0,a=r.childNodes.length;o<a;o++){var l=r.childNodes[o];s.push(new u(document.importNode(l,!0)))}return s}e=document.importNode(r.firstChild,!0)}else e=document.createElementNS(t.svg,e);u.ensureId(e)}return this.node=e,this.setAttributes(n),i&&this.append(i),this}},c=u.prototype;function h(t,e,n){n||(n={});for(var i=n.includeAnnotationIndices,r=n.eol,o=n.lineHeight,a=n.baseSize,s=0,l={},c=e.length-1,h=0;h<=c;h++){var f=e[h],g=null;if(u.isObject(f)){var d=f.attrs,p=u("tspan",d),m=p.node,v=f.t;r&&h===c&&(v+=r),m.textContent=v;var I=d.class;I&&p.addClass(I),i&&p.attr("annotations",f.annotations),void 0===(g=parseFloat(d["font-size"]))&&(g=a),g&&s<g&&(s=g)}else r&&h===c&&(f+=r),m=document.createTextNode(f||" "),a&&s<a&&(s=a);t.appendChild(m)}return s&&(l.maxFontSize=s),o?l.lineHeight=o:s&&(l.lineHeight=1.2*s),l}Object.defineProperty(c,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),c.getTransformToElement=function(t){var e=this.node;if(u.isSVGGraphicsElement(t)&&u.isSVGGraphicsElement(e)){var n=u.toNode(t).getScreenCTM(),i=e.getScreenCTM();if(n&&i)return n.inverse().multiply(i)}return u.createSVGMatrix()},c.transform=function(t,e){var n=this.node;if(u.isUndefined(t))return u.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",u.matrixToTransformString(t));var i=u.createSVGTransform(t);return n.transform.baseVal.appendItem(i),this},c.translate=function(t,e,n){n=n||{},e=e||0;var i=this.attr("transform")||"",r=u.parseTransformString(i);if(i=r.value,u.isUndefined(t))return r.translate;i=i.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(n.absolute?t:r.translate.tx+t)+","+(n.absolute?e:r.translate.ty+e)+")";return this.attr("transform",(o+" "+i).trim()),this},c.rotate=function(t,e,n,i){i=i||{};var r=this.attr("transform")||"",o=u.parseTransformString(r);if(r=o.value,u.isUndefined(t))return o.rotate;r=r.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var a="rotate("+(i.absolute?t:o.rotate.angle+t)+(void 0!==e&&void 0!==n?","+e+","+n:"")+")";return this.attr("transform",(r+" "+a).trim()),this},c.scale=function(t,e){e=u.isUndefined(e)?t:e;var n=this.attr("transform")||"",i=u.parseTransformString(n);if(n=i.value,u.isUndefined(t))return i.scale;n=n.replace(/scale\([^)]*\)/g,"").trim();var r="scale("+t+","+e+")";return this.attr("transform",(n+" "+r).trim()),this},c.bbox=function(t,e){var n,i=this.node,r=i.ownerSVGElement;if(!r)return new di(0,0,0,0);try{n=i.getBBox()}catch(t){n={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(t)return new di(n);var o=this.getTransformToElement(e||r);return u.transformRect(n,o)},c.getBBox=function(t){var e,n={},i=this.node;if(!i.ownerSVGElement||!u.isSVGGraphicsElement(i))return new di(0,0,0,0);if(t&&(t.target&&(n.target=u.toNode(t.target)),t.recursive&&(n.recursive=t.recursive)),n.recursive){var r=this.children(),o=r.length;if(0===o)return this.getBBox({target:n.target,recursive:!1});n.target||(n.target=this);for(var a=0;a<o;a++){var s,l=r[a];s=0===l.children().length?l.getBBox({target:n.target,recursive:!1}):l.getBBox({target:n.target,recursive:!0}),e=e?e.union(s):s}return e}try{e=i.getBBox()}catch(t){e={x:i.clientLeft,y:i.clientTop,width:i.clientWidth,height:i.clientHeight}}if(n.target){var c=this.getTransformToElement(n.target);return u.transformRect(e,c)}return new di(e)};var f=/em$/;function g(t,e){var n=parseFloat(t);return f.test(t)?n*e:n}c.text=function(e,n){if(e&&"string"!=typeof e)throw new Error("Vectorizer: text() expects the first argument to be a string.");e=u.sanitizeText(e),n||(n={});var i=n.displayEmpty,r=n.eol,o=n.textPath,a=n.textVerticalAnchor,s="middle"===a||"bottom"===a||"top"===a,l=n.x;void 0===l&&(l=this.attr("x")||0);var c=n.includeAnnotationIndices,d=n.annotations;d&&!u.isArray(d)&&(d=[d]);var p=n.lineHeight,m="auto"===p,v=m?"1.5em":p||"1em";this.empty(),this.attr({"xml:space":"preserve",display:e||i?null:"none"});var I=parseFloat(this.attr("font-size"));I||(I=16,(s||d)&&this.attr("font-size",I));var A,y=document;A=o?("string"==typeof o&&(o={d:o}),function(t,e){t||(t={});var n=u("textPath"),i=t.d;if(i&&void 0===t["xlink:href"]){var r=u("path").attr("d",i).appendTo(e.defs());n.attr("xlink:href","#"+r.id)}return u.isObject(t)&&n.attr(t),n.node}(o,this)):y.createDocumentFragment();for(var C,b=0,w=e.split("\n"),x=[],N=0,M=w.length-1;N<=M;N++){var S,k=v,T="v-line",D=y.createElementNS(t.svg,"tspan"),j=w[N];if(j)if(d){var z=(S=h(D,u.annotateString(j,d,{offset:-b,includeAnnotationIndices:c}),{includeAnnotationIndices:c,eol:N!==M&&r,lineHeight:m?null:v,baseSize:I})).lineHeight;z&&m&&0!==N&&(k=z),0===N&&(C=.8*S.maxFontSize)}else r&&N!==M&&(j+=r),D.textContent=j;else{D.textContent="-",T+=" v-empty-line";var L=D.style;L.fillOpacity=0,L.strokeOpacity=0,d&&(S={})}S&&x.push(S),0<N&&D.setAttribute("dy",k),(0<N||o)&&D.setAttribute("x",l),D.className.baseVal=T,A.appendChild(D),b+=j.length+1}if(s)if(d)k=function(t,e,n,i){if(!Array.isArray(e))return 0;var r=e.length;if(!r)return 0;for(var o=e[0],a=g(o.maxFontSize,n)||n,s=0,l=g(i,n),u=1;u<r;u++)s+=g((o=e[u]).lineHeight,n)||l;var c,h=g(o.maxFontSize,n)||n;switch(t){case"middle":c=a/2-.15*h-s/2;break;case"bottom":c=-.25*h-s;break;default:case"top":c=.8*a}return c}(a,x,I,v);else if("top"===a)k="0.8em";else{var P;switch(0<M?(P=parseFloat(v)||1,P*=M,f.test(v)||(P/=I)):P=0,a){case"middle":k=.3-P/2+"em";break;case"bottom":k=-P-.3+"em"}}else 0===a?k="0em":a?k=a:(k=0,null===this.attr("y")&&this.attr("y",C||"0.8em"));return A.firstChild.setAttribute("dy",k),this.append(A),this},c.removeAttr=function(t){var e=u.qualifyAttr(t),n=this.node;return e.ns?n.hasAttributeNS(e.ns,e.local)&&n.removeAttributeNS(e.ns,e.local):n.hasAttribute(t)&&n.removeAttribute(t),this},c.attr=function(t,e){if(u.isUndefined(t)){for(var n=this.node.attributes,i={},r=0;r<n.length;r++)i[n[r].name]=n[r].value;return i}if(u.isString(t)&&u.isUndefined(e))return this.node.getAttribute(t);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,e);return this},c.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",u.normalizePathData(this.attr("d"))),this},c.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},c.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},c.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},c.append=function(t){u.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++)this.node.appendChild(u.toNode(t[e]));return this},c.prepend=function(t){var e=this.node.firstChild;return e?u(e).before(t):this.append(t)},c.before=function(t){var e=this.node,n=e.parentNode;if(n){u.isArray(t)||(t=[t]);for(var i=0,r=t.length;i<r;i++)n.insertBefore(u.toNode(t[i]),e)}return this},c.appendTo=function(t){return u.toNode(t).appendChild(this.node),this},c.svg=function(){return this.node instanceof window.SVGSVGElement?this:u(this.node.ownerSVGElement)},c.tagName=function(){return this.node.tagName.toUpperCase()},c.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?u(e):u("defs").appendTo(t)},c.clone=function(){var t=u(this.node.cloneNode(!0));return t.node.id=u.uniqueId(),t},c.findOne=function(t){var e=this.node.querySelector(t);return e?u(e):void 0},c.find=function(t){var e=[],n=this.node.querySelectorAll(t);if(n)for(var i=0;i<n.length;i++)e.push(u(n[i]));return e},c.children=function(){for(var t=this.node.childNodes,e=[],n=0;n<t.length;n++)1===t[n].nodeType&&e.push(u(t[n]));return e},c.parent=function(){return u(this.node.parentNode)||null},c.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},c.findParentByClass=function(t,e){for(var n=this.node.ownerSVGElement,i=this.node.parentNode;i&&i!==e&&i!==n;){var r=u(i);if(r.hasClass(t))return r;i=i.parentNode}return null},c.contains=function(t){var e=this.node,n=u.toNode(t),i=n&&n.parentNode;return e===i||!!(i&&1===i.nodeType&&16&e.compareDocumentPosition(i))},c.toLocalPoint=function(t,e){var n=this.svg().node,i=n.createSVGPoint();i.x=t,i.y=e;try{var r=i.matrixTransform(n.getScreenCTM().inverse()),o=this.getTransformToElement(n).inverse()}catch(t){return i}return r.matrixTransform(o)},c.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},c.translateAndAutoOrient=function(t,e,n){t=new Qn(t),e=new Qn(e),n||(n=this.svg());var i=this.scale();this.attr("transform","");var r=this.getBBox({target:n}).scale(i.sx,i.sy),o=u.createSVGTransform();o.setTranslate(-r.x-r.width/2,-r.y-r.height/2);var a=u.createSVGTransform(),s=t.angleBetween(e,t.clone().offset(1,0));s&&a.setRotate(s,0,0);var l=u.createSVGTransform(),c=t.clone().move(e,r.width/2);l.setTranslate(2*t.x-c.x,2*t.y-c.y);var h=this.getTransformToElement(n),f=u.createSVGTransform();return f.setMatrix(l.matrix.multiply(a.matrix.multiply(o.matrix.multiply(h.scale(i.sx,i.sy))))),this.attr("transform",u.matrixToTransformString(f.matrix)),this},c.animateAlongPath=function(t,e){e=u.toNode(e);var n=u.ensureId(e),i=u("animateMotion",t),r=u("mpath",{"xlink:href":"#"+n});i.append(r),this.append(i);try{i.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=i.node;o.animators=[];var a=o.getAttribute("id");a&&(id2anim[a]=o);for(var s=getTargets(o),l=0,c=s.length;l<c;l++){var h=s[l],f=new Animator(o,h,l);animators.push(f),(o.animators[l]=f).register()}}}return this},c.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},c.addClass=function(t){if(t&&!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},c.removeClass=function(t){if(t&&this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},c.toggleClass=function(t,e){return(u.isUndefined(e)?this.hasClass(t):!e)?this.removeClass(t):this.addClass(t),this},c.sample=function(t){t=t||1;for(var e,n=this.node,i=n.getTotalLength(),r=[],o=0;o<i;)e=n.getPointAtLength(o),r.push({x:e.x,y:e.y,distance:o}),o+=t;return r},c.convertToPath=function(){var t=u("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},c.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return u.convertLineToPathData(this.node);case"POLYGON":return u.convertPolygonToPathData(this.node);case"POLYLINE":return u.convertPolylineToPathData(this.node);case"ELLIPSE":return u.convertEllipseToPathData(this.node);case"CIRCLE":return u.convertCircleToPathData(this.node);case"RECT":return u.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},u.prototype.toGeometryShape=function(){var t,e,n,i,r,o,a,s,l,c,h,f,g,d,p;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,n=parseFloat(this.attr("width"))||0,i=parseFloat(this.attr("height"))||0,new di(t,e,n,i);case"CIRCLE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("r"))||0,new oi({x:r,y:o},a,a);case"ELLIPSE":return r=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("rx"))||0,l=parseFloat(this.attr("ry"))||0,new oi({x:r,y:o},s,l);case"POLYLINE":return c=u.getPointsFromSvgNode(this),new vi(c);case"POLYGON":return 1<(c=u.getPointsFromSvgNode(this)).length&&c.push(c[0]),new vi(c);case"PATH":return h=this.attr("d"),xi.isDataSupported(h)||(h=u.normalizePathData(h)),new xi(h);case"LINE":return f=parseFloat(this.attr("x1"))||0,d=parseFloat(this.attr("y1"))||0,g=parseFloat(this.attr("x2"))||0,p=parseFloat(this.attr("y2"))||0,new ti({x:f,y:d},{x:g,y:p})}return this.getBBox()},c.findIntersection=function(t,e){var n=this.svg().node;e=e||n;var i=this.getBBox({target:e}),r=i.center();if(i.intersectionWithLineFromCenterToPoint(t)){var o,a=this.tagName();if("RECT"===a){var s=new di(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),l=this.getTransformToElement(e),c=u.decomposeMatrix(l),h=n.createSVGTransform();h.setRotate(-c.rotation,r.x,r.y);var f=u.transformRect(s,h.matrix.multiply(l));o=new di(f).intersectionWithLineFromCenterToPoint(t,c.rotation)}else if("PATH"===a||"POLYGON"===a||"POLYLINE"===a||"CIRCLE"===a||"ELLIPSE"===a){var g,d,p,m,v,I=("PATH"===a?this:this.convertToPath()).sample(),A=1/0,y=[];for(g=0;g<I.length;g++)d=I[g],p=(p=u.createSVGPoint(d.x,d.y)).matrixTransform(this.getTransformToElement(e)),(v=(d=new Qn(p)).distance(r)+(m=1.1*d.distance(t)))<A?(A=v,y=[{sample:d,refDistance:m}]):v<A+1&&y.push({sample:d,refDistance:m});y.sort(function(t,e){return t.refDistance-e.refDistance}),y[0]&&(o=y[0].sample)}return o}},c.setAttribute=function(t,e){var n=this.node;if(null===e)return this.removeAttr(t),this;var i=u.qualifyAttr(t);return i.ns?n.setAttributeNS(i.ns,t,e):"id"===t?n.id=e:n.setAttribute(t,e),this},u.createSvgDocument=function(e){if(e){var n='<svg xmlns="'+t.svg+'" xmlns:xlink="'+t.xlink+'" version="1.1">'+e+"</svg>";return u.parseXML(n,{async:!1}).documentElement}var i=document.createElementNS(t.svg,"svg");return i.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),i.setAttribute("version","1.1"),i},u.createSVGStyle=function(t){return u("style",{type:"text/css"},[u.createCDATASection(t)]).node},u.createCDATASection=function(t){return void 0===t&&(t=""),document.implementation.createDocument(null,"xml",null).createCDATASection(t)},u.idCounter=0,u.uniqueId=function(){return"v-"+ ++u.idCounter},u.toNode=function(t){return u.isV(t)?t.node:t.nodeName&&t||t[0]},u.ensureId=function(t){return(t=u.toNode(t)).id||(t.id=u.uniqueId())},u.sanitizeText=function(t){return(t||"").replace(/ /g,"\xa0")},u.isUndefined=function(t){return void 0===t},u.isString=function(t){return"string"==typeof t},u.isObject=function(t){return t&&"object"==typeof t},u.isArray=Array.isArray,u.parseXML=function(t,e){var n;e=e||{};try{var i=new DOMParser;u.isUndefined(e.async)||(i.async=e.async),n=i.parseFromString(t,"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n},u.qualifyAttr=function(e){if(-1===e.indexOf(":"))return{ns:null,local:e};var n=e.split(":");return{ns:t[n[0]],local:n[1]}},u.transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,u.transformSeparatorRegex=/[ ,]+/,u.transformationListRegex=/^(\w+)\((.*)\)/,u.transformStringToMatrix=function(t){var e=u.createSVGMatrix(),n=t&&t.match(u.transformRegex);if(!n)return e;for(var i=0,r=n.length;i<r;i++){var o=n[i].match(u.transformationListRegex);if(o){var a,s,l,c,h,f=u.createSVGMatrix(),g=o[2].split(u.transformSeparatorRegex);switch(o[1].toLowerCase()){case"scale":a=parseFloat(g[0]),s=void 0===g[1]?a:parseFloat(g[1]),f=f.scaleNonUniform(a,s);break;case"translate":l=parseFloat(g[0]),c=parseFloat(g[1]),f=f.translate(l,c);break;case"rotate":h=parseFloat(g[0]),l=parseFloat(g[1])||0,c=parseFloat(g[2])||0,f=0!==l||0!==c?f.translate(l,c).rotate(h).translate(-l,-c):f.rotate(h);break;case"skewx":h=parseFloat(g[0]),f=f.skewX(h);break;case"skewy":h=parseFloat(g[0]),f=f.skewY(h);break;case"matrix":f.a=parseFloat(g[0]),f.b=parseFloat(g[1]),f.c=parseFloat(g[2]),f.d=parseFloat(g[3]),f.e=parseFloat(g[4]),f.f=parseFloat(g[5]);break;default:continue}e=e.multiply(f)}}return e},u.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},u.parseTransformString=function(t){var e,n,i;if(t){var r=u.transformSeparatorRegex;if(0<=t.trim().indexOf("matrix")){var o=u.transformStringToMatrix(t),a=u.decomposeMatrix(o);e=[a.translateX,a.translateY],i=[a.scaleX,a.scaleY],n=[a.rotation];var s=[];0===e[0]&&0===e[1]||s.push("translate("+e+")"),1===i[0]&&1===i[1]||s.push("scale("+i+")"),0!==n[0]&&s.push("rotate("+n+")"),t=s.join(" ")}else{var l=t.match(/translate\((.*?)\)/);l&&(e=l[1].split(r));var c=t.match(/rotate\((.*?)\)/);c&&(n=c[1].split(r));var h=t.match(/scale\((.*?)\)/);h&&(i=h[1].split(r))}}var f=i&&i[0]?parseFloat(i[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:f,sy:i&&i[1]?parseFloat(i[1]):f}}},u.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},u.decomposeMatrix=function(t){var e=u.deltaTransformPoint(t,{x:0,y:1}),o=u.deltaTransformPoint(t,{x:1,y:0}),a=180/n*i(e.y,e.x)-90,s=180/n*i(o.y,o.x);return{translateX:t.e,translateY:t.f,scaleX:r(t.a*t.a+t.b*t.b),scaleY:r(t.c*t.c+t.d*t.d),skewX:a,skewY:s,rotation:a}},u.matrixToScale=function(t){var e,n,i,o;return t?(e=u.isUndefined(t.a)?1:t.a,o=u.isUndefined(t.d)?1:t.d,n=t.b,i=t.c):e=o=1,{sx:n?r(e*e+n*n):e,sy:i?r(i*i+o*o):o}},u.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=u.deltaTransformPoint(t,e)),{angle:Tn(jn(i(e.y,e.x))-90)}},u.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},u.isV=function(t){return t instanceof u},u.isVElement=u.isV,u.isSVGGraphicsElement=function(t){return!!t&&(t=u.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM};var d=u("svg").node;return u.createSVGMatrix=function(t){var e=d.createSVGMatrix();for(var n in t)e[n]=t[n];return e},u.createSVGTransform=function(t){return u.isUndefined(t)?d.createSVGTransform():(t instanceof SVGMatrix||(t=u.createSVGMatrix(t)),d.createSVGTransformFromMatrix(t))},u.createSVGPoint=function(t,e){var n=d.createSVGPoint();return n.x=t,n.y=e,n},u.transformRect=function(t,e){var n=d.createSVGPoint();n.x=t.x,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var s=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var l=n.matrixTransform(e),u=o(i.x,r.x,s.x,l.x),c=a(i.x,r.x,s.x,l.x),h=o(i.y,r.y,s.y,l.y),f=a(i.y,r.y,s.y,l.y);return new di(u,h,c-u,f-h)},u.transformPoint=function(t,e){return new Qn(u.createSVGPoint(t.x,t.y).matrixTransform(e))},u.transformLine=function(t,e){return new ti(u.transformPoint(t.start,e),u.transformPoint(t.end,e))},u.transformPolyline=function(t,e){var n=t instanceof vi?t.points:t;u.isArray(n)||(n=[]);for(var i=[],r=0,o=n.length;r<o;r++)i[r]=u.transformPoint(n[r],e);return new vi(i)},u.styleToObject=function(t){for(var e={},n=t.split(";"),i=0;i<n.length;i++){var r=n[i].split("=");e[r[0].trim()]=r[1].trim()}return e},u.createSlicePathData=function(t,e,i,r){var o=2*n-1e-6,a=t,u=e,c=i,h=r,f=(h<c&&(f=c,c=h,h=f),h-c),g=f<n?"0":"1",d=s(c),p=l(c),m=s(h),v=l(h);return o<=f?a?"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":a?"M"+u*d+","+u*p+"A"+u+","+u+" 0 "+g+",1 "+u*m+","+u*v+"L"+a*m+","+a*v+"A"+a+","+a+" 0 "+g+",0 "+a*d+","+a*p+"Z":"M"+u*d+","+u*p+"A"+u+","+u+" 0 "+g+",1 "+u*m+","+u*v+"L0,0Z"},u.mergeAttrs=function(t,e){for(var n in e)"class"===n?t[n]=t[n]?t[n]+" "+e[n]:e[n]:"style"===n?u.isObject(t[n])&&u.isObject(e[n])?t[n]=u.mergeAttrs(t[n],e[n]):u.isObject(t[n])?t[n]=u.mergeAttrs(t[n],u.styleToObject(e[n])):u.isObject(e[n])?t[n]=u.mergeAttrs(u.styleToObject(t[n]),e[n]):t[n]=u.mergeAttrs(u.styleToObject(t[n]),u.styleToObject(e[n])):t[n]=e[n];return t},u.annotateString=function(t,e,n){e=e||[];for(var i,r,o,a=(n=n||{}).offset||0,s=[],l=[],c=0;c<t.length;c++){r=l[c]=t[c];for(var h=0;h<e.length;h++){var f=e[h],g=f.start+a,d=f.end+a;g<=c&&c<d&&(u.isObject(r)?r.attrs=u.mergeAttrs(u.mergeAttrs({},r.attrs),f.attrs):r=l[c]={t:t[c],attrs:f.attrs},n.includeAnnotationIndices&&(r.annotations||(r.annotations=[])).push(h))}(o=l[c-1])?u.isObject(r)&&u.isObject(o)?JSON.stringify(r.attrs)===JSON.stringify(o.attrs)?i.t+=r.t:(s.push(i),i=r):i=u.isObject(r)||u.isObject(o)?(s.push(i),r):(i||"")+r:i=r}return i&&s.push(i),s},u.findAnnotationsAtIndex=function(t,e){var n=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&n.push(t)}),n},u.findAnnotationsBetweenIndexes=function(t,e,n){var i=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&i.push(t)}),i},u.shiftAnnotations=function(t,e,n){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)}),t},u.convertLineToPathData=function(t){return["M",(t=u(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},u.convertPolygonToPathData=function(t){var e=u.getPointsFromSvgNode(t);return 0===e.length?null:u.svgPointsToPath(e)+" Z"},u.convertPolylineToPathData=function(t){var e=u.getPointsFromSvgNode(t);return 0===e.length?null:u.svgPointsToPath(e)},u.svgPointsToPath=function(t){for(var e=0,n=t.length;e<n;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},u.getPointsFromSvgNode=function(t){var e=[],n=(t=u.toNode(t)).points;if(n)for(var i=0,r=n.numberOfItems;i<r;i++)e.push(n.getItem(i));return e},u.KAPPA=.551784,u.convertCircleToPathData=function(t){t=u(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("r")),r=i*u.KAPPA;return["M",e,n-i,"C",e+r,n-i,e+i,n-r,e+i,n,"C",e+i,n+r,e+r,n+i,e,n+i,"C",e-r,n+i,e-i,n+r,e-i,n,"C",e-i,n-r,e-r,n-i,e,n-i,"Z"].join(" ")},u.convertEllipseToPathData=function(t){t=u(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("rx")),r=parseFloat(t.attr("ry"))||i,o=i*u.KAPPA,a=r*u.KAPPA;return["M",e,n-r,"C",e+o,n-r,e+i,n-a,e+i,n,"C",e+i,n+a,e+o,n+r,e,n+r,"C",e-o,n+r,e-i,n+a,e-i,n,"C",e-i,n-a,e-o,n-r,e,n-r,"Z"].join(" ")},u.convertRectToPathData=function(t){return t=u(t),u.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},u.rectToPath=function(t){var e=t.x,n=t.y,i=t.width,r=t.height,a=o(t.rx||t["top-rx"]||0,i/2),s=o(t.rx||t["bottom-rx"]||0,i/2),l=o(t.ry||t["top-ry"]||0,r/2),u=o(t.ry||t["bottom-ry"]||0,r/2);return(a||s||l||u?["M",e,n+l,"v",r-l-u,"a",s,u,0,0,0,s,u,"h",i-2*s,"a",s,u,0,0,0,s,-u,"v",-(r-u-l),"a",a,l,0,0,0,-a,-l,"h",-(i-2*a),"a",a,l,0,0,0,-a,l,"Z"]:["M",e,n,"H",e+i,"V",n+r,"H",e,"V",n,"Z"]).join(" ")},u.normalizePathData=function(){var t="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",e=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),i=Math,r=i.PI,o=i.sin,a=i.cos,s=i.tan,l=i.asin,u=i.sqrt,c=i.abs;function h(t,e,n,i,r,o){return[1/3*t+2/3*n,1/3*e+2/3*i,1/3*r+2/3*n,1/3*o+2/3*i,r,o]}function f(t,e,n){return{x:t*a(n)-e*o(n),y:t*o(n)+e*a(n)}}function g(t){var i=function(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return String(t).replace(e,function(t,e,o){var a=[],s=e.toLowerCase();for(o.replace(n,function(t,e){e&&a.push(+e)}),"m"===s&&2<a.length&&(r.push([e].concat(a.splice(0,2))),s="l",e="m"===e?"l":"L");a.length>=i[s]&&(r.push([e].concat(a.splice(0,i[s]))),i[s]););}),r}(t)),!t||!t.length)return[["M",0,0]];for(var i,r=[],o=0,a=0,s=0,l=0,u=t.length,c=0;c<u;c++){var h=[];r.push(h);var f,g,d=t[c];if((i=d[0])!=i.toUpperCase())switch(h[0]=i.toUpperCase(),h[0]){case"A":h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5],h[6]=+d[6]+o,h[7]=+d[7]+a;break;case"V":h[1]=+d[1]+a;break;case"H":h[1]=+d[1]+o;break;case"M":for(s=+d[1]+o,l=+d[2]+a,f=d.length,g=1;g<f;g++)h[g]=+d[g]+(g%2?o:a);break;default:for(f=d.length,g=1;g<f;g++)h[g]=+d[g]+(g%2?o:a)}else for(var p=d.length,m=0;m<p;m++)h[m]=d[m];switch(h[0]){case"Z":o=+s,a=+l;break;case"H":o=h[1];break;case"V":a=h[1];break;case"M":s=h[h.length-2],l=h[h.length-1],o=h[h.length-2],a=h[h.length-1];break;default:o=h[h.length-2],a=h[h.length-1]}}return r}(t),g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function d(t,e,n){var i,g;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(function t(e,n,i,h,g,d,p,m,v,I){var A,y=120*r/180,C=r/180*(+g||0),b=[];if(I)j=I[0],z=I[1],T=I[2],D=I[3];else{e=(A=f(e,n,-C)).x,n=A.y;var w=(e-(m=(A=f(m,v,-C)).x))/2,x=(n-(v=A.y))/2,N=w*w/(i*i)+x*x/(h*h);1<N&&(i*=N=u(N),h*=N);var M=i*i,S=h*h,k=(d==p?-1:1)*u(c((M*S-M*x*x-S*w*w)/(M*x*x+S*w*w))),T=k*i*x/h+(e+m)/2,D=k*-h*w/i+(n+v)/2,j=l(((n-D)/h).toFixed(9)),z=l(((v-D)/h).toFixed(9));(j=e<T?r-j:j)<0&&(j=2*r+j),(z=m<T?r-z:z)<0&&(z=2*r+z),p&&z<j&&(j-=2*r),!p&&j<z&&(z-=2*r)}var L=z-j;if(c(L)>y){var P=z,E=m,O=v;b=t(m=T+i*a(z=j+y*(p&&j<z?1:-1)),v=D+h*o(z),i,h,g,0,p,E,O,[z,P,T,D])}L=z-j;var Z=a(j),B=o(j),G=a(z),R=o(z),_=s(L/4),W=4/3*(i*_),Y=4/3*(h*_),U=[e,n],F=[e+W*B,n-Y*Z],X=[m+W*R,v-Y*G],V=[m,v];if(F[0]=2*U[0]-F[0],F[1]=2*U[1]-F[1],I)return[F,X,V].concat(b);for(var H=[],J=(b=[F,X,V].concat(b).join().split(",")).length,Q=0;Q<J;Q++)H[Q]=Q%2?f(b[Q-1],b[Q],C).y:f(b[Q],b[Q+1],C).x;return H}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":g="C"===n||"S"===n?(i=2*e.x-e.bx,2*e.y-e.by):(i=e.x,e.y),t=["C",i,g].concat(t.slice(1));break;case"T":e.qy="Q"===n||"T"===n?(e.qx=2*e.x-e.qx,2*e.y-e.qy):(e.qx=e.x,e.y),t=["C"].concat(h(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(h(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function p(t,e){if(7<t[e].length){t[e].shift();for(var n=t[e];n.length;)m[e]="A",t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),A=i.length}}for(var m=[],v="",I="",A=i.length,y=0;y<A;y++){i[y]&&(v=i[y][0]),"C"!==v&&(m[y]=v,0<y&&(I=m[y-1])),i[y]=d(i[y],g,I),"A"!==m[y]&&"C"===v&&(m[y]="C"),p(i,y);var C=i[y],b=C.length;g.x=C[b-2],g.y=C[b-1],g.bx=parseFloat(C[b-4])||g.x,g.by=parseFloat(C[b-3])||g.y}return i[0][0]&&"M"===i[0][0]||i.unshift(["M",0,0]),i}return function(t){return g(t).join(",").split(",").join(" ")}}(),u.namespace=t,u.g=Gi,u}(),_i={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default"},Wi=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,_i.classNamePrefix.length)!==_i.classNamePrefix&&(t=_i.classNamePrefix+t),t}).join(" "):t},Yi=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,_i.classNamePrefix.length)===_i.classNamePrefix&&(t=t.substr(_i.classNamePrefix.length)),t}).join(" "):t},Ui=function(t,e){for(var n={},r={},o=Ri.namespace.svg,a=e||o,s=document.createDocumentFragment(),l=[t,s,a];0<l.length;){a=l.pop();for(var u=l.pop(),c=l.pop(),h=0,f=c.length;h<f;h++){var g=c[h];if(!g.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");var d=g.tagName;g.hasOwnProperty("namespaceURI")&&(a=g.namespaceURI);var p=document.createElementNS(a,d),m=a===o,v=m?Ri:i,I=g.attributes;I&&v(p).attr(I);var A=g.style;if(A&&i(p).css(A),g.hasOwnProperty("className")){var y=g.className;m?p.className.baseVal=y:p.className=y}if(g.hasOwnProperty("textContent")&&(p.textContent=g.textContent),g.hasOwnProperty("selector")){var C=g.selector;if(n[C])throw new Error("json-dom-parser: selector must be unique");v(n[C]=p).attr("joint-selector",C)}if(g.hasOwnProperty("groupSelector")){var b=g.groupSelector;Array.isArray(b)||(b=[b]);for(var w=0,x=b.length;w<x;w++){var N=b[w],M=r[N];M||(M=r[N]=[]),M.push(p)}}u.appendChild(p);var S=g.children;Array.isArray(S)&&l.push(S,p,a)}}return{fragment:s,selectors:n,groupSelectors:r}},Fi=function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e},Xi=function(t,e,n){for(var i,r=Array.isArray(e)?e:e.split(n||"/"),o=0,a=r.length;o<a;){if(i=r[o++],Object(t)!==t||!(i in t))return;t=t[i]}return t},Vi=function(t,e){return("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!==e},Hi=function(t,e,n,i){for(var r=Array.isArray(e)?e:e.split(i||"/"),o=r.length-1,a=t,s=0;s<o;s++){var l=r[s];if(!Vi(a,l))return t;a=a[l]||(a[l]={})}return a[r[o]]=n,t},Ji=function(t,e,n){for(var i=Array.isArray(e)?e:e.split(n||"/"),r=i.length-1,o=t,a=0;a<r;a++){var s=i[a];if(!Vi(o,s))return t;var l=o[s];if(!l)return t;o=l}return delete o[i[r]],t},Qi=function(t,e,n){e=e||"/";var i={};for(var r in t)if(t.hasOwnProperty(r)){var o="object"==typeof t[r];if(o&&n&&n(t[r])&&(o=!1),o){var a=Qi(t[r],e,n);for(var s in a)a.hasOwnProperty(s)&&(i[r+e+s]=a[s])}else i[r]=t[r]}return i},Ki=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},qi=function(t){return qi.id=qi.id||1,t.id=void 0===t.id?"j_"+qi.id++:t.id,t.id},$i=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},tr=function(t){var e=t,n=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(n){for(var i in t)void 0===n[i]&&(n[i]=t[i]);e=n}var r=e.target;if(r){var o=r.correspondingUseElement;o&&(e.target=o)}return e},er=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=setTimeout(function(){t(n+i)},i);return e=n+i,r}}return function(e,n){for(var i=[],r=arguments.length-2;0<r--;)i[r]=arguments[r+2];return t(void 0!==n?e.bind.apply(e,[n].concat(i)):e)}}(),nr=((Bi="undefined"!=typeof window)&&(Zi=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),Zi=Zi||clearTimeout,Bi?Zi.bind(window):Zi),ir=function(t){return $r(t)&&"%"===t.slice(-1)},rr=function(t,e){var n=parseFloat(t);if(Number.isNaN(n))return null;var i,r={};if(r.value=n,null==e)i="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;i=e.join("|")}else $r(e)&&(i=e);var o,a=(o=new RegExp("(?:\\d+(?:\\.\\d+)*)("+i+")$").exec(t))?o[1]:null;return null===a?null:(r.unit=a,r)},or=function(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i={});var r=e.width,o=e.height,a=i.svgDocument||Ri("svg").node,s=Ri("tspan").node,l=Ri("text").attr(n).append(s).node,u=document.createTextNode("");l.style.opacity=0,l.style.display="block",s.style.display="block",s.appendChild(u),a.appendChild(l),i.svgDocument||document.body.appendChild(a);var c=i.separator||" ",h=i.eol||"\n",f=i.hyphen?new RegExp(i.hyphen):/[^\w\d]/,g=i.maxLineCount;qr(g)||(g=1/0);for(var d,p,m,v=t.split(c),I=[],A=[],y=0,C=0,b=v.length;y<b;y++){var w=v[y];if(w){var x=!1;if(h&&0<=w.indexOf(h)){if(1<w.length){for(var N=w.split(h),M=0,S=N.length-1;M<S;M++)N.splice(2*M+1,0,h);v.splice.apply(v,[y,1].concat(N.filter(function(t){return""!==t}))),y--,b=v.length;continue}x=!(A[++C]="")}if(!x)if(u.data=A[C]?A[C]+" "+w:w,s.getComputedTextLength()<=r)A[C]=u.data,(d||p)&&(I[C++]=!0,p=d=0);else{if(!A[C]||d){var k=!!d;if(d=w.length-1,k||!d){if(!d){if(!A[C]){A=[];break}v.splice(y,2,w+v[y+1]),b--,I[C++]=!0,y--;continue}v[y]=w.substring(0,d),v[y+1]=w.substring(d)+(void 0===v[y+1]?"":v[y+1])}else{if(p)v.splice(y,2,v[y]+v[y+1]),p=0;else{var T=w.search(f);-1<T&&T!==w.length-1&&0!==T&&(p=T+1,d=0),v.splice(y,1,w.substring(0,p||d),w.substring(p||d)),b++}C&&!I[C-1]&&C--}y--;continue}C++,y--}var D=null;if(A.length>g)D=g-1;else if(void 0!==o){var j;void 0===m&&(m=(j="auto"===n.lineHeight?{value:1.5,unit:"em"}:rr(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===j.unit&&(m*=l.getBBox().height)),m*A.length>o&&(D=Math.floor(o/m)-1)}if(null!==D){A.splice(D+1);var z=i.ellipsis;if(!z||D<0)break;"string"!=typeof z&&(z="\u2026");var L=A[D];if(!L&&!x)break;var P,E,O=L.length;do{if(E=L[O],P=L.substring(0,O),E?E.match(c)&&(P+=E):P+="string"==typeof c?c:" ",P+=z,u.data=P,s.getComputedTextLength()<=r){A[D]=P;break}O--}while(0<=O);break}}}return i.svgDocument?a.removeChild(l):document.body.removeChild(a),A.join(h)},ar=function(t){var e=i(i.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var t=this;i.each(t.attributes,function(){var e=this.name,n=this.value;(e.startsWith("on")||n.startsWith("javascript:")||n.startsWith("data:")||n.startsWith("vbscript:"))&&i(t).removeAttr(e)})}),e.html()},sr=function(t,e){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,e);else{var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}},lr=function(t){t=t.replace(/\s/g,"");var e,n=(t=decodeURIComponent(t)).indexOf(","),i=t.slice(0,n),r=i.split(":")[1].split(";")[0],o=t.slice(n+1);e=0<=i.indexOf("base64")?atob(o):unescape(encodeURIComponent(o));for(var a=new Uint8Array(e.length),s=0;s<e.length;s++)a[s]=e.charCodeAt(s);return new Blob([a],{type:r})},ur=function(t,e){var n=i(t),r=n.map(function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}});return Array.prototype.sort.call(n,e).each(function(t){r[t].call(this)})},cr=function(t){if(Object(t)===t)return e=n=i=r=0,isFinite(t.vertical)&&(e=i=+t.vertical),isFinite(t.horizontal)&&(n=r=+t.horizontal),isFinite(t.top)&&(e=+t.top),isFinite(t.right)&&(n=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(r=+t.left),{top:e,right:n,bottom:i,left:r};var e,n,i,r,o=0;return isFinite(t)&&(o=+t),{top:o,right:o,bottom:o,left:o}},hr={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if((7-4*e)/11<=t){var i=(11-6*e-11*t)/4;return-i*i+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(i){var r=t(i);return r<e?e:n<r?n:r}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},fr={number:function(t,e){var n=e-t;return function(e){return t+n*e}},object:function(t,e){var n=Object.keys(t);return function(i){var r,o,a={};for(r=n.length-1;-1!=r;r--)a[o=n[r]]=t[o]+(e[o]-t[o])*i;return a}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),i=parseInt(e.slice(1),16),r=255&n,o=(255&i)-r,a=65280&n,s=(65280&i)-a,l=16711680&n,u=(16711680&i)-l;return function(t){return"#"+(1<<24|r+o*t&255|a+s*t&65280|l+u*t&16711680).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=n.exec(t),r=n.exec(e),o=r[1].indexOf("."),a=0<o?r[1].length-o-1:0;t=+i[1];var s=+r[1]-t,l=i[2];return function(e){return(t+s*e).toFixed(a)+l}}},gr={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return pr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+n,innerRadius:e})},highlight:function(t){return pr('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return pr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return pr(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return pr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return pr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return pr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return pr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return pr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return pr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return pr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},dr={number:function(t,e,n){n=n||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var i=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i.exec(t),r=i[1]||" ",o=i[2]||">",a=i[3]||"",s=i[4]||"",l=i[5],u=+i[6],c=i[7],h=i[8],f=i[9],g=1,d="",p="",m=!1;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="=",c&&(u-=Math.floor((u-1)/4))),f){case"n":c=!0,f="g";break;case"%":g=100,p="%",f="f";break;case"p":g=100,p="%",f="r";break;case"b":case"o":case"x":case"X":"#"===s&&(d="0"+f.toLowerCase());break;case"c":case"d":m=!0,h=0;break;case"s":g=-1,f="r"}"$"===s&&(d=n.currency[0],p=n.currency[1]),"r"!=f||h||(f="g"),null!=h&&("g"==f?h=Math.max(1,Math.min(21,h)):"e"!=f&&"f"!=f||(h=Math.max(0,Math.min(20,h))));var v=l&&c;if(m&&e%1)return"";var I=e<0||0===e&&1/e<0?(e=-e,"-"):a,A=p;if(g<0){var y=this.prefix(e,h);e=y.scale(e),A=y.symbol+p}else e*=g;var C=(e=this.convert(f,e,h)).lastIndexOf("."),b=C<0?e:e.substring(0,C),w=C<0?"":n.decimal+e.substring(C+1);function x(t){for(var e=t.length,i=[],r=0,o=n.grouping[0];0<e&&0<o;)i.push(t.substring(e-=o,e+o)),o=n.grouping[r=(r+1)%n.grouping.length];return i.reverse().join(n.thousands)}!l&&c&&n.grouping&&(b=x(b));var N=d.length+b.length+w.length+(v?0:I.length),M=N<u?new Array(N=u-N+1).join(r):"";return v&&(b=x(M+b)),I+=d,e=b+w,("<"===o?I+e+M:">"===o?M+I+e:"^"===o?M.substring(0,N>>=1)+I+e+M.substring(N):I+(v?e:M+e))+A},string:function(t,e){for(var n,i="{",r=!1,o=[];-1!==(n=t.indexOf(i));){var a,s,l;if(a=t.slice(0,n),r){l=(s=a.split(":")).shift().split("."),a=e;for(var u=0;u<l.length;u++)a=a[l[u]];s.length&&(a=this.number(s,a))}o.push(a),t=t.slice(n+1),i=(r=!r)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,n){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(n);case"e":return e.toExponential(n);case"f":return e.toFixed(n);case"r":return(e=this.round(e,this.precision(e,n))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),n))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var n=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}}),i=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i<=0?i+1:i-1)/3)))),n[8+i/3]}},pr=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(t){for(var e=Array.from(arguments).slice(1,4).find(function(t){return!!t}).split("."),i=n[e.shift()];void 0!==i&&e.length;)i=i[e.shift()];return void 0!==i?i:""})}},mr=n.assign,vr=n.defaults,Ir=mr,Ar=n.defaultsDeep,yr=n.assign,Cr=n.defaults,br=n.defaultsDeep,wr=n.invokeMap||n.invoke,xr=n.sortedIndexBy||n.sortedIndex,Nr=n.uniqBy||n.uniq,Mr=n.clone,Sr=n.cloneDeep,kr=n.isEmpty,Tr=n.isEqual,Dr=n.isFunction,jr=n.isPlainObject,zr=n.toArray,Lr=n.debounce,Pr=n.groupBy,Er=n.sortBy,Or=n.flattenDeep,Zr=n.without,Br=n.difference,Gr=n.intersection,Rr=n.union,_r=n.has,Wr=n.result,Yr=n.omit,Ur=n.pick,Fr=n.bindAll,Xr=n.forIn,Vr=n.camelCase,Hr=n.uniqueId,Jr=function(){if(n.mergeWith){var t=Array.from(arguments),e=t[t.length-1],i=Dr(e)?e:to;return t.push(function(t,e){var n=i(t,e);return void 0!==n?n:Array.isArray(t)&&!Array.isArray(e)?e:void 0}),n.mergeWith.apply(this,t)}return n.merge.apply(this,arguments)},Qr=function(t){var e=Object.prototype.toString;return!0===t||!1===t||!!t&&"object"==typeof t&&"[object Boolean]"===e.call(t)},Kr=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},qr=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&"[object Number]"===e.call(t)},$r=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===e.call(t)},to=function(){};function eo(t){t=Nr(t);var e=zr(t).reduce(function(t,e){return t[e.id]=e.clone(),t},{});return zr(t).forEach(function(t){var n=e[t.id];if(n.isLink()){var i=n.source(),r=n.target();i.id&&e[i.id]&&n.prop("source/id",e[i.id].id),r.id&&e[r.id]&&n.prop("target/id",e[r.id].id)}var o=t.get("parent");o&&e[o]&&n.set("parent",e[o].id);var a=zr(t.get("embeds")).reduce(function(t,n){return e[n]&&t.push(e[n].id),t},[]);kr(a)||n.set("embeds",a)}),e}var no={width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},io=Object.keys(no).map(function(t){return no[t]}).join(""),ro="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",oo=/\s/g,ao=/calc\(([^)]*)\)/g,so=new RegExp("^("+ro+"\\*)?(["+io+"])([-+]"+ro+")?$","g");function lo(t){return"string"==typeof t&&t.includes("calc")}function uo(t,e){return t.replace(ao,function(t,n){return function(t,e){var n=so.exec(t.replace(oo,""));if(!n)throw new Error("Invalid calc() expression: "+t);so.lastIndex=0;var i=n[1];void 0===i&&(i=1);var r=n[2],o=n[3];void 0===o&&(o=0);var a=e.width,s=e.height,l=0;switch(r){case no.width:l=a;break;case no.height:l=s;break;case no.minimum:l=Math.min(s,a);break;case no.maximum:l=Math.max(s,a);break;case no.diagonal:l=Math.sqrt(s*s+a*a)}return parseFloat(i)*l+parseFloat(o)}(n,e)})}function co(t,e){return function(n,i){var r=ir(n);n=parseFloat(n),r&&(n/=100);var o={};if(isFinite(n)){var a=r||0<=n&&n<=1?n*i[e]:Math.max(n+i[e],0);o[t]=a}return o}}function ho(t,e,n){return function(i,r){var o,a=ir(i);if(i=parseFloat(i),a&&(i/=100),isFinite(i)){var s=r[n]();o=a||0<i&&i<1?s[t]+r[e]*i:s[t]+i}var l=Qn();return l[t]=o||0,l}}function fo(t,e,n){return function(i,r){var o;o="middle"===i?r[e]/2:i===n?r[e]:isFinite(i)?-1<i&&i<1?-r[e]*i:-i:ir(i)?r[e]*parseFloat(i)/100:0;var a=Qn();return a[t]=-(r[t]+o),a}}function go(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(e,o,a){var s=i(a),l=s.data(n);if(!l||l.value!==e){var u=t(e);l={value:e,shape:u,shapeBBox:u.bbox()},s.data(n,l)}var c=l.shape.clone(),h=l.shapeBBox.clone(),f=h.origin(),g=o.origin();h.x=g.x,h.y=g.y;var d=o.maxRectScaleToFit(h,g),p=0===h.width||0===o.width?1:d.sx,m=0===h.height||0===o.height?1:d.sy;return c.scale(p,m,f),r&&c.translate(-f.x,-f.y),c}}function po(t){var e=go(function(t){return new xi(Ri.normalizePathData(t))},t);return function(t,n,i){return{d:e(t,n,i).serialize()}}}function mo(t){var e=go(vi,t);return function(t,n,i){return{points:e(t,n,i).serialize()}}}function vo(t,e){var n=new Qn(1,0);return function(i){var r,o,a=this[t](i);return a?(o=e.rotate?a.vector().vectorAngle(n):0,r=a.start):(r=this.path.start,o=0),0===o?{transform:"translate("+r.x+","+r.y+")"}:{transform:"translate("+r.x+","+r.y+") rotate("+o+")"}}}function Io(t,e,n){return void 0!==n.text}function Ao(){return this.model.isLink()}function yo(t){var e={},n=t.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);var i=t.strokeOpacity;return void 0===i&&(i=t["stroke-opacity"]),void 0===i&&(i=t.opacity),void 0!==i&&(e["stroke-opacity"]=i,e["fill-opacity"]=i),e}var Co,bo,wo={xlinkHref:{set:"xlink:href"},xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},filter:{qualify:jr,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:jr,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},stroke:{qualify:jr,set:function(t){return"url(#"+this.paper.defineGradient(t)+")"}},sourceMarker:{qualify:jr,set:function(t,e,n,i){return t=yr(yo(i),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:jr,set:function(t,e,n,i){return t=yr(yo(i),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:jr,set:function(t,e,n,i){return t=yr(yo(i),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!jr(n.textWrap)},set:function(t,e,n,r){var o=i(n),a="joint-text",s=o.data(a),l=Ur(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty"),u=l.x;lo(u)&&(l.x=uo(u,e));var c=l.fontSize=r["font-size"]||r.fontSize,h=JSON.stringify([t,l]);if(void 0===s||s!==h){c&&n.setAttribute("font-size",c);var f=l.textPath;if(Kr(f)){var g=f.selector;if("string"==typeof g){var d=this.findBySelector(g)[0];d instanceof SVGPathElement&&(l.textPath=yr({"xlink:href":"#"+d.id},f))}}Ri(n).text(""+t,l),o.data(a,h)}}},textWrap:{qualify:jr,set:function(t,e,n,i){var r=t.width||0;ir(r)?e.width*=parseFloat(r)/100:r<=0?e.width+=r:e.width=r;var o,a=t.height||0;ir(a)?e.height*=parseFloat(a)/100:a<=0?e.height+=a:e.height=a;var s=t.text;void 0===s&&(s=i.text),o=void 0!==s?or(""+s,e,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight,"letter-spacing":"letter-spacing"in i?i["letter-spacing"]:i.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount}):"",wo.text.set.call(this,o,e,n,i)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=i(n),o="joint-title",a=r.data(o);if(void 0===a||a!==t){r.data(o,t);var s=n.firstChild;if(s&&"TITLE"===s.tagName.toUpperCase())s.textContent=t;else{var l=document.createElementNS(n.namespaceURI,"title");l.textContent=t,n.insertBefore(l,s)}}}},lineHeight:{qualify:Io},textVerticalAnchor:{qualify:Io},textPath:{qualify:Io},annotations:{qualify:Io},eol:{qualify:Io},displayEmpty:{qualify:Io},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:jr,set:function(t,e,n){i(n).css(t)}},html:{set:function(t,e,n){i(n).html(t+"")}},ref:{},refX:{position:ho("x","width","origin")},refY:{position:ho("y","height","origin")},refDx:{position:ho("x","width","corner")},refDy:{position:ho("y","height","corner")},refWidth:{set:co("width","width")},refHeight:{set:co("height","height")},refRx:{set:co("rx","width")},refRy:{set:co("ry","height")},refRInscribed:{set:(Co=co("r","width"),bo=co("r","height"),function(t,e){return(e.height>e.width?Co:bo)(t,e)})},refRCircumscribed:{set:function(t,e){var n=ir(t);t=parseFloat(t),n&&(t/=100);var i,r=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(i=n||0<=t&&t<=1?t*r:Math.max(t+r,0)),{r:i}}},refCx:{set:co("cx","width")},refCy:{set:co("cy","height")},xAlignment:{offset:fo("x","width","right")},yAlignment:{offset:fo("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:po({resetOffset:!0})},refDKeepOffset:{set:po({resetOffset:!1})},refPointsResetOffset:{set:mo({resetOffset:!0})},refPointsKeepOffset:{set:mo({resetOffset:!1})},connection:{qualify:Ao,set:function(t){var e,n=t.stubs;if(void 0===n&&(n=0),isFinite(n)&&0!==n){var i;i=n<0?(this.getConnectionLength()+n)/2:n;var r=this.getConnection(),o=r.divideAtLength(i),a=r.divideAtLength(-i);o&&a&&(e=o[0].serialize()+" "+a[1].serialize())}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:Ao,set:vo("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:Ao,set:vo("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:Ao,set:vo("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:Ao,set:vo("getTangentAtRatio",{rotate:!1})}};["d","points","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","x","y","dx","dy"].forEach(function(t){wo[t]={qualify:lo,set:function(e,n){var i;return(i={})[t]=uo(e,n),i}}}),wo.refR=wo.refRInscribed,wo.refD=wo.refDResetOffset,wo.refPoints=wo.refPointsResetOffset,wo.atConnectionLength=wo.atConnectionLengthKeepGradient,wo.atConnectionRatio=wo.atConnectionRatioKeepGradient,wo.refX2=wo.refX,wo.refY2=wo.refY,wo.refWidth2=wo.refWidth,wo.refHeight2=wo.refHeight,wo["ref-x"]=wo.refX,wo["ref-y"]=wo.refY,wo["ref-dy"]=wo.refDy,wo["ref-dx"]=wo.refDx,wo["ref-width"]=wo.refWidth,wo["ref-height"]=wo.refHeight,wo["x-alignment"]=wo.xAlignment,wo["y-alignment"]=wo.yAlignment;var xo=wo,No=e.Model.extend({constructor:function(t,e){var n,i=t||{};this.cid=Hr("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(i=this.parse(i,e)||{}),(n=Wr(this,"defaults"))&&(i=Jr({},n,i)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){var t=this.constructor.prototype.defaults.attrs||{},e=this.attributes.attrs,n={};Xr(e,function(e,i){var r=t[i];Xr(e,function(t,e){Kr(t)&&!Array.isArray(t)?Xr(t,function(t,o){r&&r[e]&&Tr(r[e][o],t)||(n[i]=n[i]||{},(n[i][e]||(n[i][e]={}))[o]=t)}):r&&Tr(r[e],t)||(n[i]=n[i]||{},n[i][e]=t)})});var i=Sr(Yr(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(t){t&&t.id||this.set("id",this.generateId(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},generateId:function(){return Ki()},processPorts:function(){var t=this.ports,e={};Xr(this.get("attrs"),function(t,n){t&&t.port&&(void 0!==t.port.id?e[t.port.id]=t.port:e[t.port]={id:t.port})});var n={};Xr(t,function(t,i){e[i]||(n[i]=!0)}),this.graph&&!kr(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(t){n[t.get("target").port]&&t.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(t){n[t.get("source").port]&&t.remove()})),this.ports=e},remove:function(t){void 0===t&&(t={});var e=this.graph,n=this.collection;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");var i=this.getParentCell();i&&i.unembed(this,t);for(var r=this.getEmbeddedCells(),o=0,a=r.length;o<a;o++){var s=r[o];s&&s.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};var n,i=e.maxZIndex();t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):n=[this],i=i-n.length+1;var r=e.get("cells"),o=r.indexOf(this)!==r.length-n.length;o||(o=n.some(function(t,e){return t.get("z")!==i+e})),o&&(this.startBatch("to-front"),i+=n.length,n.forEach(function(e,n){e.set("z",i+n,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};var n,i=e.minZIndex();t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst})).unshift(this):n=[this];var r=0!==e.get("cells").indexOf(this);r||(r=n.some(function(t,e){return t.get("z")!==i+e})),r&&(this.startBatch("to-back"),i-=n.length,n.forEach(function(e,n){e.set("z",i+n,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var n=yr([],this.get("embeds"));return n[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e),this.set("embeds",Nr(n),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",Zr(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();0<n.length;){var i=n.shift();e.push(i),n.push.apply(n,i.getEmbeddedCells())}}else(e=this.getEmbeddedCells()).forEach(function(n){e.push.apply(e,n.getEmbeddedCells(t))});else e=zr(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=$r(t)?t:t.id,i=this.parent();if(e=Cr({deep:!0},e),this.graph&&e.deep){for(;i;){if(i===n)return!0;i=this.graph.getCell(i).parent()}return!1}return i===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return zr(eo([this].concat(this.getEmbeddedCells({deep:!0}))));var n=e.Model.prototype.clone.apply(this,arguments);return n.set("id",this.generateId()),n.unset("embeds"),n.unset("parent"),n},prop:function(t,e,n){var i=$r(t);if(i||Array.isArray(t)){if(1<arguments.length){var r,o,a=(o=i?(r=t).split("/"):(r=t.join("/"),t.slice()))[0],s=o.length;if((n=n||{}).propertyPath=r,n.propertyValue=e,n.propertyPathArray=o,1===s)return this.set(a,e,n);for(var l={},u=l,c=a,h=1;h<s;h++){var f=o[h],g=Number.isFinite(i?Number(f):f);u=u[c]=g?[]:{},c=f}l=Hi(l,o,e,"/");var d=Jr({},this.attributes);n.rewrite&&Ji(d,r,"/");var p=Jr(d,l);return this.set(a,p[a],n)}return Xi(this.attributes,t,"/")}return this.set(Jr({},this.attributes,t),e)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),i=n[0];if("attrs"===i&&(e.dirty=!0),1===n.length)return this.unset(t,e);var r=n.slice(1),o=Sr(this.get(i));return Ji(o,r,"/"),this.set(i,o,e)},attr:function(t,e,n){var i=Array.from(arguments);return 0===i.length?this.get("attrs"):(Array.isArray(t)?i[0]=["attrs"].concat(t):$r(t)?i[0]="attrs/"+t:i[0]={attrs:t},this.prop.apply(this,i))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,i){i=i||"/",n=yr({duration:100,delay:10,timingFunction:hr.linear,valueFunction:fr.number},n);var r,o=0,a=function(e){var i,s,l;(s=(e-=o=o||e)/n.duration)<1?this._transitionIds[t]=i=er(a):(s=1,delete this._transitionIds[t]),l=r(n.timingFunction(s)),n.transitionId=i,this.prop(t,l,n),i||this.trigger("transition:end",this,t)}.bind(this),s=function(o){this.stopTransitions(t),r=n.valueFunction(Xi(this.attributes,t,i),e),this._transitionIds[t]=er(o),this.trigger("transition:start",this,t)}.bind(this);return setTimeout(s,n.delay,a)},getTransitions:function(){return Object.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var n=t&&t.split(e);return Object.keys(this._transitionIds).filter(n&&function(t){return Tr(n,t.split(e).slice(0,n.length))}).forEach(function(t){nr(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,yr({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,yr({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&this.hasChanged(n)&&(e|=t[n]);return e},angle:function(){return 0},position:function(){return new Qn(0,0)},getPointFromConnectedLink:function(){return new Qn},getBBox:function(){return new di(0,0,0,0)}},{getAttributeDefinition:function(t){var e=this.attributes,n=xo;return e&&e[t]||n[t]},define:function(t,e,n,i){n=yr({defaults:br({type:t},e,this.prototype.defaults)},n);var r=this.extend(n,i);return"undefined"!=typeof joint&&_r(joint,"shapes")&&Hi(joint.shapes,t,r,"."),r}}),Mo=function(t,e,n){if($r(n)){if(!So[n])throw new Error('Unknown wrapper: "'+n+'"');n=So[n]}if(!Dr(n))throw new Error("Wrapper must be a function.");zr(e).forEach(function(e){t[e]=n(t[e])})},So={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,i=0<n&&e[0]||[],r=1<n&&e[n-1]||{};return Array.isArray(i)||(r instanceof No?i=e:i instanceof No&&(1<e.length&&e.pop(),i=e)),r instanceof No&&(r={}),t.call(this,i,r)}}},ko={wrapWith:Mo,wrappers:So,addClassNamePrefix:Wi,removeClassNamePrefix:Yi,parseDOMJSON:Ui,hashCode:Fi,getByPath:Xi,setByPath:Hi,unsetByPath:Ji,flattenObject:Qi,uuid:Ki,guid:qi,toKebabCase:$i,normalizeEvent:tr,nextFrame:er,cancelFrame:nr,shapePerimeterConnectionPoint:function(t,e,n,i){var r,o;if(!n){var a=e.$(".scalable")[0],s=e.$(".rotatable")[0];a&&a.firstChild?n=a.firstChild:s&&s.firstChild&&(n=s.firstChild)}return n?(o=Ri(n).findIntersection(i,t.paper.cells))||(r=Ri(n).getBBox({target:t.paper.cells})):o=(r=e.model.getBBox()).intersectionWithLineFromCenterToPoint(i),o||r.center()},isPercentage:ir,parseCssNumeric:rr,breakText:or,sanitizeHTML:ar,downloadBlob:sr,downloadDataUri:function(t,e){var n=lr(t);sr(n,e)},dataUriToBlob:lr,imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout(function(){e(null,t)},0);var n=new XMLHttpRequest;n.open("GET",t,!0),n.addEventListener("error",function(){e(new Error("Failed to load image "+t))}),n.responseType=window.FileReader?"blob":"arraybuffer",n.addEventListener("load",function(){window.FileReader?function(e,n){if(200===e.status){var i=new FileReader;i.onload=function(t){var e=t.target.result;n(null,e)},i.onerror=function(){n(new Error("Failed to load image "+t))},i.readAsDataURL(e.response)}else n(new Error("Failed to load image "+t))}(n,e):function(e,n){if(200===e.status){var i=new Uint8Array(e.response),r=t.split(".").pop()||"png";n(null,"data:image/"+({svg:"svg+xml"}[r]||r)+";base64,"+btoa(function(t){for(var e=[],n=0;n<t.length;n+=32768)e.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return e.join("")}(i)))}else n(new Error("Failed to load image "+t))}(n,e)}),n.send()},getElementBBox:function(t){var e=i(t);if(0===e.length)throw new Error("Element not found");var n=e[0],r=n.ownerDocument,o=n.getBoundingClientRect(),a=0,s=0;if(n.ownerSVGElement){var l=Ri(n),u=l.getBBox({target:l.svg()});a=o.width-u.width,s=o.height-u.height}return{x:o.left+window.pageXOffset-r.documentElement.offsetLeft+a/2,y:o.top+window.pageYOffset-r.documentElement.offsetTop+s/2,width:o.width-a,height:o.height-s}},sortElements:ur,setAttributesBySelector:function(t,e){var n=i(t);Xr(e,function(t,e){var i=n.find(e).addBack().filter(e);_r(t,"class")&&(i.addClass(t.class),t=Yr(t,"class")),i.attr(t)})},normalizeSides:cr,timing:hr,interpolate:fr,filter:gr,format:dr,template:pr,toggleFullScreen:function(t){var e=window.top.document;function n(t,e){for(var n=["webkit","moz","ms","o",""],i=0;i<n.length;i++){var r=n[i],o=r?r+e:e.substr(0,1).toLowerCase()+e.substr(1);if(void 0!==t[o])return Dr(t[o])?t[o]():t[o]}}t=t||e.body,n(e,"FullscreenElement")||n(e,"FullScreenElement")?n(e,"ExitFullscreen")||n(e,"CancelFullScreen"):n(t,"RequestFullscreen")||n(t,"RequestFullScreen")},mixin:mr,supplement:vr,deepMixin:Ir,deepSupplement:Ar,assign:yr,defaults:Cr,defaultsDeep:br,invoke:wr,sortedIndex:xr,uniq:Nr,clone:Mr,cloneDeep:Sr,isEmpty:kr,isEqual:Tr,isFunction:Dr,isPlainObject:jr,toArray:zr,debounce:Lr,groupBy:Pr,sortBy:Er,flattenDeep:Or,without:Zr,difference:Br,intersection:Gr,union:Rr,has:_r,result:Wr,omit:Yr,pick:Ur,bindAll:Fr,forIn:Xr,camelCase:Vr,uniqueId:Hr,merge:Jr,isBoolean:Qr,isObject:Kr,isNumber:qr,isString:$r,noop:to,cloneCells:eo};function To(t,e,n){var i=t.toJSON();return i.angle=e||0,Cr({},n,i)}function Do(t,e,n){return t.map(function(t,e,n){var i=this.pointAt((e+.5)/n.length);return(t.dx||t.dy)&&i.offset(t.dx||0,t.dy||0),To(i.round(),0,t)},ei(e,n))}function jo(t,e,n,i){var r=e.center(),o=e.width/e.height,a=e.topMiddle(),s=oi.fromRect(e);return t.map(function(t,e,l){var u=n+i(e,l.length),c=a.clone().rotate(r,-u).scale(o,1,r),h=t.compensateRotation?-s.tangentTheta(c):0;return(t.dx||t.dy)&&c.offset(t.dx||0,t.dy||0),t.dr&&c.move(r,t.dr),To(c.round(),h,t)})}function zo(t,e){var n=e.x;$r(n)&&(n=parseFloat(n)/100*t.width);var i=e.y;return $r(i)&&(i=parseFloat(i)/100*t.height),Kn(n||0,i||0)}var Lo={absolute:function(t,e,n){return t.map(zo.bind(null,e))},fn:function(t,e,n){return n.fn(t,e,n)},line:function(t,e,n){return Do(t,zo(e,n.start||e.origin()),zo(e,n.end||e.corner()))},left:function(t,e,n){return Do(t,e.origin(),e.bottomLeft())},right:function(t,e,n){return Do(t,e.topRight(),e.corner())},top:function(t,e,n){return Do(t,e.origin(),e.topRight())},bottom:function(t,e,n){return Do(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,n){var i=n.startAngle||0,r=n.step||360/t.length;return jo(t,e,i,function(t){return t*r})},ellipse:function(t,e,n){var i=n.startAngle||0,r=n.step||20;return jo(t,e,i,function(t,e){return(t+.5-e/2)*r})}};function Po(t,e){return br({},t,e,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function Eo(t,e,n,i){i=Cr({},i,{offset:15});var r,o,a,s,l=e.center().theta(t),u=Oo(e),c=i.offset,h=0;s=l<u[1]||l>u[2]?(a=".3em",r=c,o=0,"start"):l<u[0]?(a="0",r=0,o=-c,n?(h=-90,"start"):"middle"):l<u[3]?(a=".3em",r=-c,o=0,"end"):(a=".6em",r=0,o=c,n?(h=90,"start"):"middle");var f=Math.round;return Po({x:f(r),y:f(o),angle:h,attrs:{".":{y:a,"text-anchor":s}}})}function Oo(t){var e=t.center(),n=e.theta(t.origin()),i=e.theta(t.bottomLeft()),r=e.theta(t.corner());return[n,e.theta(t.topRight()),r,i]}function Zo(t,e,n,i){var r,o,a,s,l=e.center().theta(t),u=(i=Cr({},i,{offset:15})).offset,c=0,h=Oo(e);s=l<h[1]||l>h[2]?(a=".3em",r=-u,o=0,"end"):l<h[0]?(a=".6em",r=0,o=u,n?(c=90,"start"):"middle"):l<h[3]?(a=".3em",r=u,o=0,"start"):(a="0em",r=0,o=-u,n?(c=-90,"start"):"middle");var f=Math.round;return Po({x:f(r),y:f(o),angle:c,attrs:{".":{y:a,"text-anchor":s}}})}function Bo(t,e,n){n=Cr({},n,{offset:20});var i,r=Kn(0,0),o=-t.theta(r),a=o,s=t.clone().move(r,n.offset).difference(t).round(),l=".3em";(o+90)%180==0?(i=e?"end":"middle",e||-270!==o||(l="0em")):-270<o&&o<-90?(i="start",a=o-180):i="end";var u=Math.round;return Po({x:u(s.x),y:u(s.y),angle:e?a:0,attrs:{".":{y:l,"text-anchor":i}}})}var Go={manual:function(t,e,n){return Po(n,e)},left:function(t,e,n){return Po(n,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,n){return Po(n,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,n){return Po(n,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,n){return Po(n,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,n){return Eo(t,e,!0,n)},outside:function(t,e,n){return Eo(t,e,!1,n)},insideOriented:function(t,e,n){return Zo(t,e,!0,n)},inside:function(t,e,n){return Zo(t,e,!1,n)},radial:function(t,e,n){return Bo(t.difference(e.center()),!1,n)},radialOriented:function(t,e,n){return Bo(t.difference(e.center()),!0,n)}},Ro=No.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){return void 0===t?Mr(this.get("source")):(r=t instanceof No?((i=Mr(e)||{}).id=t.id,n):jr(t)?(i=t,e):((i=Mr(e)||{}).x=t.x,i.y=t.y,n),this.set("source",i,r));var i,r},target:function(t,e,n){return void 0===t?Mr(this.get("target")):(r=t instanceof No?((i=Mr(e)||{}).id=t.id,n):jr(t)?(i=t,e):((i=Mr(e)||{}).x=t.x,i.y=t.y,n),this.set("target",i,r));var i,r},router:function(t,e,n){if(void 0===t){var i=this.get("router");return i?"object"==typeof i?Mr(i):i:this.get("manhattan")?{name:"orthogonal"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},a=r?e:n;return this.set("router",o,a)},connector:function(t,e,n){if(void 0===t){var i=this.get("connector");return i?"object"==typeof i?Mr(i):i:this.get("smooth")?{name:"smooth"}:null}var r="object"==typeof t||"function"==typeof t,o=r?t:{name:t,args:e},a=r?e:n;return this.set("connector",o,a)},label:function(t,e,n){var i=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=i.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var i=this.labels(),r=i.length;return(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1),i.splice(t,0,e),this.labels(i,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var i=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=i.length+t),arguments.length<=1)return this.prop(["vertices",t]);var r=this._normalizeVertex(e);return this.prop(["vertices",t],r,n)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],i=0;i<t.length;i++){var r=t[i],o=this._normalizeVertex(r);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),r=i.length;(t=isFinite(t)&&null!==t?0|t:r)<0&&(t=r+t+1);var o=this._normalizeVertex(e);return i.splice(t,0,o),this.vertices(i,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){return jr(t)?t:{x:t.x,y:t.y}},translate:function(t,e,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}},n)},scale:function(t,e,n,i){return this.applyToPoints(function(i){return Qn(i).scale(t,e,n).toJSON()},i)},applyToPoints:function(t,e){if(!Dr(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},i=this.attributes,r=i.source,o=i.target;r.id||(n.source=t(r)),o.id||(n.target=t(o));var a=this.vertices();return 0<a.length&&(n.vertices=a.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new Qn(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new Qn(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){var t=[this.getSourcePoint()].concat(this.vertices().map(Qn),[this.getTargetPoint()]);return new vi(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),i=this.getTargetElement(),r=this.getParentCell();n&&i&&(e=n===i||n.isEmbeddedIn(i)?i:i.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,i)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.attributes,n=e.source,i=e.target,r=n.id,o=i.id;if(!r||!o)return!1;var a=r===o;if(!a&&t.deep&&this.graph){var s=this.getSourceCell(),l=this.getTargetCell();a=s.isEmbeddedIn(l)||l.isEmbeddedIn(s)}return a},getSourceCell:function(){var t=this.graph,e=this.attributes.source;return e&&e.id&&t&&t.getCell(e.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){var t=this.graph,e=this.attributes.target;return e&&e.id&&t&&t.getCell(e.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=$r(t)||qr(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}}),_o=function(t){var e=Sr(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Lo,this.portLabelLayoutNamespace=Go,this._init(e)};_o.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),i=this.getPortsByGroup(t),r=n.position||{},o=r.name,a=this.portLayoutNamespace;a[o]||(o="left");var s=r.args||{},l=i.map(function(t){return t&&t.position&&t.position.args}),u=a[o](l,e,s),c={ports:i,result:[]};return zr(u).reduce(function(t,n,i){var r=t.ports[i];return t.result.push({portId:r.id,portTransformation:n,labelTransformation:this._getPortLabelLayout(r,Qn(n),e),portAttrs:r.attrs,portSize:r.size,labelSize:r.label.size}),t}.bind(this),c),c.result},_getPortLabelLayout:function(t,e,n){var i=this.portLabelLayoutNamespace,r=t.label.position.name||"left";return i[r]?i[r](e,n,t.label.position.args):null},_init:function(t){if(Kr(t.groups))for(var e=Object.keys(t.groups),n=0,i=e.length;n<i;n++){var r=e[n];this.groups[r]=this._evaluateGroup(t.groups[r])}for(var o=zr(t.items),a=0,s=o.length;a<s;a++)this.ports.push(this._evaluatePort(o[a]))},_evaluateGroup:function(t){return Jr(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=yr({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=Jr({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=Jr({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=yr({},n.size,e.size),e},_getZIndex:function(t,e){return qr(e.z)?e.z:qr(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return Jr({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n,i={};Dr(t)?(n="fn",i.fn=t):$r(t)?n=t:void 0===t?n=e?"left":null:Array.isArray(t)?(n="absolute",i.x=t[0],i.y=t[1]):Kr(t)&&(n=t.name,yr(i,t.args));var r={args:i};return n&&(r.name=n),r},_getLabel:function(t,e){var n=t.label||{},i=n;return i.position=this._getPosition(n.position,e),i}};var Wo={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};zr(t.items).forEach(function(t){e[t.id]=!0});var n=this.previous("ports")||{},i={};zr(n.items).forEach(function(t){e[t.id]||(i[t.id]=!0)});var r=this.graph;r&&!kr(i)&&(r.getConnectedLinks(this,{inbound:!0}).forEach(function(t){i[t.get("target").port]&&t.remove()}),r.getConnectedLinks(this,{outbound:!0}).forEach(function(t){i[t.get("source").port]&&t.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&0<t.length},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return Sr(this.prop("ports/items"))||[]},getGroupPorts:function(t){var e=zr(this.prop(["ports","items"])).filter(function(e){return e.group===t});return Sr(e)},getPort:function(t){return Sr(zr(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,di(this.size())).reduce(function(t,e){var n=e.portTransformation;return t[e.portId]={x:n.x,y:n.y,angle:n.angle},t},{})},getPortIndex:function(t){var e=Kr(t)?t.id:t;return this._isValidPortId(e)?zr(this.prop("ports/items")).findIndex(function(t){return t.id===e}):-1},addPort:function(t,e){if(!Kr(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=yr([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){var i="number"==typeof t?t:this.getPortIndex(t);if(!Kr(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");var r=yr([],this.prop("ports/items"));return r.splice(i,0,e),this.prop("ports/items",r,n),this},portProp:function(t,e,n,i){var r=this.getPortIndex(t);if(-1===r)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",r].concat(e):$r(e)?o[0]=["ports/items/",r,"/",e].join(""):(o=["ports/items/"+r],jr(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],n=zr((t=t||{}).items);return n.forEach(function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())},this),Nr(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!Kr(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",yr([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){var n=e||{},i=this.getPortIndex(t);if(-1!==i){var r=yr([],this.prop(["ports","items"]));r.splice(i,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],r,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){var n,i;if(Array.isArray(t)){if(n=e||{},0===t.length)return this.this;i=yr([],this.prop(["ports","items"])).filter(function(e){return!t.some(function(t){var n=Kr(t)?t.id:t;return e.id===n})})}else n=t||{},i=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],i,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(0<e.length)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new _o(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var i=n.filter(function(e){if(!t.find(function(t){return t.id===e.id}))return e}),r=t.filter(function(t){if(!n.find(function(e){return e.id===t.id}))return t});0<r.length&&this.trigger("ports:remove",this,r),0<i.length&&this.trigger("ports:add",this,i)}}},Yo={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,i=e.node.childNodes.length;n<i;n++)t.push(e.node.childNodes[n]);var r=Pr(this.model._portSettingsData.getPorts(),"z");zr(r.auto).forEach(function(n){var i=this._getPortElement(n);e.append(i),t.push(i)},this);for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a];if("auto"!==s){var l=parseInt(s,10);this._appendPorts(r[s],l,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var i=this._getContainerElement(),r=zr(t).map(this._getPortElement,this);n[e]||e<0?Ri(n[Math.max(e,0)]).before(r):i.append(r)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){var n=this._portElementsCache[t];if(!n)return null;var i=n.portContentElement.node,r=n.portContentSelectors,o=this.findBySelector(e,i,r)[0];return void 0===o&&(o=null),o},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){wr(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e,n,i,r=Ri(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(t);if(Array.isArray(o)){var a=this.parseDOMJSON(o,r.node),s=a.fragment;e=1<s.childNodes.length?Ri("g").append(s):Ri(s.firstChild),i=a.selectors}else e=Ri(o),Array.isArray(e)&&(e=Ri("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});var l,u,c=this._getPortLabelMarkup(t.label);if(Array.isArray(c)){var h=this.parseDOMJSON(c,r.node),f=h.fragment;n=1<f.childNodes.length?Ri("g").append(f):Ri(f.firstChild),l=h.selectors}else n=Ri(c),Array.isArray(n)&&(n=Ri("g").append(n));if(!n)throw new Error("ElementView: Invalid port label markup.");if(i&&l){for(var g in l)if(i[g]&&g!==this.selector)throw new Error("ElementView: selectors within port must be unique.");u=yr({},i,l)}else u=i||l;return r.append([e.addClass("joint-port-body"),n.addClass("joint-port-label")]),this._portElementsCache[t.id]={portElement:r,portLabelElement:n,portSelectors:u,portLabelSelectors:l,portContentElement:e,portContentSelectors:i},r},_updatePortGroup:function(t){for(var e=di(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),i=0,r=n.length;i<r;i++){var o=n[i],a=o.portId,s=this._portElementsCache[a]||{},l=o.portTransformation;this.applyPortTransform(s.portElement,l),this.updateDOMSubtreeAttributes(s.portElement.node,o.portAttrs,{rootBBox:new di(o.portSize),selectors:s.portSelectors});var u=o.labelTransformation;u&&(this.applyPortTransform(s.portLabelElement,u,-l.angle||0),this.updateDOMSubtreeAttributes(s.portLabelElement.node,u.attrs,{rootBBox:new di(o.labelSize),selectors:s.portLabelSelectors}))}},applyPortTransform:function(t,e,n){var i=Ri.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(i,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Uo=No.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),No.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){var i=qr(e);if((n=(i?n:t)||{}).parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var r=this.getParentCell(),o=r&&!r.isLink()?r.get("position"):{x:0,y:0}}if(i){if(n.parentRelative&&(t+=o.x,e+=o.y),n.deep){var a=this.get("position");this.translate(t-a.x,e-a.y,n)}else this.set("position",{x:t,y:e},n);return this}var s=Qn(this.get("position"));return n.parentRelative?s.difference(o):s},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var i=this.get("position")||{x:0,y:0},r=n.restrictedArea;if(r&&n.translateBy===this.id)if("function"==typeof r){var o=r.call(this,i.x+t,i.y+e,n);t=o.x-i.x,e=o.y-i.y}else{var a=this.getBBox({deep:!0}),s=i.x-a.x,l=i.y-a.y,u=Math.max(r.x+s,Math.min(r.x+r.width+s-a.width,i.x+t)),c=Math.max(r.y+l,Math.min(r.y+r.height+l-a.height,i.y+e));t=u-i.x,e=c-i.y}var h={x:i.x+t,y:i.y+e};return n.tx=t,n.ty=e,n.transition?(Kr(n.transition)||(n.transition={}),this.transition("position",h,yr({},n.transition,{valueFunction:fr.object})),wr(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",h,n),wr(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var i=this.get("size");return void 0===t?{width:i.width,height:i.height}:(Kr(t)&&(n=e,e=qr(t.height)?t.height:i.height,t=qr(t.width)?t.width:i.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var i=this.get("size");switch(n.direction){case"left":case"right":e=i.height;break;case"top":case"bottom":t=i.width}var r,o=Tn(this.get("angle")||0),a=this.getBBox();if(o){var s={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(s+=Math.floor((o+45)/90),s%=4);var l=a[["bottomLeft","corner","topRight","origin"][s]](),u=Qn(l).rotate(a.center(),-o),c=Math.sqrt(t*t+e*e)/2,h=s*Math.PI/2;h+=Math.atan(s%2==0?e/t:t/e),h-=zn(o);var f=Qn.fromPolar(c,h,u);r=Qn(f).offset(t/-2,e/-2)}else switch(r=a.topLeft(),n.direction){case"top":case"top-right":r.offset(0,a.height-e);break;case"left":case"bottom-left":r.offset(a.width-t,0);break;case"top-left":r.offset(a.width-t,a.height-e)}this.set("size",{width:t,height:e},n),this.position(r.x,r.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,i){var r=this.getBBox().scale(t,e,n);return this.startBatch("scale",i),this.position(r.x,r.y,i),this.resize(r.width,r.height,i),this.stopBatch("scale"),this},fitEmbeds:function(t){void 0===t&&(t={});var e=this.graph;if(!e)throw new Error("Element must be part of a graph.");var n=this.getEmbeddedCells().filter(function(t){return t.isElement()});if(0===n.length)return this;this.startBatch("fit-embeds",t),t.deep&&wr(n,"fitEmbeds",t);var i=cr(t.padding),r=i.left,o=i.right,a=i.top,s=i.bottom,l=e.getCellsBBox(n),u=l.x,c=l.y,h=l.width,f=l.height;return u-=r,c-=a,h+=r+o,f+=s+a,this.set({position:{x:u,y:c},size:{width:h,height:f}},t),this.stopBatch("fit-embeds"),this},rotate:function(t,e,n,i){if(n){var r=this.getBBox().center(),o=this.get("size"),a=this.get("position");r.rotate(n,this.get("angle")-t);var s=r.x-o.width/2-a.x,l=r.y-o.height/2-a.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(a.x+s,a.y+l,i),this.rotate(t,e,null,i),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,i);return this},angle:function(){return Tn(this.get("angle")||0)},getBBox:function(t){if((t=t||{}).deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var n=this.get("position"),i=this.get("size");return new di(n.x,n.y,i.width,i.height)},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),i=n.center(),r=t.get(e);if(!r)return i;var o=r.port;if(!o||!this.hasPort(o))return i;var a=this.portProp(o,["group"]),s=this.getPortsPositions(a),l=new Qn(s[o]).offset(n.origin()),u=this.angle();return u&&l.rotate(i,-u),l}});yr(Uo.prototype,Wo);var Fo=e.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&_r(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,i=n.cellNamespace,r=new("link"===t.type?Ro:Xi(i,t.type,".")||Uo)(t,e);return e.dry||(r.graph=n.graph),r},comparator:function(t){return t.get("z")||0}}),Xo=e.Model.extend({initialize:function(t,n){var i=new Fo([],{model:(n=n||{}).cellModel,cellNamespace:n.cellNamespace,graph:this});e.Model.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.attributes,n=e.source,i=e.target;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0),i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.attributes,n=e.source,i=e.target;n.id&&this._out[n.id]&&this._out[n.id][t.id]&&delete this._out[n.id][t.id],i.id&&this._in[i.id]&&this._in[i.id][t.id]&&delete this._in[i.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,n,i){var r;return"object"==typeof t?(r=t,i=n):(r={})[t]=n,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,i),r=Yr(r,"cells")),e.Model.prototype.set.call(this,r,i)},clear:function(t){t=yr({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);for(var n=e.sortBy(function(t){return t.isLink()?1:2});n.shift().remove(t),0<n.length;);return this.stopBatch("clear"),this},_prepareCell:function(t,n){var i;if(t instanceof e.Model?(i=t.attributes,t.graph||n&&n.dry||(t.graph=this)):i=t,!$r(i.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,n){return Array.isArray(t)?this.addCells(t,n):(t instanceof e.Model?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,n),n||{}),this)},addCells:function(t,e){return 0===t.length||(t=Or(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(t){this.addCell(t,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var n=zr(t).map(function(t){return this._prepareCell(t,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),wr(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(function(t){return t.isElement()})},getLinks:function(){return this.get("cells").filter(function(t){return t.isLink()})},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var n=(e=e||{}).indirect,i=e.inbound,r=e.outbound;void 0===i&&void 0===r&&(i=r=!0);var o=[],a={};function s(t,e){if(Xr(t.getOutboundEdges(e.id),function(e,u){if(!a[u]){var c=t.getCell(u);o.push(c),a[u]=!0,n&&(i&&l(t,c),r&&s(t,c))}}.bind(t)),n&&e.isLink()){var u=e.getTargetCell();u&&u.isLink()&&(a[u.id]||(o.push(u),s(t,u)))}}function l(t,e){if(Xr(t.getInboundEdges(e.id),function(e,u){if(!a[u]){var c=t.getCell(u);o.push(c),a[u]=!0,n&&(i&&l(t,c),r&&s(t,c))}}.bind(t)),n&&e.isLink()){var u=e.getSourceCell();u&&u.isLink()&&(a[u.id]||(o.push(u),l(t,u)))}}if(r&&s(this,t),i&&l(this,t),e.deep){var u=t.getEmbeddedCells({deep:!0}),c={};u.forEach(function(t){t.isElement()&&(c[t.id]=!0)}),u.forEach(function(t){t.isLink()||(r&&Xr(this.getOutboundEdges(t.id),function(t,n){if(!a[n]){var i=this.getCell(n).attributes,r=i.source,s=i.target,l=r.id,u=s.id;if(!e.includeEnclosed&&l&&c[l]&&u&&c[u])return;o.push(this.getCell(n)),a[n]=!0}}.bind(this)),i&&Xr(this.getInboundEdges(t.id),function(t,n){if(!a[n]){var i=this.getCell(n).attributes,r=i.source,s=i.target,l=r.id,u=s.id;if(!e.includeEnclosed&&l&&c[l]&&u&&c[u])return;o.push(this.getCell(n)),a[n]=!0}}.bind(this)))},this)}return o},getNeighbors:function(t,e){e||(e={});var n=e.inbound,i=e.outbound;void 0===n&&void 0===i&&(n=i=!0);var r=this.getConnectedLinks(t,e).reduce(function(r,o){var a=o.attributes,s=a.source,l=a.target,u=o.hasLoop(e);if(n&&_r(s,"id")&&!r[s.id]){var c=this.getCell(s.id);c.isElement()&&(!u&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(r[s.id]=c))}if(i&&_r(l,"id")&&!r[l.id]){var h=this.getCell(l.id);h.isElement()&&(!u&&(!h||h===t||e.deep&&h.isEmbeddedIn(t))||(r[l.id]=h))}return r}.bind(this),{});if(t.isLink()){if(n){var o=t.getSourceCell();o&&o.isElement()&&!r[o.id]&&(r[o.id]=o)}if(i){var a=t.getTargetCell();a&&a.isElement()&&!r[a.id]&&(r[a.id]=a)}}return zr(r)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e},this);t=t.sort(function(t,e){return t.length-e.length});var e=zr(t.shift()).find(function(e){return t.every(function(t){return t.includes(e)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},yr({},e,{outbound:!0})),n},cloneCells:eo,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],i={},r=[],o=[];return zr(t).forEach(function(t){i[t.id]||(n.push(t),(i[t.id]=t).isLink()?o.push(t):r.push(t)),e.deep&&t.getEmbeddedCells({deep:!0}).forEach(function(t){i[t.id]||(n.push(t),(i[t.id]=t).isLink()?o.push(t):r.push(t))})}),o.forEach(function(t){var e=t.attributes,o=e.source,a=e.target;if(o.id&&!i[o.id]){var s=this.getCell(o.id);n.push(s),i[s.id]=s,r.push(s)}if(a.id&&!i[a.id]){var l=this.getCell(a.id);n.push(this.getCell(a.id)),i[l.id]=l,r.push(l)}},this),r.forEach(function(t){this.getConnectedLinks(t,e).forEach(function(t){var e=t.attributes,r=e.source,o=e.target;!i[t.id]&&r.id&&i[r.id]&&o.id&&i[o.id]&&(n.push(t),i[t.id]=t)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},yr({},e,{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n){void 0===n&&(n={});var i={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var a=o.shift();if(!i[a.id]&&!(i[a.id]=!0)!==e.call(this,a,r[a.id]))for(var s=this.getNeighbors(a,n),l=0,u=s.length;l<u;l++){var c=s[l];r[c.id]=r[a.id]+1,o.push(c)}}},dfs:function(t,e,n){void 0===n&&(n={});var i={},r={},o=[];for(o.push(t),r[t.id]=0;0<o.length;){var a=o.pop();if(!i[a.id]&&!(i[a.id]=!0)!==e.call(this,a,r[a.id]))for(var s=this.getNeighbors(a,n),l=o.length,u=0,c=s.length;u<c;u++){var h=s[u];r[h.id]=r[a.id]+1,o.splice(l,0,h)}}},getSources:function(){var t=[];return Xr(this._nodes,function(e,n){this._in[n]&&!kr(this._in[n])||t.push(this.getCell(n))}.bind(this)),t},getSinks:function(){var t=[];return Xr(this._nodes,function(e,n){this._out[n]&&!kr(this._out[n])||t.push(this.getCell(n))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||kr(this._in[t.id])},isSink:function(t){return!this._out[t.id]||kr(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(i){if(i===e&&i!==t)return!(n=!0)},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(i){if(i===e&&i!==t)return!(n=!0)},{inbound:!0}),n},isNeighbor:function(t,e,n){var i=(n=n||{}).inbound,r=n.outbound;void 0===i&&void 0===r&&(i=r=!0);var o=!1;return this.getConnectedLinks(t,n).forEach(function(t){var n=t.attributes,a=n.source,s=n.target;return i&&_r(a,"id")&&a.id===e.id||r&&_r(s,"id")&&s.id===e.id?!(o=!0):void 0}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){wr(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(function(e){return e.getBBox().containsPoint(t)})},findModelsInArea:function(t,e){t=pi(t);var n=(e=Cr(e||{},{strict:!1})).strict?"containsRect":"intersect";return this.getElements().filter(function(e){return t[n](e.getBBox())})},findModelsUnderElement:function(t,e){e=Cr(e||{},{searchBy:"bbox"});var n=t.getBBox();return("bbox"===e.searchBy?this.findModelsInArea(n):this.findModelsFromPoint(n[e.searchBy]())).filter(function(e){return t.id!==e.id&&!e.isEmbeddedIn(t)})},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e){return e||(e={}),zr(t).reduce(function(t,n){var i=n.getBBox(e);if(!i)return t;var r=n.angle();return r&&(i=i.bbox(r)),t?t.union(i):i},null)},translate:function(t,e,n){var i=this.getCells().filter(function(t){return!t.isEmbedded()});return wr(i,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,i){var r=this.getCellsBBox(n);if(r){var o=Math.max(t/r.width,0),a=Math.max(e/r.height,0);wr(n,"scale",o,a,r.origin(),i)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",yr({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",yr({},e,{batchName:t}))},hasActiveBatch:function(t){var e=this._batches;return(0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t]).some(function(t){return 0<e[t]})}},{validations:{multiLinks:function(t,e){var n=e.attributes,i=n.source,r=n.target;if(i.id&&r.id){var o=e.getSourceCell();if(o&&1<t.getConnectedLinks(o,{outbound:!0}).filter(function(t){var e=t.attributes,n=e.source,o=e.target;return n&&n.id===i.id&&(!n.port||n.port===i.port)&&o&&o.id===r.id&&(!o.port||o.port===r.port)}).length)return!1}return!0},linkPinning:function(t,e){var n=e.attributes,i=n.source,r=n.target;return i.id&&r.id}}});Mo(Xo.prototype,["resetCells","addCells","removeCells"],So.cells);var Vo={},Ho=e.View.extend({options:{},theme:null,themeClassNamePrefix:Wi("theme-"),requireSetThemeOverride:!1,defaultTheme:_i.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=yr({},this.options,t),e.View.call(this,t)},initialize:function(){(Vo[this.cid]=this).setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},renderChildren:function(t){if(t||(t=Wr(this,"children")),t){var e=this.svgElement,n=Ri.namespace[e?"svg":"xhtml"],i=Ui(t,n);(e?this.vel:this.$el).empty().append(i.fragment),this.childNodes=i.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&1===n.nodeType;){var i=n.getAttribute(t);if(i)return i;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Wr(this,"el"));else{var t=Wr(this,"tagName"),e=yr({},Wr(this,"attributes")),n=yr({},Wr(this,"style"));this.id&&(e.id=Wr(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(Ri.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=Ri(this.el))},_ensureElClassName:function(){var t=Wr(this,"className");if(t){var e=Wi(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Vo[this.cid]=null,e.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var o in e){var a=e[o];"function"!=typeof a&&(a=this[a]),a&&i(t).on(o+r,n,a.bind(this))}return this},undelegateElementEvents:function(t){return i(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=Wr(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,i="__"+this.cid+"__";return void 0===e?n&&n[i]||{}:(n||(n=t.data={}),n[i]||(n[i]={}),yr(n[i],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),n=t[0]&&yr({},t[0])||{},i=t[1]&&yr({},t[1])||{},r=n.render||this.prototype&&this.prototype.render||null;return n.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},n.render.__render__=r,e.View.extend.call(this,n,i)}}),Jo={views:Vo,View:Ho};function Qo(t){return t?Array.isArray(t)?t:[t]:[]}var Ko=Ho.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,transformGroup:null,requestUpdate:function(t,e){var n=t.paper;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate:function(){this.updateRequested=!1;var t=this.cellView,e=this.nodeSelector;return this.update(t,e),this.mount(),this.transform(),0},findNode:function(t,e){var n;if(void 0===e&&(e=null),"string"==typeof e)n=t.findBySelector(e)[0];else if(jr(e)){var i=t.model.isLink(),r=e.label;void 0===r&&(r=null);var o=e.port,a=e.selector;n=i&&null!==r?t.findLabelNode(r,a):!i&&o?t.findPortNode(o,a):t.findBySelector(a)[0]}else e&&((n=Ri.toNode(e))instanceof SVGElement||(n=null));return n||null},mount:function(){var t=this.MOUNTABLE,e=this.cellView,n=this.el,i=this.options,r=this.transformGroup;if(t&&!r){var o=e.vel,a=e.paper,s=i.layer;s?this.transformGroup=Ri("g").addClass("highlight-transform").append(n).appendTo(a.getLayerNode(s)):n.parentNode&&!n.nextSibling||o.append(n)}},unmount:function(){var t=this.MOUNTABLE,e=this.transformGroup,n=this.vel;t&&(e?(this.transformGroup=null,e.remove()):n.remove())},transform:function(){var t=this.transformGroup,e=this.cellView,n=this.updateRequested;if(t&&!e.model.isLink()&&!n){var i=e.getRootTranslateMatrix(),r=e.getRootRotateMatrix(),o=i.multiply(r);t.attr("transform",Ri.matrixToTransformString(o))}},update:function(){var t=this.node,e=this.cellView,n=this.nodeSelector,i=this.updateRequested,r=this.id;if(!i){var o=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",r,this))}},onRemove:function(){var t=this.node,e=this.cellView,n=this.id,i=this.constructor;t&&this.unhighlight(e,t),this.unmount(),i._removeRef(e,n)},highlight:function(t,e){},unhighlight:function(t,e){}},{_views:{},highlight:function(t,e,n){var i=this.uniqueId(e,n);this.add(t,e,i,n)},unhighlight:function(t,e,n){var i=this.uniqueId(e,n);this.remove(t,i)},get:function(t,e){void 0===e&&(e=null);var n=t.cid,i=this._views[n];if(null===e){var r=[];if(!i)return r;for(var o in i){var a=i[o];a instanceof this&&r.push(a)}return r}if(!i)return null;if(e in i){var s=i[e];if(s instanceof this)return s}return null},add:function(t,e,n,i){if(void 0===i&&(i={}),!n)throw new Error("dia.HighlighterView: An ID required.");var r=Ko.get(t,n);r&&r.remove();var o=new this(i);return o.id=n,this._addRef(t,n,o),o.requestUpdate(t,e),o},_addRef:function(t,e,n){var i=t.cid,r=this._views,o=r[i];o||(o=r[i]={}),o[e]=n},_removeRef:function(t,e){var n=t.cid,i=this._views,r=i[n];if(r){for(var o in e&&delete r[e],r)return;delete i[n]}},remove:function(t,e){void 0===e&&(e=null),Qo(this.get(t,e)).forEach(function(t){t.remove()})},update:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1),Qo(this.get(t,e)).forEach(function(t){(n||t.UPDATABLE)&&t.update()})},transform:function(t,e){void 0===e&&(e=null),Qo(this.get(t,e)).forEach(function(t){t.UPDATABLE&&t.transform()})},uniqueId:function(t,e){return void 0===e&&(e=""),Ri.ensureId(t)+JSON.stringify(e)}}),qo={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},$o=Ho.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(e,n,i){t.push("type-"+i.slice(0,n+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,n,i={},r={},o=0,a=this.presentationAttributes;for(var s in a)if(a.hasOwnProperty(s)){var l=a[s];for(Array.isArray(l)||(l=[l]),t=0,e=l.length;t<e;t++){var u=i[n=l[t]];u||(u=i[n]=1<<o++),r[s]|=u}}var c=this.initFlag;for(Array.isArray(c)||(c=[c]),t=0,e=c.length;t<e;t++)i[n=c[t]]||(i[n]=1<<o++);if(25<o)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=i,this._presentationAttributes=r},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n|=e[t[i]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||qi(this),Ho.call(this,t)},initialize:function(){this.setFlags(),Ho.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);!e.updateHandled&&n&&(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){var n=this.paper;n&&0<t&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=Ui(t),i=n.selectors,r=n.groupSelectors;for(var o in r){if(i[o])throw new Error("dia.CellView: ambiguous group selector");i[o]=r[o]}if(e){var a=this.selector;if(i[a])throw new Error("dia.CellView: ambiguous root selector.");i[a]=e}return{fragment:n.fragment,selectors:i}},can:function(t){var e=Dr(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Kr(e)&&!1!==e[t]||Qr(e)&&!1!==e},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||"."===t)return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return _i.useCSSSelectors?i(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),i=this.getRootTranslateMatrix(),r=this.getRootRotateMatrix();return Ri.transformRect(e,i.multiply(r).multiply(n))},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),i=this.getRootTranslateMatrix();return Ri.transformRect(e,i.multiply(n))},getRootTranslateMatrix:function(){var t=this.model.position();return Ri.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=Ri.createSVGMatrix(),e=this.model,n=e.angle();if(n){var i=e.getBBox(),r=i.width/2,o=i.height/2;t=t.translate(r,o).rotate(n).translate(-r,-o)}return t},_notifyHighlight:function(t,e,n){void 0===n&&(n={});var i,r=this.el;if(i="string"==typeof e?void 0===(i=this.findBySelector(e)[0])?r:i:void 0===(i=this.$(e)[0])?r:i,n.partial=i!==r,void 0===n.type){var o;switch(!0){case n.embedding:o=qo.EMBEDDING;break;case n.connecting:o=qo.CONNECTING;break;case n.magnetAvailability:o=qo.MAGNET_AVAILABILITY;break;case n.elementAvailability:o=qo.ELEMENT_AVAILABILITY;break;default:o=qo.DEFAULT}n.type=o}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e){return void 0===e&&(e={}),this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){var e=this.el,n=this.$(t)[0];n||(n=e);do{var i=n.getAttribute("magnet"),r=n===e;if((i||r)&&"false"!==i)return n;if(r)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);var n=t.getAttribute(e+"-selector");if(n){var i=this.findBySelector(n)[0];if(i)return i}return t},getSelector:function(t,e){var n;if(t===this.el)return"string"==typeof e&&(n="> "+e),n;if(t){var i=Ri(t).index()+1;n=t.tagName+":nth-child("+i+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},getLinkEnd:function(t){for(var e,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];var r=this.model,o=r.id,a=this.findAttribute("port",t),s=t.getAttribute("joint-selector"),l={id:o};return null!=s&&(l.magnet=s),null!=a?(l.port=a,r.hasPort(a)||s||(l.selector=this.getSelector(t))):null==s&&this.el!==t&&(l.selector=this.getSelector(t)),(e=this).customizeLinkEnd.apply(e,[l,t].concat(n))},customizeLinkEnd:function(t,e,n,i,r,o){var a=this.paper,s=a.options.connectionStrategy;if("function"==typeof s){var l=s.call(a,t,this,e,new Qn(n,i),r,o,a);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e,n=this.el,i=t.port,r=t.magnet,o=this.model;return e=null!=i&&o.isElement()&&o.hasPort(i)?this.findPortNode(i,r)||n:(r||(r=t.selector),r||null==i||(r='[port="'+i+'"]'),this.findBySelector(r,n,this.selectors)[0]),this.findProxyNode(e,"magnet")},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){kr(e)||(t instanceof SVGElement?Ri(t).attr(e):i(t).attr(e))},processNodeAttributes:function(t,e){var n,i,r,o,a,s,l,u,c,h=[];for(n in e)e.hasOwnProperty(n)&&(i=e[n],!(r=this.getAttributeDefinition(n))||Dr(r.qualify)&&!r.qualify.call(this,i,t,e)?(s||(s={}),s[$i(n)]=i):($r(r.set)&&(s||(s={}),s[r.set]=i),null!==i&&h.push(n,r)));for(o=0,a=h.length;o<a;o+=2)n=h[o],r=h[o+1],i=e[n],Dr(r.set)&&(l||(l={}),l[n]=i),Dr(r.position)&&(u||(u={}),u[n]=i),Dr(r.offset)&&(c||(c={}),c[n]=i);return{raw:e,normal:s,set:l,position:u,offset:c}},updateRelativeAttributes:function(t,e,n,i){var r,o;i||(i={});var a=e.raw||{},s=e.normal||{},l=e.set,u=e.position,c=e.offset;for(r in l){o=l[r];var h=this.getAttributeDefinition(r).set.call(this,o,n.clone(),t,a);Kr(h)?yr(s,h):void 0!==h&&(s[r]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,s);else{var f,g,d,p=s.transform,m=Ri.transformStringToMatrix(p),v=Qn(m.e,m.f);if(p&&(s=Yr(s,"transform"),m.e=m.f=0),u||c){var I=this.getNodeScale(t,i.scalableNode);f=I.sx,g=I.sy}var A=!1;for(r in u)o=u[r],(d=this.getAttributeDefinition(r).position.call(this,o,n.clone(),t,a))&&(v.offset(Qn(d).scale(f,g)),A||(A=!0));this.setNodeAttributes(t,s);var y=!1;if(c){var C=this.getNodeBoundingRect(t);if(0<C.width&&0<C.height){var b=Ri.transformRect(C,m).scale(1/f,1/g);for(r in c)o=c[r],(d=this.getAttributeDefinition(r).offset.call(this,o,b,t,a))&&(v.offset(Qn(d).scale(f,g)),y||(y=!0))}}(void 0!==p||A||y)&&(v.round(1),m.e=v.x,m.f=v.y,t.setAttribute("transform",Ri.matrixToTransformString(m)))}},getNodeScale:function(t,e){var n,i;if(e&&e.contains(t)){var r=e.scale();n=1/r.sx,i=1/r.sy}else i=n=1;return{sx:n,sy:i}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=Ri.ensureId(t),i=e[n];return i||(i=e[n]={}),i},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=Ri(t).getBBox()),new di(e.boundingRect)},getNodeMatrix:function(t){var e=this.nodeCache(t);if(void 0===e.magnetMatrix){var n=this.rotatableNode||this.el;e.magnetMatrix=Ri(t).getTransformToElement(n)}return Ri.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=Ri(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,i){var r,o,a,s,l={},u=[];for(var c in t)if(t.hasOwnProperty(c)&&(a=t[c],jr(a))){var h=n[c]=this.findBySelector(c,e,i);for(r=0,o=h.length;r<o;r++){var f=h[r];s=Ri.ensureId(f);var g=i&&i[c]===f,d=l[s];if(d){d.array||(u.push(s),d.array=!0,d.attributes=[d.attributes],d.selectedLength=[d.selectedLength]);var p=d.attributes,m=d.selectedLength;if(g)p.unshift(a),m.unshift(-1);else{var v=xr(m,o);p.splice(v,0,a),m.splice(v,0,o)}}else l[s]={attributes:a,selectedLength:g?-1:o,node:f,array:!1}}}for(r=0,o=u.length;r<o;r++)(a=l[s=u[r]]).attributes=Jr.apply(void 0,[{}].concat(a.attributes.reverse()));return l},getEventTarget:function(t,e){void 0===e&&(e={});var n=t.target,i=t.type,r=t.clientX;void 0===r&&(r=0);var o=t.clientY;return void 0===o&&(o=0),e.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(r,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=di()),n.selectors||(n.selectors=this.selectors);var i,r,o,a,s,l,u={},c={},h=[],f=[],g=n.roAttributes,d=this.findNodesAttributes(g||e,t,u,n.selectors),p=g?this.findNodesAttributes(e,t,u,n.selectors):d;for(var m in d)if(o=(a=d[m]).attributes,r=a.node,(s=this.processNodeAttributes(r,o)).set||s.position||s.offset){var v,I=p[m]&&p[m].attributes,A=I&&void 0===o.ref?I.ref:o.ref;if(A){if(!(v=(u[A]||this.findBySelector(A,t,n.selectors))[0]))throw new Error('dia.CellView: "'+A+'" reference does not exist.')}else v=null;if(i={node:r,refNode:v,processedAttributes:s,allAttributes:I},v){var y=f.findIndex(function(t){return t.refNode===r});-1<y?f.splice(y,0,i):f.push(i)}else h.push(i)}else this.setNodeAttributes(r,s.normal);h.push.apply(h,f);for(var C=0,b=h.length;C<b;C++){i=h[C],r=i.node,v=i.refNode;var w=Ri(n.rotatableNode),x=v?Ri.ensureId(v):"",N=!!w&&!!v&&w.contains(v),M=c[x];if(!M){var S=N?w:t;M=c[x]=v?Ri(v).getBBox({target:S}):n.rootBBox}g?(s=this.processNodeAttributes(r,i.allAttributes),this.mergeProcessedAttributes(s,i.processedAttributes)):s=i.processedAttributes;var k=M;N&&!w.contains(r)&&(l||(l=Ri.transformStringToMatrix(w.attr("transform"))),k=Ri.transformRect(M,l)),this.updateRelativeAttributes(r,s,k,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),yr(t.set,e.set),yr(t.position,e.position),yr(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!(!e||t&&e.getName()!==t)},addTools:function(t){return this.removeTools(),t&&((this._toolsView=t).configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){Ko.remove(this)},updateHighlighters:function(t){void 0===t&&(t=!1),Ko.update(this,null,t)},transformHighlighters:function(){Ko.transform(this)},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){var i=this.model,r=i.graph;r&&(i.startBatch("pointer"),this.eventData(t,{graph:r})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){var i=this.eventData(t).graph;this.notify("cell:pointerup",t,e,n),i&&i.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,i){this.notify("cell:mousewheel",t,e,n,i)},onevent:function(t,e,n,i){this.notify(e,t,n,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave:function(t){var e=this.paper;e.isAsync()&&e.dumpView(this);var n=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(n);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Highlighting:qo,addPresentationAttributes:function(t){return Jr({},this.prototype.presentationAttributes,t,function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?Nr(t.concat(e)):void 0})}}),ta={UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",TOOLS:"TOOLS",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},ea=$o.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=$o.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){$o.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[ta.UPDATE],position:[ta.TRANSLATE,ta.TOOLS],size:[ta.RESIZE,ta.PORTS,ta.TOOLS],angle:[ta.ROTATE,ta.TOOLS],markup:[ta.RENDER],ports:[ta.PORTS]},initFlag:[ta.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){var n=_i.useCSSSelectors;this.hasFlag(t,ta.PORTS)&&(this._removePorts(),this._cleanPortsCache());var i=!1;if(this.hasFlag(t,ta.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),i=!0,t=this.removeFlag(t,[ta.RENDER,ta.UPDATE,ta.RESIZE,ta.TRANSLATE,ta.ROTATE,ta.PORTS,ta.TOOLS]);else{var r=!1;this.hasFlag(t,ta.RESIZE)&&(this.resize(e),r=!0,t=this.removeFlag(t,[ta.RESIZE,ta.UPDATE])),this.hasFlag(t,ta.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,ta.UPDATE),r=!0,n&&(t=this.removeFlag(t,ta.PORTS))),this.hasFlag(t,ta.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,ta.TRANSLATE),i=!0),this.hasFlag(t,ta.ROTATE)&&(this.rotate(),t=this.removeFlag(t,ta.ROTATE),i=!0),this.hasFlag(t,ta.PORTS)&&(this._renderPorts(),r=!0,t=this.removeFlag(t,ta.PORTS)),r&&this.updateHighlighters(!1)}return i&&this.transformHighlighters(),this.hasFlag(t,ta.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,ta.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();var n=_i.useCSSSelectors;n&&this._removePorts();var i=this.model,r=i.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:new di(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===r?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=Ri(n[this.rotatableSelector])||null,this.scalableNode=Ri(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(Ri(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),_i.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),i=e.size(),r=this.scalableNode,o=!1;0<r.node.getElementsByTagName("path").length&&(o=!0);var a=r.getBBox({recursive:o}),s=i.width/(a.width||1),l=i.height/(a.height||1);r.attr("transform","scale("+s+","+l+")");var u=this.rotatableNode,c=u&&u.attr("transform");if(c){u.attr("transform",c+" rotate("+-n+","+i.width/2+","+i.height/2+")");var h=r.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},yr({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t){t||(t={});var e=t.model||this.model,n=(t.paper||this.paper).model;e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});var i=n.getElements().reduce(function(t,e){return Math.max(t,e.attributes.z||0)},0);n.getConnectedLinks(e,{deep:!0,includeEnclosed:!0}).forEach(function(t){t.attributes.z<=i&&t.set("z",i+1,{ui:!0})}),e.stopBatch("to-front");var r=e.parent();r?(n.getCell(r).unembed(e,{ui:!0}),t.initialParentId=r):t.initialParentId=null},processEmbedding:function(t){t||(t={});var e=t.model||this.model,n=t.paper||this.paper,i=n.options,r=[];r=Dr(i.findParentBy)?zr(i.findParentBy.call(n.model,this)).filter(function(t){return t instanceof No&&this.model.id!==t.id&&!t.isEmbeddedIn(this.model)}.bind(this)):n.model.findModelsUnderElement(e,{searchBy:i.findParentBy}),i.frontParentOnly&&(r=r.slice(-1));for(var o=null,a=t.candidateEmbedView,s=r.length-1;0<=s;s--){var l=r[s];if(a&&a.model.id==l.id){o=a;break}var u=l.findView(n);if(i.validateEmbedding.call(n,this,u)){o=u;break}}o&&o!=a&&(this.clearEmbedding(t),t.candidateEmbedView=o.highlight(o.findProxyNode(null,"container"),{embedding:!0})),!o&&a&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t){void 0===t&&(t={});var e=t.candidateEmbedView,n=t.model||this.model,i=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{var r=i.options.validateUnembedding;t.initialParentId&&"function"==typeof r&&!r.call(i,this)&&this._disallowUnembed(t)}i.model.getConnectedLinks(n,{deep:!0}).forEach(function(t){t.reparent({ui:!0})})},_disallowUnembed:function(t){var e=t.model,n=t.whenNotAllowed;void 0===n&&(n="revert");var i=e||this.model,r=t.paper||this.paper;switch(n){case"remove":i.remove({ui:!0});break;case"revert":var o=t.initialParentId,a=t.initialPosition;if(a){var s=a.x,l=a.y;i.position(s,l,{ui:!0})}var u=r.model.getCell(o);u&&u.embed(i,{ui:!0})}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);var n=t.getAttribute(e+"-selector");if(n){var i=this.findAttribute("port",t);if(i){var r=this.findPortNode(i,n);if(r)return r}else{var o=this.findBySelector(n)[0];if(o)return o}}return t},notifyPointerdown:function(t,e,n){$o.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove:function(t,e,n){$o.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup:function(t,e,n){this.notify("element:pointerup",t,e,n),$o.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){$o.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){$o.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){$o.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.isPropagationStopped(t)||(this.notifyPointerdown(t,e,n),this.dragStart(t,e,n))},pointermove:function(t,e,n){var i=this.eventData(t);switch(i.action){case"magnet":this.dragMagnet(t,e,n);break;case"move":(i.delegatedView||this).drag(t,e,n);default:this.notifyPointermove(t,e,n)}this.eventData(t,i)},pointerup:function(t,e,n){var i=this.eventData(t);switch(i.action){case"magnet":this.dragMagnetEnd(t,e,n);break;case"move":(i.delegatedView||this).dragEnd(t,e,n);default:this.notifyPointerup(t,e,n)}var r=i.targetMagnet;r&&this.magnetpointerclick(t,r,e,n),this.checkMouseleave(t)},mouseover:function(t){$o.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){$o.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){$o.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){$o.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,i){$o.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,i)},onmagnet:function(t,e,n){this.dragMagnetStart(t,e,n)},magnetpointerdblclick:function(t,e,n,i){this.notify("element:magnet:pointerdblclick",t,e,n,i)},magnetcontextmenu:function(t,e,n,i){this.notify("element:magnet:contextmenu",t,e,n,i)},dragStart:function(t,e,n){var i=this.getDelegatedView();if(i&&i.can("elementMove")){this.eventData(t,{action:"move",delegatedView:i});var r=i.model.position();i.eventData(t,{initialPosition:r,pointerOffset:r.difference(e,n),restrictedArea:this.paper.getRestrictedArea(i,e,n)})}},dragMagnetStart:function(t,e,n){if(this.can("addLinkFromMagnet")){var i=t.currentTarget,r=this.paper;this.eventData(t,{targetMagnet:i}),t.stopPropagation(),r.options.validateMagnet(this,i,t)?(r.options.magnetThreshold<=0&&this.dragLinkStart(t,i,e,n),this.eventData(t,{action:"magnet"}),this.stopPropagation(t)):this.pointerdown(t,e,n),r.delegateDragEvents(this,t.data)}},dragLinkStart:function(t,e,n,i){this.model.startBatch("add-link");var r=this.addLinkFromMagnet(e,n,i);r.notifyPointerdown(t,n,i),r.eventData(t,r.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:r})},addLinkFromMagnet:function(t,e,n){var i=this.paper,r=i.model,o=i.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(r,{async:!1,ui:!0}),o.findView(i)},drag:function(t,e,n){var i=this.paper,r=i.options.gridSize,o=this.model,a=this.eventData(t),s=a.pointerOffset,l=a.restrictedArea,u=a.embedding,c=Dn(e+s.x,r),h=Dn(n+s.y,r);o.position(c,h,{restrictedArea:l,deep:!0,ui:!0}),i.options.embeddingMode&&(u||(this.prepareEmbedding(a),u=!0),this.processEmbedding(a)),this.eventData(t,{embedding:u})},dragMagnet:function(t,e,n){var i=this.eventData(t),r=i.linkView;if(r)r.pointermove(t,e,n);else{var o=this.paper,a=o.options.magnetThreshold,s=this.getEventTarget(t),l=i.targetMagnet;if("onleave"===a){if(l===s||Ri(l).contains(s))return}else if(o.eventData(t).mousemoved<=a)return;this.dragLinkStart(t,l,e,n)}},dragEnd:function(t,e,n){var i=this.eventData(t);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(t,e,n){var i=this.eventData(t).linkView;i&&(i.pointerup(t,e,n),this.model.stopBatch("add-link"))},magnetpointerclick:function(t,e,n,i){var r=this.paper;r.eventData(t).mousemoved>r.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,i)}},{Flags:ta});yr(ea.prototype,Yo);var na={N:"S",S:"N",E:"W",W:"E"},ia={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function ra(t,e,n){var i=new Qn(t.x,e.y);return n.containsPoint(i)&&(i=new Qn(e.x,t.y)),i}function oa(t,e){return t["W"===e||"E"===e?"width":"height"]}function aa(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function sa(t){return new di(t.x,t.y,0,0)}function la(t){var e=cr(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function ua(t,e){return t.sourceBBox.clone().moveAndExpand(la(e))}function ca(t,e){return t.targetBBox.clone().moveAndExpand(la(e))}function ha(t,e,n){var i=new Qn(t.x,e.y),r=new Qn(e.x,t.y),o=aa(t,i),a=aa(t,r),s=na[n],l=o===n||o!==s&&(a===s||a!==n)?i:r;return{points:[l],direction:aa(l,e)}}function fa(t,e,n){var i=ra(t,e,n);return{points:[i],direction:aa(i,e)}}function ga(t,e,n,i){var r,o={},a=[new Qn(t.x,e.y),new Qn(e.x,t.y)],s=a.filter(function(t){return!n.containsPoint(t)}),l=s.filter(function(e){return aa(e,t)!==i});if(0<l.length)r=(r=l.filter(function(e){return aa(t,e)===i}).pop())||l[0],o.points=[r],o.direction=aa(r,e);else{r=Br(a,s)[0];var u=new Qn(e).move(r,-oa(n,i)/2),c=ra(u,t,n);o.points=[c,u],o.direction=aa(u,e)}return o}function da(t,e,n,i){var r=fa(e,t,i),o=r.points[0];if(n.containsPoint(o)){var a=(r=fa(t,e,n)).points[0];if(i.containsPoint(a)){var s=new Qn(t).move(a,-oa(n,aa(t,a))/2),l=new Qn(e).move(o,-oa(i,aa(e,o))/2),u=new ti(s,l).midpoint(),c=fa(t,u,n),h=ha(u,e,c.direction);r.points=[c.points[0],h.points[0]],r.direction=h.direction}}return r}function pa(t,e,n,i,r){var o,a,s,l={},u=n.union(i).inflate(1),c=u.center().distance(e)>u.center().distance(t),h=c?e:t,f=c?t:e;return a=ra(o=r?(o=Qn.fromPolar(u.width+u.height,ia[r],h),u.pointNearestToPoint(o).move(o,-1)):u.pointNearestToPoint(h).move(h,1),f,u),o.round().equals(a.round())?(a=Qn.fromPolar(u.width+u.height,zn(o.theta(h))+Math.PI/2,f),s=ra(o,a=u.pointNearestToPoint(a).move(f,1).round(),u),l.points=c?[a,s,o]:[o,s,a]):l.points=c?[a,o]:[o,a],l.direction=aa(c?o:a,e),l}function ma(t,e,n){var i,r,o,a,s,l=ua(n,e),u=ca(n,e),c=(r=e,(i=n).sourceAnchor?i.sourceAnchor:ua(i,r).center()),h=(a=e,(o=n).targetAnchor?o.targetAnchor:ca(o,a).center());l=l.union(sa(c)),u=u.union(sa(h)),(t=zr(t).map(Qn)).unshift(c),t.push(h);for(var f=[],g=0,d=t.length-1;g<d;g++){var p=null,m=t[g],v=t[g+1],I=!!aa(m,v);if(0===g)g+1===d?l.intersect(u.clone().inflate(1))?p=pa(m,v,l,u):I||(p=da(m,v,l,u)):l.containsPoint(v)?p=pa(m,v,l,sa(v).moveAndExpand(la(e))):I||(p=fa(m,v,l));else if(g+1===d){var A=I&&aa(v,m)===s;u.containsPoint(m)||A?p=pa(m,v,sa(m).moveAndExpand(la(e)),u,s):I||(p=ga(m,v,u,s))}else I||(p=ha(m,v,s));s=p?(Array.prototype.push.apply(f,p.points),p.direction):aa(m,v),g+1<d&&f.push(v)}return f}var va={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},fallbackRouter:function(t,e,n){if(!Dr(ma))throw new Error("Manhattan requires the orthogonal router as default fallback.");return ma(t,yr({},va,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function Ia(t){this.map={},this.options=t,this.mapGridSize=100}function Aa(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function ya(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function Ca(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function ba(t,e){return t.sourceAnchor?t.sourceAnchor:ya(t,e).center()}function wa(t,e,n,i,r){var o,a,s,l,u,c,h,f,g=360/n,d=t.theta((o=t,a=e,s=i,l=r.step,u=a.x-o.x,c=a.y-o.y,h=u/s.x*l,f=c/s.y*l,new Qn(o.x+h,o.y+f))),p=Tn(d+g/2);return g*Math.floor(p/g)}function xa(t,e){var n=Math.abs(t-e);return 180<n?360-n:n}function Na(t,e){if(!t)return e;var n=Math.abs(t),i=Math.round(n/e);return i?e+(n-i*e)/i:n}function Ma(t,e){return t.round(e)}function Sa(t,e,n){return Ma((i=t.clone(),o=(r=e).source,a=Dn(i.x-o.x,r.x)+o.x,s=Dn(i.y-o.y,r.y)+o.y,new Qn(a,s)),n);var i,r,o,a,s}function ka(t){return t.clone().toString()}function Ta(t){return new Qn(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Da(t,e,n,i,r,o,a){for(var s,l=[],u=Ta(r.difference(n)),c=ka(n),h=t[c];h;){var f=Ta((s=e[c]).difference(h));f.equals(u)||(l.unshift(s),u=f),h=t[c=ka(h)]}var g=e[c];return Ta(g.difference(i)).equals(u)||l.unshift(g),l}function ja(t,e){for(var n=1/0,i=0,r=e.length;i<r;i++){var o=t.manhattanDistance(e[i]);o<n&&(n=o)}return n}function za(t,e,n,i,r){var o=r.precision,a=r.directionMap,s=t.difference(e.center()),l=Kr(a)?Object.keys(a):[],u=zr(n),c=l.reduce(function(n,r){if(u.includes(r)){for(var l,c=a[r],h=new Qn(t.x+c.x*(Math.abs(s.x)+e.width),t.y+c.y*(Math.abs(s.y)+e.height)),f=new ti(t,h).intersect(e)||[],g=f.length,d=null,p=0;p<g;p++){var m=f[p],v=t.squaredDistance(m);(void 0===l||l<v)&&(l=v,d=m)}if(d){var I=Sa(d,i,o);e.containsPoint(I)&&(I=Sa(I.offset(c.x*i.x,c.y*i.y),i,o)),n.push(I)}}return n},[]);return e.containsPoint(t)||c.push(Sa(t,i,o)),c}function La(t,e,n,i){var r,o,a,s,l=i.precision;r=Ma(t instanceof di?ba(this,i).clone():t.clone(),l),o=Ma(e instanceof di?(a=this,s=i,a.targetAnchor?a.targetAnchor:Ca(a,s).center()).clone():e.clone(),l);var u,c,h,f,g,d,p,m,v,I,A=(u=i.step,h=o,{source:(c=r).clone(),x:Na(h.x-c.x,u),y:Na(h.y-c.y,u)});if(d=t instanceof di?za(f=r,t,i.startDirections,A,i):[f=r],p=e instanceof di?za(g=o,e,i.endDirections,A,i):[g=o],d=d.filter(n.isPointAccessible,n),p=p.filter(n.isPointAccessible,n),0<d.length&&0<p.length){for(var y=new Aa,C={},b={},w={},x=0,N=d.length;x<N;x++){var M=d[x],S=ka(M);y.add(S,ja(M,p)),C[S]=M,w[S]=0}var k,T,D=i.previousDirectionAngle,j=void 0===D,z=i.directions;m=A,I=(v=i).step,zr(v.directions).forEach(function(t){t.gridOffsetX=t.offsetX/I*m.x,t.gridOffsetY=t.offsetY/I*m.y});for(var L=z.length,P=zr(p).reduce(function(t,e){var n=ka(e);return t.push(n),t},[]),E=i.maximumLoops;!y.isEmpty()&&0<E;){var O,Z=y.pop(),B=C[Z],G=b[Z],R=w[Z],_=void 0===G,W=B.equals(f);O=_?j?W?null:wa(f,B,L,A,i):D:wa(G,B,L,A,i);var Y=d.length===p.length;if(Y)for(x=0;x<d.length;x++)if(!d[x].equals(p[x])){Y=!1;break}if((!_||!Y)&&0<=P.indexOf(Z))return i.previousDirectionAngle=O,Da(b,C,B,f,g);for(x=0;x<L;x++){var U=(k=z[x]).angle;if(T=xa(O,U),j&&W||!(T>i.maxAllowedDirectionChange)){var F=Sa(B.clone().offset(k.gridOffsetX,k.gridOffsetY),A,l),X=ka(F);if(!y.isClose(X)&&n.isPointAccessible(F)){if(0<=P.indexOf(X)&&!F.equals(g)&&xa(U,wa(F,g,L,A,i))>i.maxAllowedDirectionChange)continue;var V=R+k.cost+(W?0:i.penalties[T]);(!y.isOpen(X)||V<w[X])&&(C[X]=F,b[X]=B,w[X]=V,y.add(X,V+ja(F,p)))}}}E--}}return i.fallbackRoute.call(this,f,g,i)}Ia.prototype.build=function(t,e){var n=this.options,i=zr(n.excludeEnds).reduce(function(n,i){var r=e.get(i);if(r){var o=t.getCell(r.id);o&&n.push(o)}return n},[]),r=[],o=t.getCell(e.get("source").id);o&&(r=Rr(r,o.getAncestors().map(function(t){return t.id})));var a=t.getCell(e.get("target").id);a&&(r=Rr(r,a.getAncestors().map(function(t){return t.id})));var s=this.mapGridSize;return t.getElements().reduce(function(t,e){var o=zr(n.excludeTypes).includes(e.get("type")),a=i.find(function(t){return t.id===e.id}),l=r.includes(e.id);if(!(o||a||l))for(var u=e.getBBox().moveAndExpand(n.paddingBox),c=u.origin().snapToGrid(s),h=u.corner().snapToGrid(s),f=c.x;f<=h.x;f+=s)for(var g=c.y;g<=h.y;g+=s){var d=f+"@"+g;t[d]=t[d]||[],t[d].push(u)}return t},this.map),this},Ia.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return zr(this.map[e]).every(function(e){return!e.containsPoint(t)})},Aa.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=xr(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(n,0,t)},Aa.prototype.remove=function(t){this.hash[t]=this.CLOSE},Aa.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},Aa.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},Aa.prototype.isEmpty=function(){return 0===this.items.length},Aa.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};var Pa=function(t,e,n){return function(t,e,n){!function(t){if(t.directions=Wr(t,"directions"),t.penalties=Wr(t,"penalties"),t.paddingBox=Wr(t,"paddingBox"),t.padding=Wr(t,"padding"),t.padding){var e=cr(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}zr(t.directions).forEach(function(t){var e=new Qn(0,0),n=new Qn(t.offsetX,t.offsetY);t.angle=Tn(e.theta(n))})}(e),n.options.perpendicular=!!e.perpendicular;for(var i,r,o=ya(n,e),a=Ca(n,e),s=ba(n,e),l=new Ia(e).build(n.paper.model,n.model),u=zr(t).map(Qn),c=[],h=s,f=0,g=u.length;f<=g;f++){var d=null;if(r=i||o,!(i=u[f])&&(i=a,(!n.model.get("source").id||!n.model.get("target").id)&&Dr(e.draggingRoute))){var p=r===o?s:r,m=i.origin();d=e.draggingRoute.call(n,p,m,e)}if(null===(d=d||La.call(n,r,i,l,e)))return e.fallbackRouter(t,e,n);var v=d[0];v&&v.equals(h)&&d.shift(),h=d[d.length-1]||h,Array.prototype.push.apply(c,d)}return c}(t,yr({},va,e),n)},Ea={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var i=t.theta(e),r=[],o={x:e.x,y:t.y},a={x:t.x,y:e.y};if(90<i%180){var s=o;o=a,a=s}var l=i%90<45?o:a,u=new ti(t,l),c=90*Math.ceil(i/90),h=Qn.fromPolar(u.squaredLength(),zn(c+135),l),f=new ti(e,h),g=u.intersection(f),d=g||e,p=g?d:t,m=360/n.directions.length,v=p.theta(e),I=Tn(v+m/2),A=m*Math.floor(I/m);return n.previousDirectionAngle=A,d&&r.push(d.round()),r.push(e),r}},Oa={normal:function(t,e,n){return t},oneSide:function(t,e,n){var i,r,o,a=e.side||"bottom",s=cr(e.padding||40),l=n.sourceBBox,u=n.targetBBox,c=l.center(),h=u.center();switch(a){case"bottom":o=1,i="y",r="height";break;case"top":o=-1,i="y",r="height";break;case"left":o=-1,i="x",r="width";break;case"right":o=1,i="x",r="width";break;default:throw new Error("Router: invalid side")}return c[i]+=o*(l[r]/2+s[a]),h[i]+=o*(u[r]/2+s[a]),0<o*(c[i]-h[i])?h[i]=c[i]:c[i]=h[i],[c].concat(t,h)},orthogonal:ma,manhattan:Pa,metro:function(t,e,n){if(!Dr(Pa))throw new Error("Metro requires the manhattan router.");return Pa(t,yr({},Ea,e),n)}},Za=["arc","gap","cubic"],Ba=["smooth"],Ga=1/3,Ra=2/3;function _a(t,e,n){var i=[].concat(t,n,e);return i.reduce(function(t,e,n){var r=i[n+1];return null!=r&&(t[n]=ei(e,r)),t},[])}function Wa(t,e){return ei(t,e).squaredLength()}function Ya(t,e,n,i){var r,o=new xi;return r=xi.createSegment("M",t[0].start),o.appendSegment(r),zr(t).forEach(function(a,s){if(a.isJump){var l,u,c,h;if("arc"===n){l=-90,u=a.start.difference(a.end);var f=Number(u.x<0||0===u.x&&u.y<0);f&&(l+=180);var g,d=a.midpoint(),p=new ti(d,a.end).rotate(d,l);c=(g=new ti(a.start,d)).pointAt(2/3).rotate(a.start,l),h=p.pointAt(1/3).rotate(p.end,-l),r=xi.createSegment("C",c,h,p.end),o.appendSegment(r),g=new ti(d,a.end),c=p.pointAt(1/3).rotate(p.end,l),h=g.pointAt(1/3).rotate(a.end,-l),r=xi.createSegment("C",c,h,a.end),o.appendSegment(r)}else if("gap"===n)r=xi.createSegment("M",a.end),o.appendSegment(r);else if("cubic"===n){l=a.start.theta(a.end);var m=.6*e,v=1.35*e;u=a.start.difference(a.end),(f=Number(u.x<0||0===u.x&&u.y<0))&&(v*=-1),c=Qn(a.start.x+m,a.start.y+v).rotate(a.start,l),h=Qn(a.end.x-m,a.end.y+v).rotate(a.end,l),r=xi.createSegment("C",c,h,a.end),o.appendSegment(r)}}else{var I=t[s+1];0==i||!I||I.isJump?(r=xi.createSegment("L",a.end),o.appendSegment(r)):(A=i,y=o,C=a.end,b=a.start,w=I.end,N=C.distance(b)/2,M=C.distance(w)/2,S=-Math.min(A,N),k=-Math.min(A,M),T=C.clone().move(b,S).round(),D=C.clone().move(w,k).round(),j=new Qn(Ga*T.x+Ra*C.x,Ra*C.y+Ga*T.y),z=new Qn(Ga*D.x+Ra*C.x,Ra*C.y+Ga*D.y),x=xi.createSegment("L",T),y.appendSegment(x),x=xi.createSegment("C",j,z,D),y.appendSegment(x))}var A,y,C,b,w,x,N,M,S,k,T,D,j,z}),o}var Ua={jumpover:function(t,e,n,i){!function(t){var e=t.paper,n=e._jumpOverUpdateList;if(null==n){n=e._jumpOverUpdateList=[];var i=e.model;i.on("batch:stop",function(){this.hasActiveBatch()||function(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++)e[n].requestConnectionUpdate()}(e)}),i.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}(this);var r=i.raw,o=i.size||5,a=i.jump&&(""+i.jump).toLowerCase(),s=i.radius||0,l=i.ignoreConnectors||Ba;-1===Za.indexOf(a)&&(a=Za[0]);var u=this.paper,c=u.model.getLinks();if(1===c.length)return Ya(_a(t,e,n),o,a,s);var h=this.model,f=c.indexOf(h),g=u.options.defaultConnector||{},d=c.filter(function(t,e){var n=t.get("connector")||g;return!(zr(l).includes(n.name)||f<e&&"jumpover"===n.name)}),p=d.map(function(t){return u.findViewByModel(t)}),m=_a(t,e,n),v=p.map(function(t){return null==t?[]:t===this?m:_a(t.sourcePoint,t.targetPoint,t.route)},this),I=Ya(m.reduce(function(t,e){var n,i,r,a=d.reduce(function(t,n,i){if(n!==h){var r=(o=e,a=v[i],zr(a).reduce(function(t,e){var n=o.intersection(e);return n&&t.push(n),t},[]));t.push.apply(t,r)}var o,a;return t},[]).sort(function(t,n){return Wa(e.start,t)-Wa(e.start,n)});return 0<a.length?t.push.apply(t,(n=e,r=o,(i=a).reduce(function(t,e,o){if(!0===e.skip)return t;var a=t.pop()||n,s=Kn(e).move(a.start,-r),l=Kn(e).move(a.start,+r),u=i[o+1];if(null!=u){var c=l.distance(u);c<=r&&(l=u.move(a.start,c),u.skip=!0)}else if(s.distance(a.end)<2*r+1)return t.push(a),t;if(l.distance(a.start)<2*r+1)return t.push(a),t;var h=ei(s,l);return h.isJump=!0,t.push(ei(a.start,s),h,ei(l,a.end)),t},[]))):t.push(e),t},[]),o,a,s);return r?I:I.serialize()},normal:function(t,e,n,i){var r=i&&i.raw,o=[t].concat(n).concat([e]),a=new vi(o),s=new xi(a);return r?s:s.serialize()},rounded:function(t,e,n,i){i||(i={});var r,o=i.radius||10,a=i.raw,s=new xi;r=xi.createSegment("M",t),s.appendSegment(r);for(var l,u,c,h,f,g,d,p,m,v,I,A=0,y=n.length;A<y;A++)l=new Qn(n[A]),u=n[A-1]||t,c=n[A+1]||e,h=f||l.distance(u)/2,f=l.distance(c)/2,g=-Math.min(o,h),d=-Math.min(o,f),p=l.clone().move(u,g).round(),m=l.clone().move(c,d).round(),v=new Qn(1/3*p.x+2/3*l.x,2/3*l.y+1/3*p.y),I=new Qn(1/3*m.x+2/3*l.x,2/3*l.y+1/3*m.y),r=xi.createSegment("L",p),s.appendSegment(r),r=xi.createSegment("C",v,I,m),s.appendSegment(r);return r=xi.createSegment("L",e),s.appendSegment(r),a?s:s.serialize()},smooth:function(t,e,n,i){var r,o=i&&i.raw;if(n&&0!==n.length){var a=[t].concat(n).concat([e]),s=wi.throughPoints(a);r=new xi(s)}else{var l;if(r=new xi,l=xi.createSegment("M",t),r.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var u=(t.x+e.x)/2;l=xi.createSegment("C",u,t.y,u,e.y,e.x,e.y),r.appendSegment(l)}else{var c=(t.y+e.y)/2;l=xi.createSegment("C",t.x,c,e.x,c,e.x,e.y),r.appendSegment(l)}}return o?r:r.serialize()}},Fa={RENDER:"RENDER",UPDATE:"UPDATE",TOOLS:"TOOLS",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET"},Xa=$o.extend({className:function(){var t=$o.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){$o.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.metrics={}},presentationAttributes:{markup:[Fa.RENDER],attrs:[Fa.UPDATE],router:[Fa.UPDATE],connector:[Fa.UPDATE],smooth:[Fa.UPDATE],manhattan:[Fa.UPDATE],toolMarkup:[Fa.LEGACY_TOOLS],labels:[Fa.LABELS],labelMarkup:[Fa.LABELS],vertices:[Fa.VERTICES,Fa.UPDATE],vertexMarkup:[Fa.VERTICES],source:[Fa.SOURCE,Fa.UPDATE],target:[Fa.TARGET,Fa.UPDATE]},initFlag:[Fa.RENDER,Fa.SOURCE,Fa.TARGET,Fa.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,Fa.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Fa.SOURCE)}if(this.hasFlag(t,Fa.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Fa.TARGET)}var n=this.paper,i=this.sourceView,r=this.targetView;if(n&&(i&&!n.isViewMounted(i)||r&&!n.isViewMounted(r)))return t;if(this.hasFlag(t,Fa.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),this.removeFlag(t,[Fa.RENDER,Fa.UPDATE,Fa.VERTICES,Fa.LABELS,Fa.TOOLS,Fa.LEGACY_TOOLS]);var o=!1;this.hasFlag(t,Fa.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,Fa.VERTICES));var a=this.model,s=a.attributes,l=this.hasFlag(t,Fa.LABELS),u=this.hasFlag(t,Fa.LEGACY_TOOLS);return l&&(this.onLabelsChange(a,s.labels,e),t=this.removeFlag(t,Fa.LABELS),o=!0),u&&(this.renderTools(),t=this.removeFlag(t,Fa.LEGACY_TOOLS)),this.hasFlag(t,Fa.UPDATE)&&(this.update(a,null,e),this.updateTools(e),t=this.removeFlag(t,[Fa.UPDATE,Fa.TOOLS]),o=!(u=l=!1)),l&&this.updateLabelPositions(),u&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,Fa.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Fa.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Fa.UPDATE,t))},isLabelsRenderRequired:function(t){void 0===t&&(t={});var e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],i=n.length;if(1<i&&e[n[1]]){if(2===i)return"markup"in Object(t.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=Ri(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,o=e.length;r<o;r++){var a=e[r],s=a.attr("class");s&&(s=Yi(s),n[i.camelCase(s)]=a)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=Ri(t),n=document.createDocumentFragment();if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var o=e[i].node;n.appendChild(o)}else n.appendChild(e.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,n=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var i=n.childNodes;return(e=1<i.length||"G"!==i[0].nodeName.toUpperCase()?Ri("g").append(n):Ri(i[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},i=this._labelSelectors={},r=this.model,o=r.attributes.labels||[],a=o.length;if(0===a)return e&&e.remove(),this;e?e.empty():e=t.labels=Ri("g").addClass("labels");for(var s=e.node,l=0;l<a;l++){var u,c,h=o[l],f=this._normalizeLabelMarkup(this._getLabelMarkup(h.markup));if(f)u=f.node,c=f.selectors;else{var g=r._builtins.defaultLabel,d=this._normalizeLabelMarkup(this._getLabelMarkup(g.markup)),p=r._getDefaultLabel(),m=this._normalizeLabelMarkup(this._getLabelMarkup(p.markup))||d;u=m.node,c=m.selectors}u.setAttribute("label-idx",l),s.appendChild(u),n[l]=u;var v=this.selector;if(c[v])throw new Error("dia.LinkView: ambiguous label root selector.");c[v]=u,i[l]=c}return s.parentNode||this.el.appendChild(s),this.updateLabels(),this},findLabelNode:function(t,e){var n=this._labelCache[t];if(!n)return null;var i=this._labelSelectors[t],r=this.findBySelector(e,n,i)[0];return void 0===r&&(r=null),r},_mergeLabelAttrs:function(t,e,n,i){return null===e?null:void 0!==e?t?Jr({},n,e):Jr({},i,n,e):null===n?null:void 0!==n?t?n:Jr({},i,n):t?void 0:i},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),i=t._builtins.defaultLabel.attrs,r=t._getDefaultLabel(),o=r.markup,a=r.attrs,s=0,l=e.length;s<l;s++){var u=this._labelCache[s];u.setAttribute("cursor",n?"move":"default");var c=this._labelSelectors[s],h=e[s],f=h.markup,g=h.attrs,d=this._mergeLabelAttrs(f||o,g,a,i);this.updateDOMSubtreeAttributes(u,d,{rootBBox:new di(h.size),selectors:c})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=i(this._V.linkTools.node).empty(),n=pr(this.model.get("toolMarkup")||this.model.toolMarkup),r=Ri(n());return e.append(r.node),this._toolCache=r,this.options.doubleLinkTools&&(t=this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(n=pr(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),Ri(n())):r.clone(),e.append(t.node),this._tool2Cache=t),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=i(this._V.markerVertices.node).empty(),e=pr(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,i){t.append(Ri(e(yr({idx:i},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=i(this._V.markerArrowheads.node);t.empty();var e=pr(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Ri(e({end:"source"})),this._V.targetArrowhead=Ri(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,n){return n||(n={}),this.cleanNodesCache(),this.updateConnection(n),this.updateDOMSubtreeAttributes(this.el,this.model.attr(),{selectors:this.selectors}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this},removeRedundantLinearVertices:function(t){var e=this.model,n=e.vertices(),i=[this.sourceAnchor].concat(n,[this.targetAnchor]),r=i.length,o=new vi(i);o.simplify({threshold:.001});var a=o.points.map(function(t){return t.toJSON()}),s=a.length;return r===s?0:(e.vertices(a.slice(1,s-1),t),r-s)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new Qn(this.sourceAnchor);case"target":return new Qn(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new Qn(this.sourcePoint);case"target":return new Qn(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},updateConnection:function(t){t=t||{};var e,n,i=this.model;if(t.translateBy&&i.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,o=t.ty||0;e=new vi(this.route).translate(r,o).points,this._translateConnectionPoints(r,o),(n=this.path).translate(r,o)}else{var a=i.vertices(),s=this.findAnchors(a),l=this.sourceAnchor=s.source,u=this.targetAnchor=s.target;e=this.findRoute(a,t);var c=this.findConnectionPoints(e,l,u),h=this.sourcePoint=c.source,f=this.targetPoint=c.target,g=this.findMarkerPoints(e,h,f);n=this.findPath(e,g.source||h,g.target||f)}this.route=e,this.path=n,this.metrics={}},findMarkerPoints:function(t,e,n){var i,r,o=t[0],a=t[t.length-1],s=this._markerCache;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),i=Qn(e).move(o||n,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),r=Qn(n).move(a||e,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=i||e.clone(),s.targetPoint=r||n.clone(),{source:i,target:r}},findAnchorsOrdered:function(t,e,n,i){var r,o,a,s,l=this.model,u=l.get(t),c=l.get(n),h=this.getEndView(t),f=this.getEndView(n),g=this.getEndMagnet(t),d=this.getEndMagnet(n);r=h?(a=e?new Qn(e):f?d:new Qn(c),this.getAnchor(u.anchor,h,g,a,t)):new Qn(u),o=f?(s=new Qn(i||r),this.getAnchor(c.anchor,f,d,s,n)):new Qn(c);var p={};return p[t]=r,p[n]=o,p},findAnchors:function(t){var e=this.model,n=t[0],i=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",i,"source",n):this.findAnchorsOrdered("source",n,"target",i)},findConnectionPoints:function(t,e,n){var i,r,o,a,s=t[0],l=t[t.length-1],u=this.model,c=u.get("source"),h=u.get("target"),f=this.sourceView,g=this.targetView,d=this.paper.options;if(f&&!f.isNodeConnection(this.sourceMagnet)){i=this.sourceMagnet||f.el;var p=c.connectionPoint||d.defaultConnectionPoint,m=new ti(s||n,e);o=this.getConnectionPoint(p,f,i,m,"source")}else o=e;if(g&&!g.isNodeConnection(this.targetMagnet)){r=this.targetMagnet||g.el;var v=h.connectionPoint||d.defaultConnectionPoint,I=new ti(l||e,n);a=this.getConnectionPoint(v,g,r,I,"target")}else a=n;return{source:o,target:a}},getAnchor:function(t,e,n,i,r){var o,a=e.isNodeConnection(n),s=this.paper.options;if(t||(t=a?s.defaultLinkAnchor:s.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:s.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)o=t;else{var l=t.name;if("function"!=typeof(o=s[a?"linkAnchorNamespace":"anchorNamespace"][l]))throw new Error("Unknown anchor: "+l)}var u=o.call(this,e,n,i,t.args||{},r,this);return u?u.round(this.decimalsRounding):new Qn},getConnectionPoint:function(t,e,n,i,r){var o,a,s=i.end,l=this.paper.options;if("function"==typeof l.linkConnectionPoint){var u=n===e.el?void 0:n;if(o=l.linkConnectionPoint(this,e,u,i.start,r))return o}if(!t)return s;if("function"==typeof t)a=t;else{var c=t.name;if("function"!=typeof(a=l.connectionPointNamespace[c]))throw new Error("Unknown connection point: "+c)}return(o=a.call(this,i,e,n,t.args||{},r,this))?o.round(this.decimalsRounding):s},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model,e=t.get("labels")||[];if(!e.length)return this;for(var n=t._builtins.defaultLabel.position,i=t._getDefaultLabel(),r=this._normalizeLabelPosition(i.position),o=Jr({},n,r),a=0,s=e.length;a<s;a++){var l=this._labelCache[a];if(l){var u=e[a],c=this._normalizeLabelPosition(u.position),h=Jr({},o,c),f=this._getLabelTransformationMatrix(h);l.setAttribute("transform",Ri.matrixToTransformString(f)),this._cleanLabelMatrices(a)}}return this},_cleanLabelMatrices:function(t){var e=this.metrics,n=this._labelSelectors[t];if(n)for(var i in n){var r=n[i].id;r&&r in e&&delete e[r].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var i=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+i.x+", "+i.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var r=this.options.doubleLinkToolsOffset||e;i=this.getPointAtLength(n-r),this._tool2Cache.attr("transform","translate("+i.x+", "+i.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===i.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){var e=this.model,n=this.paper,i=t+"View",r=e.get(t),o=r&&r.id;if(!o)return this[i]=null,this.updateEndMagnet(t),!0;var a=n.getModelById(o);if(!a)throw new Error("LinkView: invalid "+t+" cell.");var s=a.findView(n);return!!s&&(this[i]=s,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){var e=t+"Magnet",n=this.getEndView(t);if(n){var i=n.getMagnetFromLinkEnd(this.model.get(t));i===n.el&&(i=null),this[e]=i}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=zr(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionAngle:function(t){return(this.model.label(t).position||{}).angle||0},_getLabelPositionArgs:function(t){return(this.model.label(t).position||{}).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:Jr({},e,t)},addLabel:function(t,e,n,i){var r,o,a,s=0;a="number"!=typeof t?(r=t.x,o=t.y,"number"==typeof e?(s=e,n):e):(r=t,o=e,"number"==typeof n?(s=n,i):n);var l=this._getDefaultLabelPositionArgs(),u=a,c=this._mergeLabelPositionArgs(u,l),h={position:this.getLabelPosition(r,o,s,c)};return this.model.insertLabel(-1,h,a),-1},addVertex:function(t,e,n){var i="number"!=typeof t,r=i?t.x:t,o=i?t.y:e,a=i?e:n,s={x:r,y:o},l=this.getVertexIndex(r,o);return this.model.insertVertex(l,s,a),l},sendToken:function(t,e,n){var i,r,o;o=Kr(e)?(i=e.duration,r="reverse"===e.direction,e.connection):(i=e,r=!1,null);var a={dur:(i=i||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};r&&(a.keyPoints="1;0",a.keyTimes="0;1");var s,l,u,c=Ri(t);if("string"==typeof o)s=this.findBySelector(o,this.el,this.selectors)[0];else{var h=this._V;s=h.connection?h.connection.node:this.el.querySelector("path")}if(!(s instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");c.appendTo(this.paper.cells).animateAlongPath(a,s),setTimeout((l=c,u=n,function(){l.remove(),"function"==typeof u&&u()}),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||Oa,n=this.model.router(),i=this.paper.options.defaultRouter;if(!n){if(!i)return t.map(Qn);n=i}var r=Dr(n)?n:e[n.name];if(!Dr(r))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var o=n.args||{};return r.call(this,t,o,this)||t.map(Qn)},findPath:function(t,e,n){var i=this.paper.options.connectorNamespace||Ua,r=this.model.connector(),o=this.paper.options.defaultConnector;r||(r=o||{});var a=Dr(r)?r:i[r.name];if(!Dr(a))throw new Error('dia.LinkView: unknown connector: "'+r.name+'".');var s=Mr(r.args||{});s.raw=!0;var l=a.call(this,e,n,t,s,this);return"string"==typeof l&&(l=new xi(Ri.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(ir(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,i){var r,o={},a=0;(r="number"==typeof n?(a=n,i):n)&&(o.args=r);var s,l,u=!(r&&r.absoluteDistance),c=r&&r.absoluteDistance&&r.reverseDistance,h=r&&r.absoluteOffset,f=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},d=new Qn(t,e),p=f.closestPointT(d,g),m=f.lengthAtT(p,g);if(u&&(m=m/this.getConnectionLength()||0),c&&(m=-1*(this.getConnectionLength()-m)||1),o.distance=m,h||(s=f.tangentAtT(p)),s)l=s.pointOffset(d);else{var v=f.pointAtT(p),I=d.difference(v);l={x:I.x,y:I.y}}return o.offset=l,o.angle=a,o},_getLabelTransformationMatrix:function(t){var e,n=0,i={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");i=t.args||{},e=t.distance,n=t.angle||0}var r=0<e&&e<=1,o=0,a={x:0,y:0};if(t.offset){var s=t.offset;"number"==typeof s&&(o=s),s.x&&(a.x=s.x),s.y&&(a.y=s.y)}var l,u=0!==a.x||0!==a.y||0===o,c=i.keepGradient,h=i.ensureLegibility,f=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},d=r?e*this.getConnectionLength():e,p=f.tangentAtLength(d,g),m=n;if(p){if(u)(l=p.start).offset(a);else{var v=p.clone();v.rotate(p.start,-90),v.setLength(o),l=v.end}c&&(m=p.angle()+n,h&&(m=Tn((m+90)%180-90)))}else l=f.start,u&&l.offset(a);return Ri.createSVGMatrix().translate(l.x,l.y).rotate(m)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new Qn(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model.vertices(),i=this.getClosestPointLength(new Qn(t,e)),r=0,o=n.length;r<o;r++){var a=n[r];if(i<this.getClosestPointLength(a))break}return r},notifyPointerdown:function(t,e,n){$o.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove:function(t,e,n){$o.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup:function(t,e,n){this.notify("link:pointerup",t,e,n),$o.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){$o.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){$o.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){$o.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){switch(this.notifyPointerdown(t,e,n),t.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(t,e,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(t,e,n);case"marker-arrowhead":return void this.dragArrowheadStart(t,e,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(t,e,n);case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var i=this._dragData;switch(i&&this.eventData(t,i),this.eventData(t).action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n)}i&&yr(i,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var i=this._dragData;switch(i&&(this.eventData(t,i),this._dragData=null),this.eventData(t).action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){$o.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){$o.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){$o.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){$o.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,i){$o.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,i)},onevent:function(t,e,n,i){if(Ri(t.target).findParentByClass("link-tool",this.el)){if(t.stopPropagation(),this.can("useLinkTools")){if("remove"===e)return void this.model.remove({ui:!0});this.notify(e,t,n,i)}this.notifyPointerdown(t,n,i),this.paper.delegateDragEvents(this,t.data)}else $o.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n),this.eventData(t).stopPropagation&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var i=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){var i=t.currentTarget,r=parseInt(i.getAttribute("label-idx"),10),o=this._getLabelPositionAngle(r),a=this._getLabelPositionArgs(r),s=this._getDefaultLabelPositionArgs(),l=this._mergeLabelPositionArgs(a,s);this.eventData(t,{action:"label-move",labelIdx:r,positionAngle:o,positionArgs:l,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var i=t.target,r=parseInt(i.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var i=t.target,r=parseInt(i.getAttribute("idx"),10);this.model.removeVertex(r)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var i=t.target.getAttribute("end"),r=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,r)}},dragStart:function(t,e,n){this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var i=this.eventData(t),r={position:this.getLabelPosition(e,n,i.positionAngle,i.positionArgs)};this.paper.options.snapLabels&&delete r.position.offset,this.model.label(i.labelIdx,r)},dragVertex:function(t,e,n){var i=this.eventData(t);this.model.vertex(i.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?this._snapArrowhead(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var i=this.eventData(t);this.model.translate(e-i.dx,n-i.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var i=this.eventData(t),r=this.paper;r.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,e,n),r.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,t)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0})}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,i=t.initialEnd,r=this.model.prop(n);if(r&&!Ro.endsEqual(i,r)){var o=this.paper;i.id&&this.notify("link:disconnect",e,o.findViewByModel(i.id),t.initialMagnet,n),r.id&&this.notify("link:connect",e,o.findViewByModel(r.id),t.magnetUnderPointer,n)}},_snapArrowhead:function(t,e,n){var i=this.eventData(t),r=this.paper.options.snapLinks.radius||50,o=this.paper.findViewsInArea({x:e-r,y:n-r,width:2*r,height:2*r}),a=i.closestView||null,s=i.closestMagnet||null,l=i.magnetProxy||null;i.closestView=i.closestMagnet=i.magnetProxy=null;var u,c=Number.MAX_VALUE,h=new Qn(e,n),f=this.paper;o.forEach(function(t){var e=[];"false"!==t.el.getAttribute("magnet")&&e.push({bbox:t.model.getBBox(),magnet:t.el}),t.$("[magnet]").toArray().forEach(function(n){e.push({bbox:t.getNodeBBox(n),magnet:n})}),e.forEach(function(e){var n=e.magnet,r=e.bbox.center().squaredDistance(h);r<c&&(s===n||f.options.validateConnection.apply(f,i.validateConnectionArgs(t,t.el===n?null:n)))&&(c=r,i.closestView=t,i.closestMagnet=n)})},this);var g=null,d=i.closestView,p=i.closestMagnet;p&&(g=i.magnetProxy=d.findProxyNode(p,"highlighter"));var m=i.arrowhead,v=s!==p;if(a&&v&&a.unhighlight(l,{connecting:!0,snapping:!0}),d){if(!v)return;d.highlight(g,{connecting:!0,snapping:!0}),u=d.getLinkEnd(p,e,n,this.model,m)}else u={x:e,y:n};this.model.set(m,u||{x:e,y:n},{ui:!0}),a&&this.notify("link:snap:disconnect",t,a,s,m),d&&this.notify("link:snap:connect",t,d,p,m)},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,i){var r=this.paper,o=this.model;if(i.eventTarget!==t){i.magnetProxy&&i.viewUnderPointer.unhighlight(i.magnetProxy,{connecting:!0});var a=i.viewUnderPointer=r.findView(t);if(a){var s=i.magnetUnderPointer=a.findMagnet(t),l=i.magnetProxy=a.findProxyNode(s,"highlighter");s&&this.paper.options.validateConnection.apply(r,i.validateConnectionArgs(a,s))?l&&a.highlight(l,{connecting:!0}):(i.magnetUnderPointer=null,i.magnetProxy=null)}else i.magnetUnderPointer=null,i.magnetProxy=null}i.eventTarget=t,o.set(i.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t,e,n){void 0===t&&(t={});var i=this.model,r=t.viewUnderPointer,o=t.magnetUnderPointer,a=t.magnetProxy,s=t.arrowhead;if(o&&a&&r){r.unhighlight(a,{connecting:!0});var l=r.getLinkEnd(o,e,n,i,s);i.set(s,l,{ui:!0})}},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,n=[];n[4]=t,n[5]=this;var i=0,r=0;e="source"===t?(i=2,"target"):(r=2,"source");var o=this.model.get(e);if(o.id){var a=n[i]=this.paper.findViewByModel(o.id),s=a.getMagnetFromLinkEnd(o);s===a.el&&(s=void 0),n[i+1]=s}return function(t,e){return n[r]=t,n[r+1]=t.el===e?void 0:e,n}},_markAvailableMagnets:function(t){function e(t,e){var n=t.paper;return n.options.validateConnection.apply(n,this.validateConnectionArgs(t,e))}var n=this.paper,i=n.model.getCells();t.marked={};for(var r=0,o=i.length;r<o;r++){var a=i[r].findView(n);if(a){var s=Array.prototype.slice.call(a.el.querySelectorAll("[magnet]"));"false"!==a.el.getAttribute("magnet")&&s.push(a.el);var l=s.filter(e.bind(t,a));if(0<l.length){for(var u=0,c=l.length;u<c;u++)a.highlight(l[u],{magnetAvailability:!0});a.highlight(null,{elementAvailability:!0}),t.marked[a.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e,n,i=Object.keys(t.marked),r=0,o=i.length;r<o;r++){e=i[r],n=t.marked[e];var a=this.paper.findViewByModel(e);if(a){for(var s=0,l=n.length;s<l;s++)a.unhighlight(n[s],{magnetAvailability:!0});a.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Mr(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=n),n}},{Flags:Fa});Object.defineProperty(Xa.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new di(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new di(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(Xa.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new di(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new di(this.targetAnchor):t.getNodeBBox(n||t.el)}});var Va=Ko.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData:function(t,e){var n,i=this.options,r=i.useFirstSubpath;try{var o=Ri(e);if(n=o.convertToPathData().trim(),"PATH"===o.tagName()&&r){var a=n.search(/.M/i)+1;0<a&&(n=n.substr(0,a))}}catch(r){var s=t.getNodeBoundingRect(e);n=Ri.rectToPath(yr({},i,s.toJSON()))}return n},highlightConnection:function(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode:function(t,e){var n=this.vel,i=this.options,r=i.padding,o=i.layer,a=t.getNodeMatrix(e);if(r){o||e!==t.el||n.remove();var s=t.getNodeBoundingRect(e),l=s.x+s.width/2,u=s.y+s.height/2;s=Ri.transformRect(s,a);var c=Math.max(s.width,1),h=Math.max(s.height,1),f=(c+r)/c,g=(h+r)/h,d=Ri.createSVGMatrix({a:f,b:0,c:0,d:g,e:l-f*l,f:u-g*u});a=a.multiply(d)}n.attr({d:this.getPathData(t,e),transform:Ri.matrixToTransformString(a)})},highlight:function(t,e){var n=this.vel,i=this.options;n.attr(i.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),Ha=Ko.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:20,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild:function(t,e){var n=this.MASK_CHILD_ATTRIBUTE_BLACKLIST,i=this.MASK_REPLACE_TAGS,r=this.MASK_REMOVE_TAGS,o=e.tagName();if(!Ri.isSVGGraphicsElement(e)||r.includes(o))return e.remove(),!1;if(i.includes(o)){var a=t.vel.findOne("#"+e.id);if(a){var s=a.node,l=t.getNodeBoundingRect(s);t.model.isElement()&&(l=Ri.transformRect(l,t.getNodeMatrix(s)));var u=Ri("rect",l.toJSON()),c=l.center(),h=c.x,f=c.y,g=a.rotate(),d=g.angle,p=g.cx;void 0===p&&(p=h);var m=g.cy;void 0===m&&(m=f),d&&u.rotate(d,p,m),e.parent().append(u)}return e.remove(),!1}return n.forEach(function(t){"fill"===t&&"none"===e.attr("fill")||e.removeAttr(t)}),!0},transformMaskRoot:function(t,e){this.MASK_ROOT_ATTRIBUTE_BLACKLIST.forEach(function(t){e.removeAttr(t)})},getMaskShape:function(t,e){var n,i=this,r=this.options,o=this.MASK_REPLACE_TAGS,a=r.deep,s=e.tagName();if("G"===s){if(!a)return null;!function(t,e){for(var n=t.children();0<n.length;){var i=n.shift();e(i)&&n.push.apply(n,i.children())}}(n=e.clone(),function(e){return i.transformMaskChild(t,e)})}else{if(o.includes(s))return null;n=e.clone()}return this.transformMaskRoot(t,n),n},getMaskId:function(){return"highlight-mask-"+this.cid},getMask:function(t,e){var n=this.VISIBLE,i=this.INVISIBLE,r=this.options,o=r.padding,a=r.attrs,s="stroke-width"in a?a["stroke-width"]:1,l="none"!==e.attr("fill"),u=parseFloat(e.attr("stroke-width"));isNaN(u)&&(u=1);var c=u+2*o,h=c+2*s,f=this.getMaskShape(t,e);if(!f){var g=t.getNodeBoundingRect(e.node);g.inflate(g.width?0:.5,g.height?0:.5),f=Ri("rect",g.toJSON())}return f.attr(a),Ri("mask",{id:this.getMaskId()}).append([f.clone().attr({fill:l?n:"none",stroke:n,"stroke-width":h}),f.clone().attr({fill:l?i:"none",stroke:i,"stroke-width":c})])},removeMask:function(t){var e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask:function(t,e){t.defs.appendChild(e.node)},highlight:function(t,e){var n=this.options,i=this.vel,r=n.padding,o=n.attrs,a=n.maskClip;void 0===a&&(a=20);var s=n.layer,l="stroke"in o?o.stroke:"#000000";s||e!==t.el||i.remove();var u=t.getNodeBoundingRect(e).inflate(r+a),c=this.getMask(t,Ri(e));this.addMask(t.paper,c),i.attr(u.toJSON()),i.attr({transform:Ri.matrixToTransformString(t.getNodeMatrix(e)),mask:"url(#"+c.id+")",fill:l})},unhighlight:function(t){this.removeMask(t.paper)}}),Ja=Ko.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Wi("highlight-opacity"),highlight:function(t,e){Ri(e).addClass(this.opacityClassName)},unhighlight:function(t,e){Ri(e).removeClass(this.opacityClassName)}}),Qa=Wi("highlighted"),Ka={stroke:Va,mask:Ha,opacity:Ja,addClass:Ko.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Qa},highlight:function(t,e){Ri(e).addClass(this.options.className)},unhighlight:function(t,e){Ri(e).removeClass(this.options.className)}},{className:Qa})};function qa(t){return function(e,n,i,r){if(i instanceof Element){var o,a=this.paper.findView(i);return o=a?a.isNodeConnection(i)?$a(a,"fixedAt"in r?r.fixedAt:"50%"):a.getNodeBBox(i).center():new Qn,t.call(this,e,n,o,r)}return t.apply(this,arguments)}}function $a(t,e){var n=parseFloat(e);return ir(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}var ts=qa(function(t,e,n,i){var r=t.getConnection(),o=t.getConnectionSubdivisions(),a=new ti(n.clone().offset(0,1e6),n.clone().offset(0,-1e6)),s=new ti(n.clone().offset(1e6,0),n.clone().offset(-1e6,0)),l=a.intersect(r,{segmentSubdivisions:o}),u=s.intersect(r,{segmentSubdivisions:o}),c=[];return l&&Array.prototype.push.apply(c,l),u&&Array.prototype.push.apply(c,u),0<c.length?n.chooseClosest(c):"fallbackAt"in i?$a(t,i.fallbackAt):es(t,e,n,i)}),es=qa(function(t,e,n,i){return t.getClosestPoint(n)||new Qn}),ns={resolveRef:qa,connectionRatio:function(t,e,n,i){var r="ratio"in i?i.ratio:.5;return t.getPointAtRatio(r)},connectionLength:function(t,e,n,i){var r="length"in i?i.length:20;return t.getPointAtLength(r)},connectionPerpendicular:ts,connectionClosest:es};function is(t,e,n){if(jr(n)){var i=n.x,r=n.y;if(isFinite(r)){var o=new ti(e,t).parallel(r);e=o.start,t=o.end}n=i}if(!isFinite(n))return t;var a=t.distance(e);return 0===n&&0<a?t:t.move(e,-Math.min(n,a-1))}function rs(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function os(t,e,n,i){var r=e.getNodeBBox(n);i.stroke&&r.inflate(rs(n)/2);var o=t.intersect(r);return is(o?t.start.chooseClosest(o):t.end,t.start,i.offset)}var as="segmentSubdivisons",ss="shapeBBox",ls={anchor:function(t,e,n,i){var r=i.offset,o=i.alignOffset,a=i.align;return a&&function(t,e,n){var i,r,o,a;void 0===n&&(n=0);var s=t.start,l=t.end;switch(e){case"left":i="x",r=l,o=s,a=-1;break;case"right":i="x",r=s,o=l,a=1;break;case"top":i="y",r=l,o=s,a=-1;break;case"bottom":i="y",r=s,o=l,a=1;break;default:return}s[i]<l[i]?r[i]=o[i]:o[i]=r[i],isFinite(n)&&(r[i]+=a*n,o[i]+=a*n)}(t,a,o),is(t.end,t.start,r)},bbox:os,rectangle:function(t,e,n,i){var r=e.model.angle();if(0===r)return os(t,e,n,i);var o=e.getNodeUnrotatedBBox(n);i.stroke&&o.inflate(rs(n)/2);var a=o.center(),s=t.clone().rotate(a,r),l=s.setLength(1e6).intersect(o);return is(l?s.start.chooseClosest(l).rotate(a,-r):t.end,t.start,i.offset)},boundary:function(t,e,n,i){var r,o,a=i.selector,s=t.end;if(r="string"==typeof a?e.findBySelector(a)[0]:Array.isArray(a)?Xi(n,a):function(t){if(!t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!Ri.isSVGGraphicsElement(r)){if(r===n||!Ri.isSVGGraphicsElement(n))return s;r=n}var l,u=e.getNodeShape(r),c=e.getNodeMatrix(r),h=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),g=h.multiply(f).multiply(c),d=g.inverse(),p=Ri.transformLine(t,d),m=p.start.clone(),v=e.getNodeData(r);if(!1===i.insideout&&(v[ss]||(v[ss]=u.bbox()),v[ss].containsPoint(m)))return s;if(u instanceof xi){var I=i.precision||2;v[as]||(v[as]=u.getSegmentSubdivisions({precision:I})),l={precision:I,segmentSubdivisions:v[as]}}!0===i.extrapolate&&p.setLength(1e6),(o=p.intersect(u,l))?Ri.isArray(o)&&(o=m.chooseClosest(o)):!0===i.sticky&&(o=u instanceof di?u.pointNearestToPoint(m):u instanceof oi?u.intersectionWithLineFromCenterToPoint(m):u.closestPoint(m,l));var A=o?Ri.transformPoint(o,g):s,y=i.offset||0;return i.stroke&&(y+=rs(r)/2),is(A,t.start,y)}};function us(t){return function(e,n,i,r){var o=!!r.rotate,a=o?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),s=a[t](),l=r.dx;if(l){var u=ir(l);l=parseFloat(l),isFinite(l)&&(u&&(l/=100,l*=a.width),s.x+=l)}var c=r.dy;if(c){var h=ir(c);c=parseFloat(c),isFinite(c)&&(h&&(c/=100,c*=a.height),s.y+=c)}return o?s.rotate(e.model.getBBox().center(),-e.model.angle()):s}}var cs={center:us("center"),top:us("topMiddle"),bottom:us("bottomMiddle"),left:us("leftMiddle"),right:us("rightMiddle"),topLeft:us("origin"),topRight:us("topRight"),bottomLeft:us("bottomLeft"),bottomRight:us("corner"),perpendicular:qa(function(t,e,n,i){var r=t.model.angle(),o=t.getNodeBBox(e),a=o.center(),s=o.origin(),l=o.corner(),u=i.padding;if(isFinite(u)||(u=0),s.y+u<=n.y&&n.y<=l.y-u){var c=n.y-a.y;a.x+=0===r||180===r?0:1*c/Math.tan(zn(r)),a.y+=c}else if(s.x+u<=n.x&&n.x<=l.x-u){var h=n.x-a.x;a.y+=90===r||270===r?0:h*Math.tan(zn(r)),a.x+=h}return a}),midSide:qa(function(t,e,n,i){var r,o,a,s=!!i.rotate;s?(r=t.getNodeUnrotatedBBox(e),a=t.model.getBBox().center(),o=t.model.angle()):r=t.getNodeBBox(e);var l,u=i.padding;switch(isFinite(u)&&r.inflate(u),s&&n.rotate(a,o),r.sideNearestToPoint(n)){case"left":l=r.leftMiddle();break;case"right":l=r.rightMiddle();break;case"top":l=r.topMiddle();break;case"bottom":l=r.bottomMiddle()}return s?l.rotate(a,-o):l}),modelCenter:function(t,e,n,i,r){return t.model.getPointFromConnectedLink(this.model,r).offset(i.dx,i.dy)}},hs={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},fs={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools"},gs=9007199254740991,ds=$o.Highlighting,ps={};ps[ds.DEFAULT]={name:"stroke",options:{padding:3}},ps[ds.MAGNET_AVAILABILITY]={name:"addClass",options:{className:"available-magnet"}},ps[ds.ELEMENT_AVAILABILITY]={name:"addClass",options:{className:"available-cell"}};var ms=Ho.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,background:!1,perpendicularLinks:!1,elementView:ea,linkView:Xa,snapLabels:!1,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:ps,preventContextMenu:!0,preventDefaultBlankAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Ro,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,i,r,o){return("target"===r?n:t)instanceof ea},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:hs.EXACT,frozen:!1,onViewUpdate:function(t,e,n,i,r){e&t.FLAG_INSERT||i.mounting||r.requestConnectedLinksUpdate(t,n,i)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Ka,anchorNamespace:cs,linkAnchorNamespace:ns,connectionPointNamespace:ls},events:{dblclick:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","mousedown .joint-cell [event]":"onevent","touchstart .joint-cell [event]":"onevent","mousedown .joint-cell [magnet]":"onmagnet","touchstart .joint-cell [magnet]":"onmagnet","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_zPivots:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],MIN_SCALE:1e-6,init:function(){var t=this.options,e=this.el;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&_r(joint,"shapes")?joint.shapes:null);var n=this.model=t.model||new Xo;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this.setDimensions(),this.startListening(),this._views={},this._zPivots={},this.$document=i(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var i=n.position;this.isAsync()||!qr(i)?this.renderView(t,n):(n.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(t,n),0===i&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){var i=this.findViewByModel(t);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===hs.APPROX){var n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.removeZPivots(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.updateViews(t)}var r=this.SORT_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.sortViews()}},cloneOptions:function(){var t=this.options,e=t.defaultConnector,n=t.defaultRouter,i=t.defaultConnectionPoint,r=t.defaultAnchor,o=t.defaultLinkAnchor,a=t.origin,s=t.highlighting,l=t.cellViewNamespace,u=t.interactive;!l&&"undefined"!=typeof joint&&_r(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),Dr(e)||(t.defaultConnector=Sr(e)),Dr(n)||(t.defaultRouter=Sr(n)),Dr(i)||(t.defaultConnectionPoint=Sr(i)),Dr(r)||(t.defaultAnchor=Sr(r)),Dr(o)||(t.defaultLinkAnchor=Sr(o)),jr(u)&&(t.interactive=yr({},u)),jr(s)&&(t.highlighting=br({},s,ps)),t.origin=yr({},a)},children:function(){var t=Ri.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:Wi("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:Wi("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Wi("layers"),selector:"layers",children:[{tagName:"g",className:Wi("back-layer"),selector:"back"},{tagName:"g",className:Wi("cells-layer viewport"),selector:"cells"},{tagName:"g",className:Wi("front-layer"),selector:"front"},{tagName:"g",className:Wi("tools-layer"),selector:"tools"}]}]}]},getLayerNode:function(t){var e=this._layers;if(t in e)return e[t];throw new Error('dia.Paper: Unknown layer "'+t+'"')},render:function(){var t;this.renderChildren();var e=this.childNodes,n=this.options,r=e.svg,o=e.cells,a=e.defs,s=e.tools,l=e.layers,u=e.back,c=e.front,h=e.background,f=e.grid;return this.svg=r,this.defs=a,this.tools=s,this.cells=o,this.layers=l,this.$background=i(h),this.$grid=i(f),yr(this._layers,((t={})[fs.BACK]=u,t[fs.CELLS]=o,t[fs.FRONT]=c,t[fs.TOOLS]=s,t)),Ri.ensureId(r),this.viewport=o,n.background&&this.drawBackground(n.background),n.drawGrid&&this.drawGrid(),this},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(void 0===t){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),Ri.createSVGMatrix(t)}t=Ri.createSVGMatrix(t);var i=Ri.matrixToTransformString(t);return e.setAttribute("transform",i),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return Ri.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof $o)for(var i=t.model,r=this.model.getConnectedLinks(i),o=0,a=r.length;o<a;o++){var s=r[o],l=this.findViewByModel(s);if(l){var u=["UPDATE"];s.getTargetCell()===i&&u.push("TARGET"),s.getSourceCell()===i&&u.push("SOURCE");var c=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(u),c,n)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof $o))return!1;var n=t.model;if(n.isElement())return!1;if(0==(e&t.getFlag(["SOURCE","TARGET"]))){var i=0,r=this.findViewByModel(n.getSourceCell());r&&!this.isViewMounted(r)&&(i=this.dumpView(r),t.updateEndMagnet("source"));var o=0,a=this.findViewByModel(n.getTargetCell());if(a&&!this.isViewMounted(a)&&(o=this.dumpView(a),t.updateEndMagnet("target")),0===i&&0===o)return!this.dumpView(t)}return!1},requestViewUpdate:function(t,e,n,i){i||(i={}),this.scheduleViewUpdate(t,e,n,i);var r=this.isAsync();if(!(this.isFrozen()||r&&!1!==i.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(i);r&&this.notifyAfterRender(o,i)}},scheduleViewUpdate:function(t,e,n,i){var r=this._updates,o=this.options,a=t.FLAG_REMOVE,s=t.FLAG_INSERT,l=t.UPDATE_PRIORITY,u=t.cid,c=r.priorities[n];if(c||(c=r.priorities[n]={}),l<n)for(var h=n-1;l<=h;h--){var f=r.priorities[h];f&&u in f&&(c[u]|=f[u],delete f[u])}var g=c[u]||0;if((g&e)!==e){g||r.count++,e&a&&g&s?c[u]^=s:e&s&&g&a&&(c[u]^=a),c[u]|=e;var d=o.onViewUpdate;"function"==typeof d&&d.call(this,t,e,n,i||{},this)}},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,i=e.priorities[t.UPDATE_PRIORITY],r=this.registerMountedView(t)|i[n];return delete i[n],r},dumpView:function(t,e){var n=this.dumpViewUpdate(t);return n?this.updateView(t,n,e):0},updateView:function(t,e,n){if(!t)return 0;var i=t.FLAG_REMOVE,r=t.FLAG_INSERT,o=t.model;if(t instanceof $o){if(e&i)return this.removeView(o),0;e&r&&(this.insertView(t),e^=r)}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var i=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],i},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var i=n.unmounted[e]||0;return delete n.unmounted[e],i},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Cr({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){var e;this.notifyBeforeRender(t);for(var n=0,i=0,r=gs;i++,n+=(e=this.updateViewsBatch(t)).updated,r=Math.min(e.priority,r),!e.empty;);var o={updated:n,batches:i,priority:r};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){for(var t=this._updates.priorities,e=Object.keys(t),n=e.length;0<n&&n--;)for(var i in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:gs});var n=this._updates,i=n.id;if(i){nr(i),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);var r=this.updateViewsBatch(t),o=Cr({},t,{mountBatchSize:1e3-r.mounted,unmountBatchSize:1e3-r.unmounted}),a=this.checkViewport(o),s=a.unmounted,l=a.mounted,u=e.processed,c=n.count;0<r.updated&&(u+=r.updated+r.unmounted,r.processed=u,e.priority=Math.min(r.priority,e.priority),r.empty&&0===l?(r.unmounted+=s,r.mounted+=l,r.priority=e.priority,this.notifyAfterRender(r,t),e.processed=0,n.count=0):e.processed=u);var h=t.progress;if(c&&"function"==typeof h&&h.call(this,r.empty,u,c,r,this),n.id!==i)return}n.id=er(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t){void 0===t&&(t={});var e=t.beforeRender;"function"!=typeof e&&"function"!=typeof(e=this.options.beforeRender)||e.call(this,t,this)},notifyAfterRender:function(t,e){void 0===e&&(e={});var n=e.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||1/0,n=this._updates,i=0,r=0,o=0,a=0,s=gs,l=!0,u=this.options,c=n.priorities,h="viewport"in t?t.viewport:u.viewport;"function"!=typeof h&&(h=null);var f=u.onViewPostponed;"function"!=typeof f&&(f=null);var g=Object.keys(c);t:for(var d=0,p=g.length;d<p;d++){var m=g[d],v=c[m];for(var I in v){if(e<=i){l=!1;break t}var A=Vo[I];if(A){var y=v[I];if(0==(y&A.FLAG_REMOVE)){var C=I in n.unmounted;if(A.DETACHABLE&&h&&!h.call(this,A,!C,this)){C||(this.registerUnmountedView(A),A.unmount()),n.unmounted[I]|=y,delete v[I],o++;continue}C&&(y|=A.FLAG_INSERT,a++),y|=this.registerMountedView(A)}var b=this.updateView(A,y,t);0<b&&(v[I]=b,!f||!f.call(this,A,b,this)||v[I])?(r++,l=!1):(m<s&&(s=m),i++,delete v[I])}else delete v[I]}}return{priority:s,updated:i,postponed:r,unmounted:o,mounted:a,empty:l}},getUnmountedViews:function(){for(var t=this._updates,e=Object.keys(t.unmounted),n=e.length,i=new Array(n),r=0;r<n;r++)i[r]=Vo[e[r]];return i},getMountedViews:function(){for(var t=this._updates,e=Object.keys(t.mounted),n=e.length,i=new Array(n),r=0;r<n;r++)i[r]=Vo[e[r]];return i},checkUnmountedViews:function(t,e){e||(e={});var n=0;"function"!=typeof t&&(t=null);for(var i=("mountBatchSize"in e?e.mountBatchSize:1/0),r=this._updates,o=r.unmountedCids,a=r.unmounted,s=0,l=Math.min(o.length,i);s<l;s++){var u=o[s];if(u in a){var c=Vo[u];if(c)if(c.DETACHABLE&&t&&!t.call(this,c,!1,this))o.push(u);else{n++;var h=this.registerMountedView(c);h&&this.scheduleViewUpdate(c,h,c.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,s),n},checkMountedViews:function(t,e){e||(e={});var n=0;if("function"!=typeof t)return n;for(var i=("unmountBatchSize"in e?e.unmountBatchSize:1/0),r=this._updates,o=r.mountedCids,a=r.mounted,s=0,l=Math.min(o.length,i);s<l;s++){var u=o[s];if(u in a){var c=Vo[u];c&&(c.DETACHABLE&&!t.call(this,c,!0,this)?(n++,this.registerUnmountedView(c)&&c.unmount()):o.push(u))}}return o.splice(0,s),n},checkViewport:function(t){var e=Cr({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,i=this.checkMountedViews(n,e);if(0<i){var r=this._updates.unmountedCids;e.mountBatchSize=Math.min(r.length-i,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(n,e),unmounted:i}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,i=this.options.frozen,r=e.freezeKey;if(n&&n!==r){if(i&&r)return;e.freezeKey=n,e.keyFrozen=i}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&nr(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,i=e.freezeKey;n&&i&&n!==i||(e.freezeKey=null,n&&n===i&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===hs.EXACT},onRemove:function(){this.freeze(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return qr(e)||(e=this.el.clientWidth),qr(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){var n=this.options,i=void 0===t?n.width:t,r=void 0===e?n.height:e;this.options.width=i,this.options.height=r,qr(i)&&(i=Math.round(i)),qr(r)&&(r=Math.round(r)),this.$el.css({width:null===i?"":i,height:null===r?"":r});var o=this.getComputedSize();this.trigger("resize",o.width,o.height)},setOrigin:function(t,e){return this.translate(t||0,e||0,{absolute:!0})},fitToContent:function(t,e,n,i){n=Kr(t)?(t=(i=t).gridWidth||1,e=i.gridHeight||1,i.padding||0):(i||(i={}),t=t||1,e=e||1,n||0);var r=Math.max(i.minWidth||0,t),o=Math.max(i.minHeight||0,e),a=i.maxWidth||Number.MAX_VALUE,s=i.maxHeight||Number.MAX_VALUE,l=i.allowNewOrigin;n=cr(n);var u="contentArea"in i?new di(i.contentArea):this.getContentArea(i),c=this.scale(),h=this.translate(),f=c.sx,g=c.sy;u.x*=f,u.y*=g,u.width*=f,u.height*=g;var d=Math.ceil((u.width+u.x)/t),p=Math.ceil((u.height+u.y)/e);i.allowNegativeBottomRight||(d=Math.max(d,1),p=Math.max(p,1)),d*=t,p*=e;var m=0,v=0;("negative"===l&&u.x<0||"positive"===l&&0<=u.x||"any"===l)&&(m=Math.ceil(-u.x/t)*t,d+=m+=n.left),("negative"===l&&u.y<0||"positive"===l&&0<=u.y||"any"===l)&&(v=Math.ceil(-u.y/e)*e,p+=v+=n.top),d+=n.right,p+=n.bottom,d=Math.max(d,r),p=Math.max(p,o),d=Math.min(d,a),p=Math.min(p,s);var I=this.getComputedSize(),A=d!=I.width||p!=I.height;return(m!=h.tx||v!=h.ty)&&this.translate(m,v),A&&this.setDimensions(d,p),new di(-m/f,-v/g,d/f,p/g)},scaleContentToFit:function(t){var e,n;if(t||(t={}),"contentArea"in t){var i=t.contentArea;e=this.localToPaperRect(i),n=new Qn(i)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(e.width&&e.height){Cr(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var r,o=cr(t.padding),a=t.minScaleX||t.minScale,s=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,u=t.maxScaleY||t.maxScale;if(t.fittingBBox)r=t.fittingBBox;else{var c=this.translate(),h=this.getComputedSize();r={x:c.tx,y:c.ty,width:h.width,height:h.height}}r=new di(r).moveAndExpand({x:o.left,y:o.top,width:-o.left-o.right,height:-o.top-o.bottom});var f=this.scale(),g=r.width/e.width*f.sx,d=r.height/e.height*f.sy;if(t.preserveAspectRatio&&(g=d=Math.min(g,d)),t.scaleGrid){var p=t.scaleGrid;g=p*Math.floor(g/p),d=p*Math.floor(d/p)}g=Math.min(s,Math.max(a,g)),d=Math.min(u,Math.max(l,d));var m=this.options.origin,v=r.x-n.x*g-m.x,I=r.y-n.y*d-m.y;this.scale(g,d),this.translate(v,I)}},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new di:Ri(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this.options.restrictTranslate;return Dr(n)?n.apply(this,t):!0===n?this.getArea():n?new di(n):null},createViewForModel:function(t){var n,i,r=this.options.cellViewNamespace,o=t.get("type")+"View",a=Xi(r,o,".");return i=t.isLink()?(n=this.options.linkView,Xa):(n=this.options.elementView,ea),new(n.prototype instanceof e.View?a||n:n.call(this,t)||a||i)({model:t,interactive:this.options.interactive})},removeView:function(t){var e=t.id,n=this._views,i=this._updates,r=n[e];if(r){var o=r.cid,a=i.mounted,s=i.unmounted;r.remove(),delete n[e],delete a[o],delete s[o]}return r},renderView:function(t,e){var n,i,r=t.id,o=this._views;return i=r in o?(n=o[r]).FLAG_INSERT:((n=o[t.id]=this.createViewForModel(t)).paper=this).registerUnmountedView(n)|n.getFlag(n.initFlag),this.requestViewUpdate(n,i,n.UPDATE_PRIORITY,e),n},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,i=t.length;n<i;n++)this.renderView(t[n],e);this.unfreeze({key:"reset"}),this.sortViews()},removeViews:function(){wr(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t=i(this.cells).children("[model-id]"),e=this.model.get("cells");ur(t,function(t,n){var i=e.get(t.getAttribute("model-id")),r=e.get(n.getAttribute("model-id")),o=i.attributes.z||0,a=r.attributes.z||0;return o===a?0:o<a?-1:1})},insertView:function(t){var e=this.cells;switch(this.options.sorting){case hs.APPROX:var n=t.model.get("z"),i=this.addZPivot(n);e.insertBefore(t.el,i);break;case hs.EXACT:default:e.appendChild(t.el)}},addZPivot:function(t){(t=+t)||(t=0);var e=this._zPivots,n=e[t];if(n)return n;n=e[t]=document.createComment("z-index:"+(t+1));var i=-1/0;for(var r in e)(r=+r)<t&&i<r&&(i=r);var o=this.cells;if(i!==-1/0){var a=e[i];o.insertBefore(n,a.nextSibling)}else o.insertBefore(n,o.firstChild);return n},removeZPivots:function(){var t=this._zPivots,e=this.viewport;for(var n in t)e.removeChild(t[n]);this._zPivots={}},scale:function(t,e,n,i){if(void 0===t)return Ri.matrixToScale(this.matrix());void 0===e&&(e=t),void 0===n&&(i=n=0);var r=this.translate();if(n||i||r.tx||r.ty){var o=r.tx-n*(t-1),a=r.ty-i*(e-1);this.translate(o,a)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var s=this.matrix();return s.a=t,s.d=e,this.matrix(s),this.trigger("scale",t,e,n,i),this},rotate:function(t,e,n){if(void 0===t)return Ri.matrixToRotate(this.matrix());if(void 0===e){var i=this.cells.getBBox();e=i.width/2,n=i.height/2}var r=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(r),this},translate:function(t,e){if(void 0===t)return Ri.matrixToTranslate(this.matrix());var n=this.matrix();n.e=t||0,n.f=e||0,this.matrix(n);var i=this.translate(),r=this.options.origin;return r.x=i.tx,r.y=i.ty,this.trigger("translate",i.tx,i.ty),this.options.drawGrid&&this.drawGrid(),this},findView:function(t){var e=$r(t)?this.cells.querySelector(t):t instanceof i?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=$r(t)||qr(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new Qn(t),this.model.getElements().map(this.findViewByModel,this).filter(function(e){return e&&e.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=Cr(e||{},{strict:!1}),t=new di(t);var n=this.model.getElements().map(this.findViewByModel,this),i=e.strict?"containsRect":"intersect";return n.filter(function(e){return e&&t[i](e.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t){for(var e,n=[],i=arguments.length-1;0<i--;)n[i]=arguments[i+1];"string"==typeof t&&(e=this).trigger.apply(e,["tools:event",t].concat(n))},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new Qn(t,e);return Ri.transformPoint(n,this.matrix())},localToPaperRect:function(t,e,n,i){var r=new di(t,e,n,i);return Ri.transformRect(r,this.matrix())},paperToLocalPoint:function(t,e){var n=new Qn(t,e);return Ri.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(t,e,n,i){var r=new di(t,e,n,i);return Ri.transformRect(r,this.matrix().inverse())},localToClientPoint:function(t,e){var n=new Qn(t,e);return Ri.transformPoint(n,this.clientMatrix())},localToClientRect:function(t,e,n,i){var r=new di(t,e,n,i);return Ri.transformRect(r,this.clientMatrix())},clientToLocalPoint:function(t,e){var n=new Qn(t,e);return Ri.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,n,i){var r=new di(t,e,n,i);return Ri.transformRect(r,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,i){return this.localToPaperRect(t,e,n,i).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new Qn(t,e).difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,n,i){var r=this.pageOffset(),o=new di(t,e,n,i);return o.x-=r.x,o.y-=r.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new Qn(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Xa))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,i=this.model,r=i.constructor.validations;return!(!n.multiLinks&&!r.multiLinks.call(this,i,e)||!n.linkPinning&&!r.linkPinning.call(this,i,e)||"function"==typeof n.allowLink&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return Dr(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t){void 0===t&&(t={});var e=t.highlighter,n=t.type,i=this.options,r=i.highlighting,o=i.highlighterNamespace;if(void 0===e){if(!r)return!1;if(n&&!1===(e=r[n]))return!1;e||(e=r.default)}if(!e)return!1;$r(e)&&(e={name:e});var a=e.name,s=o[a];if(!s)throw new Error('Unknown highlighter ("'+a+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+a+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+a+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:a}},onCellHighlight:function(t,e,n){var i=this.resolveHighlighter(n);if(i){var r=i.highlighter,o=i.options;r.highlight(t,e,o)}},onCellUnhighlight:function(t,e,n){var i=this.resolveHighlighter(n);if(i){var r=i.highlighter,o=i.options;r.unhighlight(t,e,o)}},pointerdblclick:function(t){t.preventDefault(),t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=tr(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?(t.preventDefault(),e.pointerdown(t,n.x,n.y)):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,n.x,n.y)),this.delegateDragEvents(e,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0),!(++e.mousemoved<=this.options.moveThreshold)){t=tr(t);var n=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=tr(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(i.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},mouseover:function(t){t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.findView(t.relatedTarget);if(e){if(n===e)return;e.mouseenter(t)}else{if(n)return;this.trigger("paper:mouseenter",t)}}},mouseleave:function(t){t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.findView(t.relatedTarget);if(e){if(n===e)return;e.mouseleave(t)}else{if(n)return;this.trigger("paper:mouseleave",t)}}},mousewheel:function(t){t=tr(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=t.originalEvent,i=this.snapToGrid(n.clientX,n.clientY),r=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail));e?e.mousewheel(t,i.x,i.y,r):this.trigger("blank:mousewheel",t,i.x,i.y,r)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var i=this.findView(e);if(i){if(t=tr(t),this.guard(t,i))return;var r=this.snapToGrid(t.clientX,t.clientY);i.onevent(t,n,r.x,r.y)}}},magnetEvent:function(t,e){var n=t.currentTarget;if(n.getAttribute("magnet")){var i=this.findView(n);if(i){if(t=tr(t),this.guard(t,i))return;var r=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,n,r.x,r.y)}}},onmagnet:function(t){this.magnetEvent(t,function(t,e,n,i,r){t.onmagnet(e,i,r)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(t,e,n,i,r){t.magnetpointerdblclick(e,n,i,r)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetEvent(t,function(t,e,n,i,r){t.magnetcontextmenu(e,n,i,r)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(n){if(t=tr(t),this.guard(t,n))return;var i=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,i.x,i.y)}},getPointerArgs:function(t){var e=tr(t),n=this.snapToGrid(e.clientX,e.clientY);return[e,n.x,n.y]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e),this.undelegateEvents()},guard:function(t,e){return"mousedown"===t.type&&2===t.button||!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.model&&e.model instanceof No||this.svg===t.target||this.el===t.target||i.contains(this.svg,t.target)))},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Ri("svg",{width:"100%",height:"100%"},Ri("defs")),patterns:{},add:function(t,e){Ri(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(Ri("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}}),this._gridCache},setGrid:function(t){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(t)?t:[t||{}]).forEach(function(t){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(t))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if($r(t)&&Array.isArray(e[t]))return e[t].map(function(t){return yr({},t)});var n=t||{args:[{}]},i=Array.isArray(n),r=n.name;if(i||r||n.markup||(r="dot"),r&&Array.isArray(e[r])){var o=e[r].map(function(t){return yr({},t)}),a=Array.isArray(n.args)?n.args:[n.args||{}];Cr(a[0],Yr(t,"args"));for(var s=0;s<a.length;s++)o[s]&&yr(o[s],a[s]);return o}return i?n:[n]},drawGrid:function(t){var e=this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],i=this.matrix(),r=this._getGridRefs();this._gridSettings.forEach(function(t,o){var a="pattern_"+o,s=Jr(t,n[o],{sx:i.a||1,sy:i.d||1,ox:i.e||0,oy:i.f||0});s.width=e*(i.a||1)*(s.scaleFactor||1),s.height=e*(i.d||1)*(s.scaleFactor||1),r.exist(a)||r.add(a,Ri("pattern",{id:a,patternUnits:"userSpaceOnUse"},Ri(s.markup)));var l=r.get(a);Dr(s.update)&&s.update(l.node.childNodes[0],s);var u=s.ox%s.width;u<0&&(u+=s.width);var c=s.oy%s.height;c<0&&(c+=s.height),l.attr({x:u,y:c,width:s.width,height:s.height})});var o=(new XMLSerializer).serializeToString(r.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",i=this.scale(),r=this.translate();Kr(e)&&(e=r.tx+i.sx*(e.x||0)+"px "+(r.ty+i.sy*(e.y||0))+"px"),Kr(n)&&(n=(n=new di(n).scale(i.sx,i.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){var n,i=(e=e||{}).size,r=e.repeat||"no-repeat",o=e.opacity||1,a=Math.abs(e.quality)||1,s=this.constructor.backgroundPatterns[Vr(r)];if(Dr(s)){t.width*=a,t.height*=a;var l=s(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=l.toDataURL("image/png"),r="repeat",Kr(i)?(i.width*=l.width/t.width,i.height*=l.height/t.height):void 0===i&&(e.size={width:l.width/a,height:l.height/a})}else n=t.src,void 0===i&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:r,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Sr(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,wr(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Kr(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+Fi(JSON.stringify(t))),!this.isDefined(e)){var i=gr,r=i[n]&&i[n](t.args||{});if(!r)throw new Error("Non-existing filter "+n);var o=yr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});Ri(r,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!Kr(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");var e=t.id,n=t.type,i=t.stops;if(e||(e=n+this.svg.id+Fi(JSON.stringify(t))),!this.isDefined(e)){var r=pr('<stop offset="${offset}" stop-color="${color}" stop-opacity="${opacity}"/>'),o=["<"+n+">",zr(i).map(function(t){return r({offset:t.offset,color:t.color,opacity:Number.isFinite(t.opacity)?t.opacity:1})}).join(""),"</"+n+">"].join(""),a=yr({id:e},t.attrs);Ri(o,a).appendTo(this.defs)}return e},defineMarker:function(t){if(!Kr(t))throw new TypeError("dia.Paper: defineMarker() requires 1. argument to be an object.");var e=t.id;if(e||(e=this.svg.id+Fi(JSON.stringify(t))),!this.isDefined(e)){var n=Yr(t,"type","userSpaceOnUse");Ri("marker",{id:e,orient:"auto",overflow:"visible",markerUnits:t.markerUnits||"userSpaceOnUse"},[Ri(t.type||"path",n)]).appendTo(this.defs)}return e}},{sorting:hs,Layers:fs,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,i=t.height;e.width=2*n,e.height=2*i;var r=e.getContext("2d");return r.drawImage(t,0,0,n,i),r.setTransform(-1,0,0,-1,e.width,e.height),r.drawImage(t,0,0,n,i),r.setTransform(-1,0,0,1,e.width,0),r.drawImage(t,0,0,n,i),r.setTransform(1,0,0,-1,0,e.height),r.drawImage(t,0,0,n,i),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,i=t.height;e.width=2*n,e.height=i;var r=e.getContext("2d");return r.drawImage(t,0,0,n,i),r.translate(2*n,0),r.scale(-1,1),r.drawImage(t,0,0,n,i),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,i=t.height;e.width=n,e.height=2*i;var r=e.getContext("2d");return r.drawImage(t,0,0,n,i),r.translate(0,2*i),r.scale(1,-1),r.drawImage(t,0,0,n,i),e},watermark:function(t,e){e=e||{};var n=t.width,i=t.height,r=document.createElement("canvas");r.width=3*n,r.height=3*i;for(var o=r.getContext("2d"),a=qr(e.watermarkAngle)?-e.watermarkAngle:-20,s=zn(a),l=r.width/4,u=r.height/4,c=0;c<4;c++)for(var h=0;h<4;h++)0<(c+h)%2&&(o.setTransform(1,0,0,1,(2*c-1)*l,(2*h-1)*u),o.rotate(s),o.drawImage(t,-n/2,-i/2,n,i));return r}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){Ri(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;Ri(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,i=e.width,r=e.height,o=e.thickness;n=0<=i-o&&0<=r-o?["M",i,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",Ri(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,i=e.width,r=e.height,o=e.thickness;n=0<=i-o&&0<=r-o?["M",i,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",Ri(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,i=e.width,r=e.height,o=e.thickness;n=0<=i-o&&0<=r-o?["M",i,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",Ri(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),vs=Ho.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){var e=this.paper,n=this.relatedView;return!e||!n||e.guard(t,n)}}),Is=Ho.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null,component:!1},configure:function(t){var e=(t=yr(this.options,t)).tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof $o))return this;for(var i=this.tools=[],r=0,o=e.length;r<o;r++){var a=e[r];a instanceof vs&&(a.configure(n,this),this.vel.append(a.el),i.push(a))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,i=0,r=e.length;i<r;i++){var o=e[i];n?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return n||(this.mount(),this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,i=e.length;n<i;n++){var r=e[n];t===r?r.show():r.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,i=e.length;n<i;n++){var r=e[n];r===t||r.isVisible()||(r.show(),r.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){var t=this.options,e=t.relatedView;return e&&(t.component?e.el:e.paper.tools).appendChild(this.el),this}}),As={Graph:Xo,attributes:xo,Cell:No,CellView:$o,Element:Uo,ElementView:ea,Link:Ro,LinkView:Xa,Paper:ms,ToolView:vs,ToolsView:Is,HighlighterView:Ko},ys={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,n){var i=this.getCell(e),r=n.node(e);t.setPosition?t.setPosition(i,r):i.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importLink:function(t,e,n){var i=this.getCell(e.name),r=n.edge(e),o=r.points||[],a=new vi(o);if(t.setVertices||t.setLinkVertices)if(Dr(t.setVertices))t.setVertices(i,o);else{a.simplify({threshold:.001});var s=a.points.map(function(t){return t.toJSON()}),l=s.length;i.set("vertices",s.slice(1,l-1))}if(t.setLabels&&"x"in r&&"y"in r){var u={x:r.x,y:r.y};if(Dr(t.setLabels))t.setLabels(i,u,o);else{var c=a.closestPointLength(u),h=a.pointAtLength(c),f=c/a.length(),g=new Qn(u).difference(h).toJSON();i.label(0,{position:{distance:f,offset:g}})}}},layout:function(t,e){var n;n=t instanceof Xo?t:(new Xo).resetCells(t,{dry:!0,sort:!1});var i=(e=Cr(e||{},{resizeClusters:!(t=null),clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink})).dagre||("undefined"!=typeof dagre?dagre:void 0);if(void 0===i)throw new Error('The the "dagre" utility is a mandatory dependency.');var r=ys.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(t){return t.id}}),o={},a=e.marginX||0,s=e.marginY||0;if(e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),e.ranker&&(o.ranker=e.ranker),a&&(o.marginx=a),s&&(o.marginy=s),r.setGraph(o),i.layout(r,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),ys.fromGraphLib(r,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var l=r.nodes().filter(function(t){return 0<r.children(t).length}).map(n.getCell.bind(n)).sort(function(t,e){return e.getAncestors().length-t.getAncestors().length});wr(l,"fitEmbeds",{padding:e.clusterPadding})}n.stopBatch("layout");var u=r.graph();return new di(a,s,Math.abs(u.width-2*a),Math.abs(u.height-2*s))},fromGraphLib:function(t,e){var n=(e=e||{}).importNode||to,i=e.importEdge||to,r=this instanceof Xo?this:new Xo;return t.nodes().forEach(function(i){n.call(r,i,t,r,e)}),t.edges().forEach(function(n){i.call(r,n,t,r,e)}),r},toGraphLib:function(t,e){var n=(e=e||{}).graphlib||("undefined"!=typeof graphlib?graphlib:void 0);if(void 0===n)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var i=Ur(e,"directed","compound","multigraph"),r=new n.Graph(i),o=e.setNodeLabel||to,a=e.setEdgeLabel||to,s=e.setEdgeName||to,l=t.get("cells"),u=0,c=l.length;u<c;u++){var h=l.at(u);if(h.isLink()){var f=h.get("source"),g=h.get("target");if(!f.id||!g.id)break;r.setEdge(f.id,g.id,a(h),s(h))}else if(r.setNode(h.id,o(h)),r.isCompound()&&h.has("parent")){var d=h.get("parent");l.has(d)&&r.setParent(h.id,d)}}return r}};Xo.prototype.toGraphLib=function(t){return ys.toGraphLib(this,t)},Xo.prototype.fromGraphLib=function(t,e){return ys.fromGraphLib.call(this,t,e)};var Cs={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(void 0!==n)return n;try{n=e()}catch(t){n=!1}return this._results[t]=n}},bs=Uo.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),ws=bs.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),xs=ea.extend({presentationAttributes:ea.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=ea.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),Ns=bs.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),Ms=bs.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),Ss=bs.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),ks=bs.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Ts=bs.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),Ds=bs.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),js=bs.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),zs=js.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),Ls=Cs.test("svgforeignobject"),Ps=bs.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Ls?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),bs.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":yr({},e),div:{style:yr({},e)}})},updateContent:function(t,e){Ls?this.attr({".content":{html:ar(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),Es=ea.extend({presentationAttributes:Ls?ea.prototype.presentationAttributes:ea.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=ea.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if(Ls)ea.prototype.update.call(this,n,e);else{var i=Yr(e||n.get("attrs"),".content");ea.prototype.update.call(this,n,i),e&&!_r(e,".content")||this.updateContent(n,e)}},updateContent:function(t,e){var n=Jr({},(e||t.get("attrs"))[".content"]);n=Yr(n,"text");var i=or(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),r=Hi({},".content",n,"/");r[".content"].text=i,ea.prototype.update.call(this,t,r)}}),Os={Generic:bs,Rect:ws,TextView:xs,Text:Ns,Circle:Ms,Ellipse:Ss,Polygon:ks,Polyline:Ts,Image:Ds,Path:js,Rhombus:zs,TextBlock:Ps,TextBlockView:Es},Zs=Uo.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Bs=Uo.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Gs=Uo.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Rs=Uo.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),_s=Uo.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Ws=Uo.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Ys=Uo.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Us=Uo.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Fs=Uo.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Xs=Uo.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Vs=Uo.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Hs=Uo.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var n={lateralArea:t},i=ir(t)?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:n,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var n=ir(t);n&&(t=parseFloat(t)/100);var i=e.x,r=e.y,o=e.width,a=e.height,s=o/2,l=n?a*t:t,u=Ri.KAPPA,c=u*s,h=u*(n?a*t:t),f=i+o/2,g=i+o,d=r+l,p=d-l,m=r+a-l,v=r+a;return{d:["M",i,d,"L",i,m,"C",i,m+h,f-c,v,f,v,"C",f+c,v,g,m+h,g,m,"L",g,d,"C",g,d-h,f+c,p,f,p,"C",f-c,p,i,d-h,i,d,"Z"].join(" ")}}}}}),Js=Cs.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Qs={Rectangle:Zs,Circle:Bs,Ellipse:Gs,Path:Rs,Polygon:_s,Polyline:Ws,Image:Ys,BorderedImage:Us,EmbeddedImage:Fs,InscribedImage:Xs,HeaderedRectangle:Vs,Cylinder:Hs,TextBlock:Uo.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Js]},{attributes:{text:{set:function(t,e,n,i){if(!(n instanceof HTMLElement)){var r=i.style||{},o={text:t,width:-5,height:"100%"},a=yr({textVerticalAnchor:"middle"},r);return xo.textWrap.set.call(this,o,e,n,a),{fill:r.color||null}}n.textContent=t},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}}),Link:Ro.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),DoubleLink:Ro.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ShadowLink:Ro.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]})},Ks=bs.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){bs.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,n){var i=Nr(this.get("inPorts")),r=Br(Nr(this.get("outPorts")),i),o=this.createPortItems("in",i),a=this.createPortItems("out",r);this.prop("ports/items",o.concat(a),yr({rewrite:!0},n))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return zr(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,n){var i=this.get(e);return this.set(e,Array.isArray(i)?i.concat(t):[t],n)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,n){return this.set(e,Zr(this.get(e),t),n)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,n){return this.prop("ports/groups/"+t,Kr(e)?e:{},n)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),qs=Ks.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),$s=Ks.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),tl={Model:Ks,Atomic:qs,Coupled:$s,Link:Ro.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}})},el=bs.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),nl=el.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),il=nl.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),rl=nl.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),ol=el.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),al=el.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),sl=ol.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),ll=ol.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),ul=al.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),cl=al.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),hl=al.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),fl=al.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),gl=al.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),dl=al.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),pl={Gate:el,IO:nl,Input:il,Output:rl,Gate11:ol,Gate21:al,Repeater:sl,Not:ll,Or:ul,And:cl,Nor:hl,Nand:fl,Xor:gl,Xnor:dl,Wire:Ro.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")})},ml={KingWhite:bs.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),KingBlack:bs.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),QueenWhite:bs.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),QueenBlack:bs.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),RookWhite:bs.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),RookBlack:bs.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),BishopWhite:bs.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),BishopBlack:bs.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),KnightWhite:bs.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),KnightBlack:bs.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),PawnWhite:bs.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),PawnBlack:bs.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'})},vl=Uo.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),Il=vl.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),Al=Uo.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),yl=Al.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),Cl=Uo.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),bl=Cl.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),wl=Cl.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),xl=Cl.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),Nl=Cl.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),Ml={Entity:vl,WeakEntity:Il,Relationship:Al,IdentifyingRelationship:yl,Attribute:Cl,Multivalued:bl,Derived:wl,Key:xl,Normal:Nl,ISA:Uo.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Line:Ro.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}})},Sl={State:Ms.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),StartState:Uo.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),EndState:Uo.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Arrow:Ro.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0})},kl={Member:Uo.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Arrow:Ro.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1})},Tl={Place:bs.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),PlaceView:ea.extend({presentationAttributes:ea.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:ea.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var i=(t=ea.prototype.confirmUpdate).call.apply(t,[this].concat(e));return this.hasFlag(i,"TOKENS")&&(this.renderTokens(),this.update(),i=this.removeFlag(i,"TOKENS")),i},renderTokens:function(){var t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(e){t.removeClass(e)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(Ri("circle"));break;case 2:t.addClass("two"),t.append([Ri("circle"),Ri("circle")]);break;case 3:t.addClass("three"),t.append([Ri("circle"),Ri("circle"),Ri("circle")]);break;default:t.addClass("alot"),t.append(Ri("text").text(e+""))}}}),Transition:bs.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Link:Ro.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}})},Dl=bs.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),bs.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],n=0;e.forEach(function(e){var i=Array.isArray(e.text)?e.text:[e.text],r=20*i.length+20;t[".uml-class-"+e.type+"-text"].text=i.join("\n"),t[".uml-class-"+e.type+"-rect"].height=r,t[".uml-class-"+e.type+"-rect"].transform="translate(0,"+n+")",n+=r})}}),jl=ea.extend({initialize:function(){ea.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),zl=Dl.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),Ll=jl,Pl=Dl.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),El={basic:Os,standard:Qs,devs:tl,logic:pl,chess:ml,erd:Ml,fsa:Sl,org:kl,pn:Tl,uml:{Class:Dl,ClassView:jl,Abstract:zl,AbstractView:Ll,Interface:Pl,InterfaceView:jl,Generalization:Ro.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),Implementation:Ro.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),Aggregation:Ro.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),Composition:Ro.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),Association:Ro.define("uml.Association"),State:bs.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),bs.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),StartState:Ms.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),EndState:bs.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Transition:Ro.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}})}};function Ol(t,e){return 0===e?"0%":Math.round(t/e*100)+"%"}function Zl(t){return function(e,n,i,r){return(n.isNodeConnection(i)?Gl:Bl)(t,e,n,i,r)}}function Bl(t,e,n,i,r){var o=n.model.angle(),a=n.getNodeUnrotatedBBox(i),s=n.model.getBBox().center();r.rotate(s,o);var l=r.x-a.x,u=r.y-a.y;return t&&(l=Ol(l,a.width),u=Ol(u,a.height)),e.anchor={name:"topLeft",args:{dx:l,dy:u,rotate:!0}},e}function Gl(t,e,n,i,r){var o=n.getConnection();if(!o)return e;var a=o.closestPointLength(r);if(t){var s=o.length();e.anchor={name:"connectionRatio",args:{ratio:a/s}}}else e.anchor={name:"connectionLength",args:{length:a}};return e}var Rl=to,_l=Zl(!1),Wl=Zl(!0),Yl={useDefaults:Rl,pinAbsolute:_l,pinRelative:Wl};function Ul(t,e,n){return Wl.call(this.paper,{},e,n,t,this.model).anchor}function Fl(t,e){var n=t.model;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}var Xl=Ho.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){this.vel.attr({cx:t,cy:e})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),Vl=vs.extend({name:"vertices",options:{handleClass:Xl,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this,e=this.relatedView.model.vertices(),n=0,i=e.length;n<i;n++){var r=e[n],o=new this.options.handleClass({index:n,paper:this.paper,guard:function(e){return t.guard(e)}});o.render(),o.position(r.x,r.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var i=t[e],r=this.handles[e];if(!r)return;r.position(i.x,i.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),i=0<t?n[t-1]:e.sourceAnchor,r=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new Qn(i),next:new Qn(r)}},onHandleWillChange:function(t,e){this.focus();var n=this.relatedView,i=this.options;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),i.stopPropagation||n.notifyPointerdown.apply(n,n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){var n=this.options,i=this.relatedView,r=t.options.index,o=i.paper.getPointerArgs(e),a=o[0],s=o[1],l=o[2],u={x:s,y:l};this.snapVertex(u,r),i.model.vertex(r,u,{ui:!0,tool:this.cid}),t.position(u.x,u.y),n.stopPropagation||i.notifyPointermove(a,s,l)},onHandleChanged:function(t,e){var n=this.options,i=this.relatedView;if(n.vertexAdding&&this.updatePath(),n.redundancyRemoval){i.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),i.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&i.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var r=i.paper.getPointerArgs(e),o=r[0],a=r[1],s=r[2];n.stopPropagation||i.notifyPointerup(o,a,s),i.checkMouseleave(o)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(0<n){var i=this.getNeighborPoints(e),r=i.prev,o=i.next;Math.abs(t.x-r.x)<n?t.x=r.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-r.y)<n?t.y=i.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var n=t.options.index,i=this.relatedView;i.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),i.checkMouseleave(tr(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=tr(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),i=this.relatedView;i.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var r=i.getVertexIndex(n.x,n.y);this.snapVertex(n,r),i.model.insertVertex(r,n,{ui:!0,tool:this.cid}),this.render();var o=this.handles[r];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:Xl}),Hl=Ho.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,n,i){var r=Ri.createSVGMatrix().translate(t,e).rotate(n),o=this.childNodes.handle;o.setAttribute("transform",Ri.matrixToTransformString(r)),o.setAttribute("cursor",n%180==0?"row-resize":"col-resize");var a=i.getClosestPoint(new Qn(t,e)),s=this.childNodes.line;s.setAttribute("x1",t),s.setAttribute("y1",e),s.setAttribute("x2",a.x),s.setAttribute("y2",a.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}}),Jl=vs.extend({name:"segments",precision:.5,options:{handleClass:Hl,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:Ul,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var n=0,i=e.length;n<i-1;n++){var r=e[n],o=e[n+1],a=this.renderHandle(r,o);this.simulateRelatedView(a.el),this.handles.push(a),a.options.index=n}return this},renderHandle:function(t,e){var n=this,i=new this.options.handleClass({paper:this.paper,guard:function(t){return n.guard(t)}});return i.render(),this.updateHandle(i,t,e),i.vel.appendTo(this.el),this.startHandleListening(i),i},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,n=0,i=e.length;n<i;n++)e[n].options.index+=t},resetAnchor:function(t,e){var n=this.relatedView.model;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,n){var i=t.options.index,r=this.relatedView.model.vertices(),o=t.options.axis,a=r[i-2]||n.sourceAnchor,s=r[i+1]||n.targetAnchor,l=this.options.snapRadius;return Math.abs(e[o]-a[o])<l?e[o]=a[o]:Math.abs(e[o]-s[o])<l&&(e[o]=s[o]),e},onHandleChanging:function(t,e){var n=this.options,i=this.eventData(e),r=this.relatedView,o=r.paper,a=t.options.index-1,s=tr(e),l=o.snapToGrid(s.clientX,s.clientY),u=this.snapHandle(t,l.clone(),i),c=t.options.axis,h=this.options.snapHandle?0:l[c]-u[c],f=r.model,g=Sr(f.vertices()),d=g[a],p=g[a+1],m=this.options.anchor;"function"!=typeof m&&(m=null);var v=r.sourceView,I=r.sourceBBox,A=!1,y=!1;if(d?0===a?I.containsPoint(d)?(g.shift(),this.shiftHandleIndexes(-1),A=!0):(d[c]=u[c],y=!0):d[c]=u[c]:((d=r.sourceAnchor.toJSON())[c]=u[c],I.containsPoint(d)?(d[c]=u[c],A=!0):(g.unshift(d),this.shiftHandleIndexes(1),y=!0)),m&&v){if(A){var C=i.sourceAnchor.clone();C[c]=u[c];var b=m.call(r,C,v,r.sourceMagnet||v.el,"source",r);this.resetAnchor("source",b)}y&&this.resetAnchor("source",i.sourceAnchorDef)}var w=r.targetView,x=r.targetBBox,N=!1,M=!1;if(p?a===g.length-2?x.containsPoint(p)?(g.pop(),N=!0):(p[c]=u[c],M=!0):p[c]=u[c]:((p=r.targetAnchor.toJSON())[c]=u[c],x.containsPoint(p)?N=!0:(g.push(p),M=!0)),m&&w){if(N){var S=i.targetAnchor.clone();S[c]=u[c];var k=m.call(r,S,w,r.targetMagnet||w.el,"target",r);this.resetAnchor("target",k)}M&&this.resetAnchor("target",i.targetAnchorDef)}f.vertices(g,{ui:!0,tool:this.cid}),this.updateHandle(t,d,p,h),n.stopPropagation||r.notifyPointermove(s,l.x,l.y)},onHandleChangeStart:function(t,e){var n=this.options,i=this.handles,r=this.relatedView,o=r.model,a=r.paper,s=t.options.index;if(Array.isArray(i)){for(var l=0,u=i.length;l<u;l++)l!==s&&i[l].hide();this.focus(),this.eventData(e,{sourceAnchor:r.sourceAnchor.clone(),targetAnchor:r.targetAnchor.clone(),sourceAnchorDef:Mr(o.prop(["source","anchor"])),targetAnchorDef:Mr(o.prop(["target","anchor"]))}),o.startBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown.apply(r,a.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){var n=this.options,i=this.relatedView,r=i.paper,o=i.model;n.redundancyRemoval&&i.removeRedundantLinearVertices({ui:!0,tool:this.cid});var a=tr(e),s=r.snapToGrid(a.clientX,a.clientY);this.render(),this.blur(),o.stopBatch("segment-move",{ui:!0,tool:this.cid}),n.stopPropagation||i.notifyPointerup(a,s.x,s.y),i.checkMouseleave(a)},updateHandle:function(t,e,n,i){var r=Math.abs(e.x-n.x)<this.precision,o=Math.abs(e.y-n.y)<this.precision;if(r||o){var a=new ti(e,n);if(a.length()<this.options.segmentLengthThreshold)t.hide();else{var s=a.midpoint(),l=r?"x":"y";s[l]+=i||0;var u=a.vector().vectorAngle(new Qn(1,0));t.position(s.x,s.y,u,this.relatedView),t.show(),t.options.axis=l}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:Hl}),Ql=vs.extend({tagName:"path",xAxisVector:new Qn(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},onRender:function(){this.update()},update:function(){var t,e,n=this.ratio,i=this.relatedView,r=i.getTangentAtRatio(n);if(e=r?(t=r.start,r.vector().vectorAngle(this.xAxisVector)||0):(t=i.getPointAtRatio(n),0),!t)return this;var o=Ri.createSVGMatrix().translate(t.x,t.y).rotate(e);return this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=tr(t),n=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,n.x,n.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,n=e.paper,i=tr(t),r=n.snapToGrid(i.clientX,i.clientY);e.pointerup(i,r.x,r.y),n.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),Kl=Ql.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),ql=Ql.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),$l=vs.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){var t=this.relatedView,e=this.vel,n=t.model.isLink()?this.getLinkMatrix():this.getElementMatrix();e.transform(n,{absolute:!0})},getElementMatrix:function(){var t=this.relatedView,e=this.options,n=e.x;void 0===n&&(n=0);var i=e.y;void 0===i&&(i=0);var r=e.offset;void 0===r&&(r={});var o=e.useModelGeometry,a=e.rotate,s=Fl(t,o),l=t.model.angle();a||(s=s.bbox(l));var u=r.x;void 0===u&&(u=0);var c=r.y;void 0===c&&(c=0),ir(n)&&(n=parseFloat(n)/100*s.width),ir(i)&&(i=parseFloat(i)/100*s.height);var h=Ri.createSVGMatrix().translate(s.x+s.width/2,s.y+s.height/2);return a&&(h=h.rotate(l)),h.translate(n+u-s.width/2,i+c-s.height/2)},getLinkMatrix:function(){var t=this.relatedView,e=this.options,n=e.offset;void 0===n&&(n=0);var i=e.distance;void 0===i&&(i=0);var r,o,a,s=e.rotate;a=(r=ir(i)?t.getTangentAtRatio(parseFloat(i)/100):t.getTangentAtLength(i))?(o=r.start,r.vector().vectorAngle(new Qn(1,0))||0):(o=t.getConnection().start,0);var l=Ri.createSVGMatrix().translate(o.x,o.y).rotate(a).translate(0,n);return s||(l=l.rotate(-a)),l},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),tu=$l.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}}),eu=vs.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){var t=this.relatedView,e=this.options,n=this.vel,i=e.useModelGeometry,r=e.rotate,o=cr(e.padding),a=Fl(t,i).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom}),s=t.model;if(s.isElement()){var l=s.angle();if(l)if(r){var u=s.getBBox().center();n.rotate(l,u.x,u.y,{absolute:!0})}else a=a.bbox(l)}return n.attr(a.toJSON()),this}}),nu=vs.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:function(t,e,n,i,r,o){var a=o.options.snapRadius,s="source"===i,l=s?0:-1,u=this.model.vertex(l)||this.getEndAnchor(s?"target":"source");return u&&(Math.abs(u.x-t.x)<a&&(t.x=u.x),Math.abs(u.y-t.y)<a&&(t.y=u.y)),t},anchor:Ul,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){var t=this.type,e=this.relatedView.getEndView(t);return this.el.style.display=e?(this.updateAnchor(),this.updateArea(),""):"none",this},updateAnchor:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var n=this.relatedView,i=this.type,r=n.getEndAnchor(i),o=this.options,a=n.model.prop([i,"anchor"]);e.setAttribute("transform","translate("+r.x+","+r.y+")");var s=a?o.customAnchorAttributes:o.defaultAnchorAttributes;for(var l in s)e.setAttribute(l,s[l])}}},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var n,i,r,o=this.relatedView,a=this.type,s=o.getEndView(a),l=s.model,u=o.getEndMagnet(a),c=this.options.areaPadding;isFinite(c)||(c=0),s.isNodeConnection(u)?(i=0,r=(n=s.getBBox()).center()):(n=s.getNodeUnrotatedBBox(u),i=l.angle(),r=n.center(),i&&r.rotate(l.getBBox().center(),-i)),n.inflate(c),e.setAttribute("x",-n.width/2),e.setAttribute("y",-n.height/2),e.setAttribute("width",n.width),e.setAttribute("height",n.height),e.setAttribute("transform","translate("+r.x+","+r.y+") rotate("+i+")")}}},toggleArea:function(t){this.childNodes.area.style.display=t?"":"none"},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,n=this.relatedView.model;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):n.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e,n=this.relatedView,i=this.type,r=n.getEndView(i),o=r.model,a=n.getEndMagnet(i),s=tr(t),l=this.paper.clientToLocalPoint(s.clientX,s.clientY),u=this.options.snap;if("function"==typeof u&&(l=u.call(n,l,r,a,i,n,this),l=new Qn(l)),this.options.restrictArea)if(r.isNodeConnection(a)){var c=r.getClosestPoint(l);c&&(l=c)}else{var h=r.getNodeUnrotatedBBox(a),f=o.angle(),g=o.getBBox().center(),d=l.clone().rotate(g,f);h.containsPoint(d)||(l=h.pointNearestToPoint(d).rotate(g,-f))}var p=this.options.anchor;"function"==typeof p&&(e=p.call(n,l,r,a,i,n)),this.resetAnchor(e),this.update()},onPointerUp:function(t){this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.relatedView;this.options.redundancyRemoval&&e.removeRedundantLinearVertices({ui:!0,tool:this.cid}),e.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;!1!==t&&(!0===t&&(t=null),this.resetAnchor(Sr(t)),this.update())}}),iu={Vertices:Vl,Segments:Jl,SourceArrowhead:ql,TargetArrowhead:Kl,SourceAnchor:nu.extend({name:"source-anchor",type:"source"}),TargetAnchor:nu.extend({name:"target-anchor",type:"target"}),Button:$l,Remove:tu,Boundary:eu},ru={Button:$l,Remove:tu,Boundary:eu},ou=Ri,au={DirectedGraph:ys,PortLabel:Go,Port:Lo};t.V=Ri,t.Vectorizer=ou,t.anchors=cs,t.config=_i,t.connectionPoints=ls,t.connectionStrategies=Yl,t.connectors=Ua,t.dia=As,t.elementTools=ru,t.env=Cs,t.format={},t.g=Gi,t.highlighters=Ka,t.layout=au,t.linkAnchors=ns,t.linkTools=iu,t.mvc=Jo,t.routers=Oa,t.setTheme=function(t,e){wr(Vo,"setTheme",t,e=e||{}),Ho.prototype.defaultTheme=t},t.shapes=El,t.ui={},t.util=ko,t.version="3.4.0",Object.defineProperty(t,"__esModule",{value:!0})}),"undefined"!=typeof joint)var g=joint.g,V=joint.V,Vectorizer=joint.V;